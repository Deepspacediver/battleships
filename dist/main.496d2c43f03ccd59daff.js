(()=>{var t={183:()=>{var t=document.querySelectorAll(".ship");Array.from(t).forEach((function(t){var e=Number(t.dataset.length);t.setAttribute("draggable","true"),t.dataset.alignment="horizontal";for(var r=0;r<e;r+=1){var n=document.createElement("div");n.classList.add("block"),t.appendChild(n)}}))},307:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",i="[object Array]",c="[object Boolean]",u="[object Date]",s="[object Error]",l="[object Function]",f="[object Map]",d="[object Number]",h="[object Object]",v="[object Promise]",y="[object RegExp]",p="[object Set]",g="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",A=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,j={};j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j[o]=j[i]=j[b]=j[c]=j[_]=j[u]=j[s]=j[l]=j[f]=j[d]=j[h]=j[y]=j[p]=j[g]=j[m]=!1;var w="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,L="object"==typeof self&&self&&self.Object===Object&&self,E=w||L||Function("return this")(),k=e&&!e.nodeType&&e,I=k&&t&&!t.nodeType&&t,z=I&&I.exports===k,O=z&&w.process,P=function(){try{return O&&O.binding&&O.binding("util")}catch(t){}}(),x=P&&P.isTypedArray;function T(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function q(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function M(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var B,C,N,D=Array.prototype,$=Function.prototype,F=Object.prototype,U=E["__core-js_shared__"],G=$.toString,R=F.hasOwnProperty,V=(B=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",W=F.toString,H=RegExp("^"+G.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=z?E.Buffer:void 0,J=E.Symbol,K=E.Uint8Array,Q=F.propertyIsEnumerable,X=D.splice,Z=J?J.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=Y?Y.isBuffer:void 0,rt=(C=Object.keys,N=Object,function(t){return C(N(t))}),nt=It(E,"DataView"),at=It(E,"Map"),ot=It(E,"Promise"),it=It(E,"Set"),ct=It(E,"WeakMap"),ut=It(Object,"create"),st=xt(nt),lt=xt(at),ft=xt(ot),dt=xt(it),ht=xt(ct),vt=J?J.prototype:void 0,yt=vt?vt.valueOf:void 0;function pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new mt;++e<r;)this.add(t[e])}function _t(t){var e=this.__data__=new gt(t);this.size=e.size}function At(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1}function St(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Z&&Z in Object(t)?function(t){var e=R.call(t,Z),r=t[Z];try{t[Z]=void 0;var n=!0}catch(t){}var a=W.call(t);return n&&(e?t[Z]=r:delete t[Z]),a}(t):function(t){return W.call(t)}(t)}function jt(t){return $t(t)&&St(t)==o}function wt(t,e,r,n,a){return t===e||(null==t||null==e||!$t(t)&&!$t(e)?t!=t&&e!=e:function(t,e,r,n,a,l){var v=Mt(t),m=Mt(e),A=v?i:Ot(t),S=m?i:Ot(e),j=(A=A==o?h:A)==h,w=(S=S==o?h:S)==h,L=A==S;if(L&&Bt(t)){if(!Bt(e))return!1;v=!0,j=!1}if(L&&!j)return l||(l=new _t),v||Ft(t)?Lt(t,e,r,n,a,l):function(t,e,r,n,a,o,i){switch(r){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!o(new K(t),new K(e)));case c:case u:case d:return Tt(+t,+e);case s:return t.name==e.name&&t.message==e.message;case y:case g:return t==e+"";case f:var l=q;case p:var h=1&n;if(l||(l=M),t.size!=e.size&&!h)return!1;var v=i.get(t);if(v)return v==e;n|=2,i.set(t,e);var m=Lt(l(t),l(e),n,a,o,i);return i.delete(t),m;case"[object Symbol]":if(yt)return yt.call(t)==yt.call(e)}return!1}(t,e,A,r,n,a,l);if(!(1&r)){var E=j&&R.call(t,"__wrapped__"),k=w&&R.call(e,"__wrapped__");if(E||k){var I=E?t.value():t,z=k?e.value():e;return l||(l=new _t),a(I,z,r,n,l)}}return!!L&&(l||(l=new _t),function(t,e,r,n,a,o){var i=1&r,c=Et(t),u=c.length;if(u!=Et(e).length&&!i)return!1;for(var s=u;s--;){var l=c[s];if(!(i?l in e:R.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var d=!0;o.set(t,e),o.set(e,t);for(var h=i;++s<u;){var v=t[l=c[s]],y=e[l];if(n)var p=i?n(y,v,l,e,t,o):n(v,y,l,t,e,o);if(!(void 0===p?v===y||a(v,y,r,n,o):p)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var g=t.constructor,m=e.constructor;g==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,r,n,a,l))}(t,e,r,n,wt,a))}function Lt(t,e,r,n,a,o){var i=1&r,c=t.length,u=e.length;if(c!=u&&!(i&&u>c))return!1;var s=o.get(t);if(s&&o.get(e))return s==e;var l=-1,f=!0,d=2&r?new bt:void 0;for(o.set(t,e),o.set(e,t);++l<c;){var h=t[l],v=e[l];if(n)var y=i?n(v,h,l,e,t,o):n(h,v,l,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(d){if(!T(e,(function(t,e){if(i=e,!d.has(i)&&(h===t||a(h,t,r,n,o)))return d.push(e);var i}))){f=!1;break}}else if(h!==v&&!a(h,v,r,n,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Et(t){return function(t,e,r){var n=e(t);return Mt(t)?n:function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}(n,r(t))}(t,Ut,zt)}function kt(t,e){var r,n,a=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof e?"string":"hash"]:a.map}function It(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Dt(t)||function(t){return!!V&&V in t}(t))&&(Ct(t)?H:A).test(xt(t))}(r)?r:void 0}pt.prototype.clear=function(){this.__data__=ut?ut(null):{},this.size=0},pt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},pt.prototype.get=function(t){var e=this.__data__;if(ut){var r=e[t];return r===n?void 0:r}return R.call(e,t)?e[t]:void 0},pt.prototype.has=function(t){var e=this.__data__;return ut?void 0!==e[t]:R.call(e,t)},pt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ut&&void 0===e?n:e,this},gt.prototype.clear=function(){this.__data__=[],this.size=0},gt.prototype.delete=function(t){var e=this.__data__,r=At(e,t);return!(r<0||(r==e.length-1?e.pop():X.call(e,r,1),--this.size,0))},gt.prototype.get=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]},gt.prototype.has=function(t){return At(this.__data__,t)>-1},gt.prototype.set=function(t,e){var r=this.__data__,n=At(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},mt.prototype.clear=function(){this.size=0,this.__data__={hash:new pt,map:new(at||gt),string:new pt}},mt.prototype.delete=function(t){var e=kt(this,t).delete(t);return this.size-=e?1:0,e},mt.prototype.get=function(t){return kt(this,t).get(t)},mt.prototype.has=function(t){return kt(this,t).has(t)},mt.prototype.set=function(t,e){var r=kt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},bt.prototype.add=bt.prototype.push=function(t){return this.__data__.set(t,n),this},bt.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.clear=function(){this.__data__=new gt,this.size=0},_t.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},_t.prototype.get=function(t){return this.__data__.get(t)},_t.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.set=function(t,e){var r=this.__data__;if(r instanceof gt){var n=r.__data__;if(!at||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new mt(n)}return r.set(t,e),this.size=r.size,this};var zt=tt?function(t){return null==t?[]:(t=Object(t),function(e,r){for(var n=-1,a=null==e?0:e.length,o=0,i=[];++n<a;){var c=e[n];u=c,Q.call(t,u)&&(i[o++]=c)}var u;return i}(tt(t)))}:function(){return[]},Ot=St;function Pt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||S.test(t))&&t>-1&&t%1==0&&t<e}function xt(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Tt(t,e){return t===e||t!=t&&e!=e}(nt&&Ot(new nt(new ArrayBuffer(1)))!=_||at&&Ot(new at)!=f||ot&&Ot(ot.resolve())!=v||it&&Ot(new it)!=p||ct&&Ot(new ct)!=m)&&(Ot=function(t){var e=St(t),r=e==h?t.constructor:void 0,n=r?xt(r):"";if(n)switch(n){case st:return _;case lt:return f;case ft:return v;case dt:return p;case ht:return m}return e});var qt=jt(function(){return arguments}())?jt:function(t){return $t(t)&&R.call(t,"callee")&&!Q.call(t,"callee")},Mt=Array.isArray,Bt=et||function(){return!1};function Ct(t){if(!Dt(t))return!1;var e=St(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Nt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Dt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function $t(t){return null!=t&&"object"==typeof t}var Ft=x?function(t){return function(e){return t(e)}}(x):function(t){return $t(t)&&Nt(t.length)&&!!j[St(t)]};function Ut(t){return null!=(e=t)&&Nt(e.length)&&!Ct(e)?function(t,e){var r=Mt(t),n=!r&&qt(t),a=!r&&!n&&Bt(t),o=!r&&!n&&!a&&Ft(t),i=r||n||a||o,c=i?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!R.call(t,s)||i&&("length"==s||a&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Pt(s,u))||c.push(s);return c}(t):function(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||F))return rt(t);var e,r,n=[];for(var a in Object(t))R.call(t,a)&&"constructor"!=a&&n.push(a);return n}(t);var e}t.exports=function(t,e){return wt(t,e)}}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n](o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=function(){for(var t=[],e=0;e<10;e++)for(var r=e,n=0;n<10;n++){var a=n;t.push([r,a])}return t}();var e=document.getElementById("player-board"),n=document.getElementById("ai-board"),a=document.getElementById("place-ship-board");t.forEach((function(t){var r=document.createElement("div");r.classList.add("square"),r.dataset.x=t[0],r.dataset.y=t[1],e.appendChild(r);var o=r.cloneNode();n.appendChild(o);var i=r.cloneNode();a.appendChild(i)})),r(183);var o=r(307),i=r.n(o);const c=function(t,e){var r=0;return{getLength:function(){return t},getName:function(){return e},hit:function(){r+=1},getHitsTaken:function(){return r},isSunk:function(){return r>=t}}};var u=[[0,-1],[-1,-1],[1,-1],[-1,0],[1,0],[0,1],[-1,1],[1,1]],s=[{name:"destroyer",length:2},{name:"submarine",length:3},{name:"cruiser",length:3},{name:"battleship",length:4},{name:"carrier",length:5}];function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=f(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function f(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const h=function(){var e,r=function(t){if(Array.isArray(t))return d(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=[],a=new Set,o=new Set,h=function(t,e){return t.some((function(t){return i()(t,e)}))},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;t.forEach((function(n){for(var a=0;a<e.length;a++){var o=e[a],i=[n[0]+o[0],n[1]+o[1]];i[0]>=0&&i[0]<=9&&i[1]>=0&&i[1]<=9&&!1===h(t,i)&&r.add(String(i))}r.add(String(n))}))},y=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=l(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(r.has(String(a)))return!0}}catch(t){n.e(t)}finally{n.f()}return!1},p=function(t,e,r){var a={ship:c(t,e),coordinates:r};n.push(a),v(r,u,o)},g=function(t){return t.splice(Math.floor(Math.random()*t.length),1)},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["horizontal","vertical"];return t[Math.floor(2*Math.random())]},b=function(t,e){for(var n;void 0===n||o.has(String(n));)if("horizontal"===e){var a=r[Math.floor(Math.random()*(r.length-t))];a[1]+t<=10&&(n=a)}else{var i=r[Math.floor(Math.random()*(10*(t+1)))];i[0]+t<=10&&(n=i)}return n},_=function(t){for(var e=[];e.length<=1;){var r=m(),n=b(t,r);e.push(n);for(var a=1;a<t;a++)"horizontal"===r?e.push([n[0],n[1]+a]):e.push([n[0]+a,n[1]]);y(e)&&e.splice(0)}return v(e),e};return{shipList:n,placeShip:p,receiveAttack:function(t){var e=function(t){var e,r=0,a=l(n);try{for(a.s();!(e=a.n()).done;){if(e.value.coordinates.some((function(e){return i()(t,e)})))return r;r+=1}}catch(t){a.e(t)}finally{a.f()}}(t);if(void 0!==e){var r=n[e];return r.ship.hit(),r.ship.isSunk()?{hit:!0,sunk:!0,coords:r.coordinates}:{hit:!0,sunk:!1,coords:null}}return a.add(String(t)),{hit:!1,sunk:!1,coords:null}},missedShots:a,areAllSunk:function(){return n.every((function(t){return t.ship.isSunk()}))},unavailableCoords:o,isInIllegalCoords:y,randomlyPlaceShips:function(){for(var t=[0,1,2,3,4];t.length;){var e=g(t),r=s[e],n=_(r.length);p(r.length,r.name,n)}}}},v=function(t){return{getName:function(){return t},board:h(),attack:function(t,e){return t.board.receiveAttack(e)}}};function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=document.getElementById("player-board"),g=document.getElementById("ai-board"),m=document.getElementById("turn-display");const b=function(e){var r="realPlayer",n={realPlayer:v(e),AI:v("AI")},a=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal";return"horizontal"===r?t[1]+e>10:t[0]+e>10},o=t,i=function(){return r},c=function(){return r="realPlayer"===r?"ai":"realPlayer"},u=function(t){var e=t;m.textContent="realPlayer"===e?"computer's turn":"player's turn"},s=function(t,e){var r;r="realPlayer"===e?g:p,t.forEach((function(t){r.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("sunk")}))},l=function(t,e,r){var n,a=e.hit;e.sunk,e.coords,"realPlayer"===r?n=g.querySelector('.square[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')):"ai"===r&&(n=p.querySelector('.square[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]'))),!0===a?n.classList.add("hit"):n.classList.add("missed")};return{startAttack:function(t){t.target.classList.contains("missed")||t.target.classList.contains("hit")||"ai"===i()||n.AI.board.areAllSunk()||n.realPlayer.board.areAllSunk()||(function(t){g.classList.remove("active");var e,r=(e=t.target,[Number(e.dataset.x),Number(e.dataset.y)]),a=n.realPlayer.attack(n.AI,r),o=i();u(o),l(r,a,o),!0===a.sunk&&s(a.coords,o),c()}(t),function(){if(!n.AI.board.areAllSunk()){var t,e=i(),r=(t=o).splice(Math.floor(Math.random()*t.length),1).flat(),a=n.AI.attack(n.realPlayer,r);setTimeout((function(){l(r,a,e),!0===a.sunk&&s(a.coords,e)}),500),setTimeout((function(){u(e)}),700),setTimeout((function(){c(),g.classList.add("active")}),800)}}())},players:n,anchorAShip:function(t,e){if(!a(t,e.length,e.alignment)){var r=function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",n=[],a=0;a<e;a++)"horizontal"===r?n.push([t[0],t[1]+a]):n.push([t[0]+a,t[1]]);return n}(t,e.length,e.alignment),o=n.realPlayer.board;if(!function(t,e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}(e);try{for(n.s();!(r=n.n()).done;)if(r.value.ship.getName()===t)return!0}catch(t){n.e(t)}finally{n.f()}return!1}(e.name,o.shipList)&&!o.isInIllegalCoords(r))return o.placeShip(e.length,e.name,r),r}},canStartGame:function(){return 5===n.realPlayer.board.shipList.length},isOutOfBounds:a,isGameOver:function(){return n.AI.board.areAllSunk()||n.realPlayer.board.areAllSunk()},getTurn:i}};var _=document.getElementById("ai-board"),A=document.getElementById("player-board"),S=document.getElementById("place-ship-board"),j=document.getElementById("ships-container"),w=document.querySelector("#start"),L=document.querySelector("#board-reset"),E=document.querySelector("#game-reset"),k=document.querySelector("#alignment-btn"),I=document.querySelector("#overlay"),z=document.querySelector("#board-creator"),O=document.querySelector("#gameover-display"),P=document.querySelector("#gameover-result"),x=b("test");k.addEventListener("click",(function(){var t=j.firstElementChild.dataset.alignment,e=Array.from(j.children);"horizontal"===t?(t="vertical",e.forEach((function(e){e.dataset.alignment=t,e.classList.add("vertical")}))):e.forEach((function(e){t="horizontal",e.dataset.alignment=t,e.classList.remove("vertical")}))}));w.addEventListener("click",(function(){x.canStartGame()&&(z.classList.remove("active"),I.classList.remove("active"),_.classList.add("active"),x.players.realPlayer.board.shipList.forEach((function(t){t.coordinates.forEach((function(t){A.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("anchored")}))})),x.players.AI.board.randomlyPlaceShips(),_.addEventListener("mousedown",(function(t){!x.isGameOver()&&"ai"!==x.getTurn()&&t.target.classList.contains("square")&&(x.startAttack(t),x.isGameOver()&&(x.players.AI.board.areAllSunk()?P.textContent="You won":P.textContent="AI won",O.classList.add("active"),I.classList.add("active")))})))})),j.addEventListener("dragstart",(function(t){t.target.classList.contains("ship")&&(t.dataTransfer.setData("ship-length",t.target.dataset.length),t.dataTransfer.setData("ship-name",t.target.id),t.dataTransfer.setData("ship-alignment",t.target.dataset.alignment))})),S.addEventListener("dragover",(function(t){"place-ship-board"===t.target.id||t.target.classList.contains("anchored")||(t.target.classList.add("dragover"),t.preventDefault())})),S.addEventListener("dragleave",(function(t){"place-ship-board"!==t.target.id&&(t.target.classList.remove("dragover"),t.preventDefault())})),S.addEventListener("drop",(function(t){t.target.classList.remove("dragover");var e={length:Number(t.dataTransfer.getData("ship-length")),name:t.dataTransfer.getData("ship-name"),alignment:t.dataTransfer.getData("ship-alignment")},r=[Number(t.target.dataset.x),Number(t.target.dataset.y)],n=x.anchorAShip(r,e);n&&(n.forEach((function(t){S.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("anchored")})),document.querySelector("#".concat(e.name)).classList.add("removed"))}));var T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=Array.from(e.querySelectorAll(".".concat(t)));r.forEach((function(e){return e.classList.remove(t)}))},q=function(){x=b("test"),T("anchored"),T("removed",j)};L.addEventListener("click",(function(){q()})),E.addEventListener("click",(function(){q(),T("hit"),T("missed"),T("sunk"),O.classList.remove("active"),z.classList.add("active")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi40OTZkMmM0M2YwM2NjZDU5ZGFmZi5qcyIsIm1hcHBpbmdzIjoic0JBQUEsSUFBTUEsRUFBUUMsU0FBU0MsaUJBQWlCLFNBR3RDQyxNQUFNQyxLQUFLSixHQUFPSyxTQUFRLFNBQUNDLEdBQ3pCLElBQU1DLEVBQWFDLE9BQU9GLEVBQUtHLFFBQVFDLFFBQ3ZDSixFQUFLSyxhQUFhLFlBQWEsUUFDL0JMLEVBQUtHLFFBQVFHLFVBQVksYUFDekIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlOLEVBQVlNLEdBQUssRUFBRyxDQUN0QyxJQUFNQyxFQUFZYixTQUFTYyxjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLFNBQ3hCWCxFQUFLWSxZQUFZSixFQUNuQixDQUNGLEcsMkJDRkYsSUFHSUssRUFBaUIsNEJBT2pCQyxFQUFtQixpQkFHbkJDLEVBQVUscUJBQ1ZDLEVBQVcsaUJBRVhDLEVBQVUsbUJBQ1ZDLEVBQVUsZ0JBQ1ZDLEVBQVcsaUJBQ1hDLEVBQVUsb0JBRVZDLEVBQVMsZUFDVEMsRUFBWSxrQkFFWkMsRUFBWSxrQkFDWkMsRUFBYSxtQkFFYkMsRUFBWSxrQkFDWkMsRUFBUyxlQUNUQyxFQUFZLGtCQUdaQyxFQUFhLG1CQUViQyxFQUFpQix1QkFDakJDLEVBQWMsb0JBa0JkQyxFQUFlLDhCQUdmQyxFQUFXLG1CQUdYQyxFQUFpQixDQUFDLEVBQ3RCQSxFQXhCaUIseUJBd0JZQSxFQXZCWix5QkF3QmpCQSxFQXZCYyxzQkF1QllBLEVBdEJYLHVCQXVCZkEsRUF0QmUsdUJBc0JZQSxFQXJCWix1QkFzQmZBLEVBckJzQiw4QkFxQllBLEVBcEJsQix3QkFxQmhCQSxFQXBCZ0IseUJBb0JZLEVBQzVCQSxFQUFlbEIsR0FBV2tCLEVBQWVqQixHQUN6Q2lCLEVBQWVKLEdBQWtCSSxFQUFlaEIsR0FDaERnQixFQUFlSCxHQUFlRyxFQUFlZixHQUM3Q2UsRUFBZWQsR0FBWWMsRUFBZWIsR0FDMUNhLEVBQWVaLEdBQVVZLEVBQWVYLEdBQ3hDVyxFQUFlVixHQUFhVSxFQUFlUixHQUMzQ1EsRUFBZVAsR0FBVU8sRUFBZU4sR0FDeENNLEVBQWVMLElBQWMsRUFHN0IsSUFBSU0sRUFBOEIsaUJBQVYsRUFBQUMsR0FBc0IsRUFBQUEsR0FBVSxFQUFBQSxFQUFPQyxTQUFXQSxRQUFVLEVBQUFELEVBR2hGRSxFQUEwQixpQkFBUkMsTUFBb0JBLE1BQVFBLEtBQUtGLFNBQVdBLFFBQVVFLEtBR3hFQyxFQUFPTCxHQUFjRyxHQUFZRyxTQUFTLGNBQVRBLEdBR2pDQyxFQUE0Q0MsSUFBWUEsRUFBUUMsVUFBWUQsRUFHNUVFLEVBQWFILEdBQTRDSSxJQUFXQSxFQUFPRixVQUFZRSxFQUd2RkMsRUFBZ0JGLEdBQWNBLEVBQVdGLFVBQVlELEVBR3JETSxFQUFjRCxHQUFpQlosRUFBV2MsUUFHMUNDLEVBQVksV0FDZCxJQUNFLE9BQU9GLEdBQWVBLEVBQVlHLFNBQVdILEVBQVlHLFFBQVEsT0FDdEQsQ0FBWCxNQUFPQyxHQUFJLENBQ2YsQ0FKZSxHQU9YQyxFQUFtQkgsR0FBWUEsRUFBU0ksYUF1RDVDLFNBQVNDLEVBQVVDLEVBQU9DLEdBSXhCLElBSEEsSUFBSUMsR0FBUyxFQUNUckQsRUFBa0IsTUFBVG1ELEVBQWdCLEVBQUlBLEVBQU1uRCxTQUU5QnFELEVBQVFyRCxHQUNmLEdBQUlvRCxFQUFVRCxFQUFNRSxHQUFRQSxFQUFPRixHQUNqQyxPQUFPLEVBR1gsT0FBTyxDQUNULENBaUVBLFNBQVNHLEVBQVdDLEdBQ2xCLElBQUlGLEdBQVMsRUFDVEcsRUFBUy9ELE1BQU04RCxFQUFJRSxNQUt2QixPQUhBRixFQUFJNUQsU0FBUSxTQUFTK0QsRUFBT0MsR0FDMUJILElBQVNILEdBQVMsQ0FBQ00sRUFBS0QsRUFDMUIsSUFDT0YsQ0FDVCxDQXVCQSxTQUFTSSxFQUFXQyxHQUNsQixJQUFJUixHQUFTLEVBQ1RHLEVBQVMvRCxNQUFNb0UsRUFBSUosTUFLdkIsT0FIQUksRUFBSWxFLFNBQVEsU0FBUytELEdBQ25CRixJQUFTSCxHQUFTSyxDQUNwQixJQUNPRixDQUNULENBR0EsSUFlTU0sRUF2Q1dDLEVBQU1DLEVBd0JuQkMsRUFBYXhFLE1BQU15RSxVQUNuQkMsRUFBWS9CLFNBQVM4QixVQUNyQkUsRUFBY3BDLE9BQU9rQyxVQUdyQkcsRUFBYWxDLEVBQUssc0JBR2xCbUMsRUFBZUgsRUFBVUksU0FHekJDLEVBQWlCSixFQUFZSSxlQUc3QkMsR0FDRVgsRUFBTSxTQUFTWSxLQUFLTCxHQUFjQSxFQUFXTSxNQUFRTixFQUFXTSxLQUFLQyxVQUFZLEtBQ3ZFLGlCQUFtQmQsRUFBTyxHQVF0Q2UsRUFBdUJULEVBQVlHLFNBR25DTyxFQUFhQyxPQUFPLElBQ3RCVCxFQUFhVSxLQUFLUixHQUFnQlMsUUE3UGpCLHNCQTZQdUMsUUFDdkRBLFFBQVEseURBQTBELFNBQVcsS0FJNUVDLEVBQVN4QyxFQUFnQlAsRUFBSytDLFlBQVNDLEVBQ3ZDQyxFQUFTakQsRUFBS2lELE9BQ2RDLEVBQWFsRCxFQUFLa0QsV0FDbEJDLEVBQXVCbEIsRUFBWWtCLHFCQUNuQ0MsRUFBU3RCLEVBQVdzQixPQUNwQkMsRUFBaUJKLEVBQVNBLEVBQU9LLGlCQUFjTixFQUcvQ08sR0FBbUIxRCxPQUFPMkQsc0JBQzFCQyxHQUFpQlYsRUFBU0EsRUFBT1csY0FBV1YsRUFDNUNXLElBbkVhL0IsRUFtRVEvQixPQUFPMkMsS0FuRVRYLEVBbUVlaEMsT0FsRTdCLFNBQVMrRCxHQUNkLE9BQU9oQyxFQUFLQyxFQUFVK0IsR0FDeEIsR0FtRUVDLEdBQVdDLEdBQVU5RCxFQUFNLFlBQzNCK0QsR0FBTUQsR0FBVTlELEVBQU0sT0FDdEJnRSxHQUFVRixHQUFVOUQsRUFBTSxXQUMxQmlFLEdBQU1ILEdBQVU5RCxFQUFNLE9BQ3RCa0UsR0FBVUosR0FBVTlELEVBQU0sV0FDMUJtRSxHQUFlTCxHQUFVakUsT0FBUSxVQUdqQ3VFLEdBQXFCQyxHQUFTUixJQUM5QlMsR0FBZ0JELEdBQVNOLElBQ3pCUSxHQUFvQkYsR0FBU0wsSUFDN0JRLEdBQWdCSCxHQUFTSixJQUN6QlEsR0FBb0JKLEdBQVNILElBRzdCUSxHQUFjekIsRUFBU0EsRUFBT2xCLGVBQVlpQixFQUMxQzJCLEdBQWdCRCxHQUFjQSxHQUFZRSxhQUFVNUIsRUFTeEQsU0FBUzZCLEdBQUtDLEdBQ1osSUFBSTVELEdBQVMsRUFDVHJELEVBQW9CLE1BQVhpSCxFQUFrQixFQUFJQSxFQUFRakgsT0FHM0MsSUFEQWtILEtBQUtDLFVBQ0k5RCxFQUFRckQsR0FBUSxDQUN2QixJQUFJb0gsRUFBUUgsRUFBUTVELEdBQ3BCNkQsS0FBS3JELElBQUl1RCxFQUFNLEdBQUlBLEVBQU0sR0FDM0IsQ0FDRixDQTZGQSxTQUFTQyxHQUFVSixHQUNqQixJQUFJNUQsR0FBUyxFQUNUckQsRUFBb0IsTUFBWGlILEVBQWtCLEVBQUlBLEVBQVFqSCxPQUczQyxJQURBa0gsS0FBS0MsVUFDSTlELEVBQVFyRCxHQUFRLENBQ3ZCLElBQUlvSCxFQUFRSCxFQUFRNUQsR0FDcEI2RCxLQUFLckQsSUFBSXVELEVBQU0sR0FBSUEsRUFBTSxHQUMzQixDQUNGLENBMEdBLFNBQVNFLEdBQVNMLEdBQ2hCLElBQUk1RCxHQUFTLEVBQ1RyRCxFQUFvQixNQUFYaUgsRUFBa0IsRUFBSUEsRUFBUWpILE9BRzNDLElBREFrSCxLQUFLQyxVQUNJOUQsRUFBUXJELEdBQVEsQ0FDdkIsSUFBSW9ILEVBQVFILEVBQVE1RCxHQUNwQjZELEtBQUtyRCxJQUFJdUQsRUFBTSxHQUFJQSxFQUFNLEdBQzNCLENBQ0YsQ0E2RkEsU0FBU0csR0FBU0MsR0FDaEIsSUFBSW5FLEdBQVMsRUFDVHJELEVBQW1CLE1BQVZ3SCxFQUFpQixFQUFJQSxFQUFPeEgsT0FHekMsSUFEQWtILEtBQUtPLFNBQVcsSUFBSUgsS0FDWGpFLEVBQVFyRCxHQUNma0gsS0FBSzNHLElBQUlpSCxFQUFPbkUsR0FFcEIsQ0F5Q0EsU0FBU3FFLEdBQU1ULEdBQ2IsSUFBSVUsRUFBT1QsS0FBS08sU0FBVyxJQUFJSixHQUFVSixHQUN6Q0MsS0FBS3pELEtBQU9rRSxFQUFLbEUsSUFDbkIsQ0FxSUEsU0FBU21FLEdBQWF6RSxFQUFPUSxHQUUzQixJQURBLElBQUkzRCxFQUFTbUQsRUFBTW5ELE9BQ1pBLEtBQ0wsR0FBSTZILEdBQUcxRSxFQUFNbkQsR0FBUSxHQUFJMkQsR0FDdkIsT0FBTzNELEVBR1gsT0FBUSxDQUNWLENBeUJBLFNBQVM4SCxHQUFXcEUsR0FDbEIsT0FBYSxNQUFUQSxPQUNleUIsSUFBVnpCLEVBdDFCUSxxQkFSTCxnQkFnMkJKOEIsR0FBa0JBLEtBQWtCeEQsT0FBTzBCLEdBMGFyRCxTQUFtQkEsR0FDakIsSUFBSXFFLEVBQVF2RCxFQUFlUSxLQUFLdEIsRUFBTzhCLEdBQ25Dd0MsRUFBTXRFLEVBQU04QixHQUVoQixJQUNFOUIsRUFBTThCLFFBQWtCTCxFQUN4QixJQUFJOEMsR0FBVyxDQUNKLENBQVgsTUFBT2xGLEdBQUksQ0FFYixJQUFJUyxFQUFTcUIsRUFBcUJHLEtBQUt0QixHQVF2QyxPQVBJdUUsSUFDRUYsRUFDRnJFLEVBQU04QixHQUFrQndDLFNBRWpCdEUsRUFBTThCLElBR1ZoQyxDQUNULENBM2JNMEUsQ0FBVXhFLEdBNGlCaEIsU0FBd0JBLEdBQ3RCLE9BQU9tQixFQUFxQkcsS0FBS3RCLEVBQ25DLENBN2lCTXlFLENBQWV6RSxFQUNyQixDQVNBLFNBQVMwRSxHQUFnQjFFLEdBQ3ZCLE9BQU8yRSxHQUFhM0UsSUFBVW9FLEdBQVdwRSxJQUFVL0MsQ0FDckQsQ0FnQkEsU0FBUzJILEdBQVk1RSxFQUFPNkUsRUFBT0MsRUFBU0MsRUFBWUMsR0FDdEQsT0FBSWhGLElBQVU2RSxJQUdELE1BQVQ3RSxHQUEwQixNQUFUNkUsSUFBbUJGLEdBQWEzRSxLQUFXMkUsR0FBYUUsR0FDcEU3RSxHQUFVQSxHQUFTNkUsR0FBVUEsRUFtQnhDLFNBQXlCSSxFQUFRSixFQUFPQyxFQUFTQyxFQUFZRyxFQUFXRixHQUN0RSxJQUFJRyxFQUFXQyxHQUFRSCxHQUNuQkksRUFBV0QsR0FBUVAsR0FDbkJTLEVBQVNILEVBQVdqSSxFQUFXcUksR0FBT04sR0FDdENPLEVBQVNILEVBQVduSSxFQUFXcUksR0FBT1YsR0FLdENZLEdBSEpILEVBQVNBLEdBQVVySSxFQUFVUSxFQUFZNkgsSUFHaEI3SCxFQUNyQmlJLEdBSEpGLEVBQVNBLEdBQVV2SSxFQUFVUSxFQUFZK0gsSUFHaEIvSCxFQUNyQmtJLEVBQVlMLEdBQVVFLEVBRTFCLEdBQUlHLEdBQWF4RCxHQUFTOEMsR0FBUyxDQUNqQyxJQUFLOUMsR0FBUzBDLEdBQ1osT0FBTyxFQUVUTSxHQUFXLEVBQ1hNLEdBQVcsQ0FDYixDQUNBLEdBQUlFLElBQWNGLEVBRWhCLE9BREFULElBQVVBLEVBQVEsSUFBSWhCLElBQ2RtQixHQUFZNUYsR0FBYTBGLEdBQzdCVyxHQUFZWCxFQUFRSixFQUFPQyxFQUFTQyxFQUFZRyxFQUFXRixHQWlLbkUsU0FBb0JDLEVBQVFKLEVBQU9QLEVBQUtRLEVBQVNDLEVBQVlHLEVBQVdGLEdBQ3RFLE9BQVFWLEdBQ04sS0FBS3RHLEVBQ0gsR0FBS2lILEVBQU9ZLFlBQWNoQixFQUFNZ0IsWUFDM0JaLEVBQU9hLFlBQWNqQixFQUFNaUIsV0FDOUIsT0FBTyxFQUVUYixFQUFTQSxFQUFPYyxPQUNoQmxCLEVBQVFBLEVBQU1rQixPQUVoQixLQUFLaEksRUFDSCxRQUFLa0gsRUFBT1ksWUFBY2hCLEVBQU1nQixhQUMzQlgsRUFBVSxJQUFJdkQsRUFBV3NELEdBQVMsSUFBSXRELEVBQVdrRCxLQUt4RCxLQUFLMUgsRUFDTCxLQUFLQyxFQUNMLEtBQUtJLEVBR0gsT0FBTzJHLElBQUljLEdBQVNKLEdBRXRCLEtBQUt4SCxFQUNILE9BQU80SCxFQUFPZSxNQUFRbkIsRUFBTW1CLE1BQVFmLEVBQU9nQixTQUFXcEIsRUFBTW9CLFFBRTlELEtBQUt0SSxFQUNMLEtBQUtFLEVBSUgsT0FBT29ILEdBQVdKLEVBQVEsR0FFNUIsS0FBS3RILEVBQ0gsSUFBSTJJLEVBQVV0RyxFQUVoQixLQUFLaEMsRUFDSCxJQUFJdUksRUFyb0NpQixFQXFvQ0xyQixFQUdoQixHQUZBb0IsSUFBWUEsRUFBVWhHLEdBRWxCK0UsRUFBT2xGLE1BQVE4RSxFQUFNOUUsT0FBU29HLEVBQ2hDLE9BQU8sRUFHVCxJQUFJQyxFQUFVcEIsRUFBTXFCLElBQUlwQixHQUN4QixHQUFJbUIsRUFDRixPQUFPQSxHQUFXdkIsRUFFcEJDLEdBL29DdUIsRUFrcEN2QkUsRUFBTTdFLElBQUk4RSxFQUFRSixHQUNsQixJQUFJL0UsRUFBUzhGLEdBQVlNLEVBQVFqQixHQUFTaUIsRUFBUXJCLEdBQVFDLEVBQVNDLEVBQVlHLEVBQVdGLEdBRTFGLE9BREFBLEVBQWMsT0FBRUMsR0FDVG5GLEVBRVQsSUFob0NZLGtCQWlvQ1YsR0FBSXNELEdBQ0YsT0FBT0EsR0FBYzlCLEtBQUsyRCxJQUFXN0IsR0FBYzlCLEtBQUt1RCxHQUc5RCxPQUFPLENBQ1QsQ0EvTlF5QixDQUFXckIsRUFBUUosRUFBT1MsRUFBUVIsRUFBU0MsRUFBWUcsRUFBV0YsR0FFeEUsS0FqOEJ5QixFQWk4Qm5CRixHQUFpQyxDQUNyQyxJQUFJeUIsRUFBZWQsR0FBWTNFLEVBQWVRLEtBQUsyRCxFQUFRLGVBQ3ZEdUIsRUFBZWQsR0FBWTVFLEVBQWVRLEtBQUt1RCxFQUFPLGVBRTFELEdBQUkwQixHQUFnQkMsRUFBYyxDQUNoQyxJQUFJQyxFQUFlRixFQUFldEIsRUFBT2pGLFFBQVVpRixFQUMvQ3lCLEVBQWVGLEVBQWUzQixFQUFNN0UsUUFBVTZFLEVBR2xELE9BREFHLElBQVVBLEVBQVEsSUFBSWhCLElBQ2ZrQixFQUFVdUIsRUFBY0MsRUFBYzVCLEVBQVNDLEVBQVlDLEVBQ3BFLENBQ0YsQ0FDQSxRQUFLVyxJQUdMWCxJQUFVQSxFQUFRLElBQUloQixJQTZOeEIsU0FBc0JpQixFQUFRSixFQUFPQyxFQUFTQyxFQUFZRyxFQUFXRixHQUNuRSxJQUFJbUIsRUE5cUNxQixFQThxQ1RyQixFQUNaNkIsRUFBV0MsR0FBVzNCLEdBQ3RCNEIsRUFBWUYsRUFBU3JLLE9BSXpCLEdBQUl1SyxHQUhXRCxHQUFXL0IsR0FDRHZJLFNBRU02SixFQUM3QixPQUFPLEVBR1QsSUFEQSxJQUFJeEcsRUFBUWtILEVBQ0xsSCxLQUFTLENBQ2QsSUFBSU0sRUFBTTBHLEVBQVNoSCxHQUNuQixLQUFNd0csRUFBWWxHLEtBQU80RSxFQUFRL0QsRUFBZVEsS0FBS3VELEVBQU81RSxJQUMxRCxPQUFPLENBRVgsQ0FFQSxJQUFJbUcsRUFBVXBCLEVBQU1xQixJQUFJcEIsR0FDeEIsR0FBSW1CLEdBQVdwQixFQUFNcUIsSUFBSXhCLEdBQ3ZCLE9BQU91QixHQUFXdkIsRUFFcEIsSUFBSS9FLEdBQVMsRUFDYmtGLEVBQU03RSxJQUFJOEUsRUFBUUosR0FDbEJHLEVBQU03RSxJQUFJMEUsRUFBT0ksR0FHakIsSUFEQSxJQUFJNkIsRUFBV1gsSUFDTnhHLEVBQVFrSCxHQUFXLENBRTFCLElBQUlFLEVBQVc5QixFQURmaEYsRUFBTTBHLEVBQVNoSCxJQUVYcUgsRUFBV25DLEVBQU01RSxHQUVyQixHQUFJOEUsRUFDRixJQUFJa0MsRUFBV2QsRUFDWHBCLEVBQVdpQyxFQUFVRCxFQUFVOUcsRUFBSzRFLEVBQU9JLEVBQVFELEdBQ25ERCxFQUFXZ0MsRUFBVUMsRUFBVS9HLEVBQUtnRixFQUFRSixFQUFPRyxHQUd6RCxVQUFtQnZELElBQWJ3RixFQUNHRixJQUFhQyxHQUFZOUIsRUFBVTZCLEVBQVVDLEVBQVVsQyxFQUFTQyxFQUFZQyxHQUM3RWlDLEdBQ0QsQ0FDTG5ILEdBQVMsRUFDVCxLQUNGLENBQ0FnSCxJQUFhQSxFQUFrQixlQUFQN0csRUFDMUIsQ0FDQSxHQUFJSCxJQUFXZ0gsRUFBVSxDQUN2QixJQUFJSSxFQUFVakMsRUFBT2tDLFlBQ2pCQyxFQUFVdkMsRUFBTXNDLFlBR2hCRCxHQUFXRSxLQUNWLGdCQUFpQm5DLE1BQVUsZ0JBQWlCSixJQUN6QixtQkFBWHFDLEdBQXlCQSxhQUFtQkEsR0FDakMsbUJBQVhFLEdBQXlCQSxhQUFtQkEsSUFDdkR0SCxHQUFTLEVBRWIsQ0FHQSxPQUZBa0YsRUFBYyxPQUFFQyxHQUNoQkQsRUFBYyxPQUFFSCxHQUNUL0UsQ0FDVCxDQTFSU3VILENBQWFwQyxFQUFRSixFQUFPQyxFQUFTQyxFQUFZRyxFQUFXRixHQUNyRSxDQTVEU3NDLENBQWdCdEgsRUFBTzZFLEVBQU9DLEVBQVNDLEVBQVlILEdBQWFJLEdBQ3pFLENBMEhBLFNBQVNZLEdBQVluRyxFQUFPb0YsRUFBT0MsRUFBU0MsRUFBWUcsRUFBV0YsR0FDakUsSUFBSW1CLEVBbGhDcUIsRUFraENUckIsRUFDWnlDLEVBQVk5SCxFQUFNbkQsT0FDbEJrTCxFQUFZM0MsRUFBTXZJLE9BRXRCLEdBQUlpTCxHQUFhQyxLQUFlckIsR0FBYXFCLEVBQVlELEdBQ3ZELE9BQU8sRUFHVCxJQUFJbkIsRUFBVXBCLEVBQU1xQixJQUFJNUcsR0FDeEIsR0FBSTJHLEdBQVdwQixFQUFNcUIsSUFBSXhCLEdBQ3ZCLE9BQU91QixHQUFXdkIsRUFFcEIsSUFBSWxGLEdBQVMsRUFDVEcsR0FBUyxFQUNUMkgsRUEvaEN1QixFQStoQ2YzQyxFQUFvQyxJQUFJakIsUUFBV3BDLEVBTS9ELElBSkF1RCxFQUFNN0UsSUFBSVYsRUFBT29GLEdBQ2pCRyxFQUFNN0UsSUFBSTBFLEVBQU9wRixLQUdSRSxFQUFRNEgsR0FBVyxDQUMxQixJQUFJRyxFQUFXakksRUFBTUUsR0FDakJxSCxFQUFXbkMsRUFBTWxGLEdBRXJCLEdBQUlvRixFQUNGLElBQUlrQyxFQUFXZCxFQUNYcEIsRUFBV2lDLEVBQVVVLEVBQVUvSCxFQUFPa0YsRUFBT3BGLEVBQU91RixHQUNwREQsRUFBVzJDLEVBQVVWLEVBQVVySCxFQUFPRixFQUFPb0YsRUFBT0csR0FFMUQsUUFBaUJ2RCxJQUFid0YsRUFBd0IsQ0FDMUIsR0FBSUEsRUFDRixTQUVGbkgsR0FBUyxFQUNULEtBQ0YsQ0FFQSxHQUFJMkgsR0FDRixJQUFLakksRUFBVXFGLEdBQU8sU0FBU21DLEVBQVVXLEdBQ25DLEdBNzJCYTFILEVBNjJCTzBILEdBQU5GLEVBNTJCWEcsSUFBSTNILEtBNjJCRnlILElBQWFWLEdBQVk5QixFQUFVd0MsRUFBVVYsRUFBVWxDLEVBQVNDLEVBQVlDLElBQy9FLE9BQU95QyxFQUFLSSxLQUFLRixHQS8yQi9CLElBQXlCMUgsQ0FpM0JmLElBQUksQ0FDTkgsR0FBUyxFQUNULEtBQ0YsT0FDSyxHQUNENEgsSUFBYVYsSUFDWDlCLEVBQVV3QyxFQUFVVixFQUFVbEMsRUFBU0MsRUFBWUMsR0FDcEQsQ0FDTGxGLEdBQVMsRUFDVCxLQUNGLENBQ0YsQ0FHQSxPQUZBa0YsRUFBYyxPQUFFdkYsR0FDaEJ1RixFQUFjLE9BQUVILEdBQ1QvRSxDQUNULENBd0tBLFNBQVM4RyxHQUFXM0IsR0FDbEIsT0FwWkYsU0FBd0JBLEVBQVE2QyxFQUFVQyxHQUN4QyxJQUFJakksRUFBU2dJLEVBQVM3QyxHQUN0QixPQUFPRyxHQUFRSCxHQUFVbkYsRUFodUIzQixTQUFtQkwsRUFBT3FFLEdBS3hCLElBSkEsSUFBSW5FLEdBQVMsRUFDVHJELEVBQVN3SCxFQUFPeEgsT0FDaEIwTCxFQUFTdkksRUFBTW5ELFNBRVZxRCxFQUFRckQsR0FDZm1ELEVBQU11SSxFQUFTckksR0FBU21FLEVBQU9uRSxHQUVqQyxPQUFPRixDQUNULENBdXRCb0N3SSxDQUFVbkksRUFBUWlJLEVBQVk5QyxHQUNsRSxDQWlaU2lELENBQWVqRCxFQUFRaEUsR0FBTWtILEdBQ3RDLENBVUEsU0FBU0MsR0FBV3ZJLEVBQUtJLEdBQ3ZCLElBc0hpQkQsRUFDYnFJLEVBdkhBcEUsRUFBT3BFLEVBQUlrRSxTQUNmLE9BdUhnQixXQURac0UsU0FEYXJJLEVBckhBQyxLQXVIbUIsVUFBUm9JLEdBQTRCLFVBQVJBLEdBQTRCLFdBQVJBLEVBQ3JELGNBQVZySSxFQUNVLE9BQVZBLEdBeEhEaUUsRUFBbUIsaUJBQVBoRSxFQUFrQixTQUFXLFFBQ3pDZ0UsRUFBS3BFLEdBQ1gsQ0FVQSxTQUFTMEMsR0FBVTBDLEVBQVFoRixHQUN6QixJQUFJRCxFQXhqQ04sU0FBa0JpRixFQUFRaEYsR0FDeEIsT0FBaUIsTUFBVmdGLE9BQWlCeEQsRUFBWXdELEVBQU9oRixFQUM3QyxDQXNqQ2NxSSxDQUFTckQsRUFBUWhGLEdBQzdCLE9BclRGLFNBQXNCRCxHQUNwQixTQUFLdUksR0FBU3ZJLElBd2FoQixTQUFrQkssR0FDaEIsUUFBU1UsR0FBZUEsS0FBY1YsQ0FDeEMsQ0ExYTBCbUksQ0FBU3hJLE1BR25CeUksR0FBV3pJLEdBQVNvQixFQUFhbkQsR0FDaEN5SyxLQUFLNUYsR0FBUzlDLEdBQy9CLENBK1NTMkksQ0FBYTNJLEdBQVNBLE9BQVF5QixDQUN2QyxDQXIyQkE2QixHQUFLOUMsVUFBVWlELE1BdkVmLFdBQ0VELEtBQUtPLFNBQVduQixHQUFlQSxHQUFhLE1BQVEsQ0FBQyxFQUNyRFksS0FBS3pELEtBQU8sQ0FDZCxFQXFFQXVELEdBQUs5QyxVQUFrQixPQXpEdkIsU0FBb0JQLEdBQ2xCLElBQUlILEVBQVMwRCxLQUFLb0UsSUFBSTNILFdBQWV1RCxLQUFLTyxTQUFTOUQsR0FFbkQsT0FEQXVELEtBQUt6RCxNQUFRRCxFQUFTLEVBQUksRUFDbkJBLENBQ1QsRUFzREF3RCxHQUFLOUMsVUFBVTZGLElBM0NmLFNBQWlCcEcsR0FDZixJQUFJZ0UsRUFBT1QsS0FBS08sU0FDaEIsR0FBSW5CLEdBQWMsQ0FDaEIsSUFBSTlDLEVBQVNtRSxFQUFLaEUsR0FDbEIsT0FBT0gsSUFBVy9DLE9BQWlCMEUsRUFBWTNCLENBQ2pELENBQ0EsT0FBT2dCLEVBQWVRLEtBQUsyQyxFQUFNaEUsR0FBT2dFLEVBQUtoRSxRQUFPd0IsQ0FDdEQsRUFxQ0E2QixHQUFLOUMsVUFBVW9ILElBMUJmLFNBQWlCM0gsR0FDZixJQUFJZ0UsRUFBT1QsS0FBS08sU0FDaEIsT0FBT25CLFFBQThCbkIsSUFBZHdDLEVBQUtoRSxHQUFzQmEsRUFBZVEsS0FBSzJDLEVBQU1oRSxFQUM5RSxFQXdCQXFELEdBQUs5QyxVQUFVTCxJQVpmLFNBQWlCRixFQUFLRCxHQUNwQixJQUFJaUUsRUFBT1QsS0FBS08sU0FHaEIsT0FGQVAsS0FBS3pELE1BQVF5RCxLQUFLb0UsSUFBSTNILEdBQU8sRUFBSSxFQUNqQ2dFLEVBQUtoRSxHQUFRMkMsU0FBMEJuQixJQUFWekIsRUFBdUJqRCxFQUFpQmlELEVBQzlEd0QsSUFDVCxFQXNIQUcsR0FBVW5ELFVBQVVpRCxNQXBGcEIsV0FDRUQsS0FBS08sU0FBVyxHQUNoQlAsS0FBS3pELEtBQU8sQ0FDZCxFQWtGQTRELEdBQVVuRCxVQUFrQixPQXZFNUIsU0FBeUJQLEdBQ3ZCLElBQUlnRSxFQUFPVCxLQUFLTyxTQUNacEUsRUFBUXVFLEdBQWFELEVBQU1oRSxHQUUvQixRQUFJTixFQUFRLElBSVJBLEdBRFlzRSxFQUFLM0gsT0FBUyxFQUU1QjJILEVBQUsyRSxNQUVML0csRUFBT1AsS0FBSzJDLEVBQU10RSxFQUFPLEtBRXpCNkQsS0FBS3pELEtBQ0EsR0FDVCxFQXlEQTRELEdBQVVuRCxVQUFVNkYsSUE5Q3BCLFNBQXNCcEcsR0FDcEIsSUFBSWdFLEVBQU9ULEtBQUtPLFNBQ1pwRSxFQUFRdUUsR0FBYUQsRUFBTWhFLEdBRS9CLE9BQU9OLEVBQVEsT0FBSThCLEVBQVl3QyxFQUFLdEUsR0FBTyxFQUM3QyxFQTBDQWdFLEdBQVVuRCxVQUFVb0gsSUEvQnBCLFNBQXNCM0gsR0FDcEIsT0FBT2lFLEdBQWFWLEtBQUtPLFNBQVU5RCxJQUFRLENBQzdDLEVBOEJBMEQsR0FBVW5ELFVBQVVMLElBbEJwQixTQUFzQkYsRUFBS0QsR0FDekIsSUFBSWlFLEVBQU9ULEtBQUtPLFNBQ1pwRSxFQUFRdUUsR0FBYUQsRUFBTWhFLEdBUS9CLE9BTklOLEVBQVEsS0FDUjZELEtBQUt6RCxLQUNQa0UsRUFBSzRELEtBQUssQ0FBQzVILEVBQUtELEtBRWhCaUUsRUFBS3RFLEdBQU8sR0FBS0ssRUFFWndELElBQ1QsRUF3R0FJLEdBQVNwRCxVQUFVaUQsTUF0RW5CLFdBQ0VELEtBQUt6RCxLQUFPLEVBQ1p5RCxLQUFLTyxTQUFXLENBQ2QsS0FBUSxJQUFJVCxHQUNaLElBQU8sSUFBS2QsSUFBT21CLElBQ25CLE9BQVUsSUFBSUwsR0FFbEIsRUFnRUFNLEdBQVNwRCxVQUFrQixPQXJEM0IsU0FBd0JQLEdBQ3RCLElBQUlILEVBQVNzSSxHQUFXNUUsS0FBTXZELEdBQWEsT0FBRUEsR0FFN0MsT0FEQXVELEtBQUt6RCxNQUFRRCxFQUFTLEVBQUksRUFDbkJBLENBQ1QsRUFrREE4RCxHQUFTcEQsVUFBVTZGLElBdkNuQixTQUFxQnBHLEdBQ25CLE9BQU9tSSxHQUFXNUUsS0FBTXZELEdBQUtvRyxJQUFJcEcsRUFDbkMsRUFzQ0EyRCxHQUFTcEQsVUFBVW9ILElBM0JuQixTQUFxQjNILEdBQ25CLE9BQU9tSSxHQUFXNUUsS0FBTXZELEdBQUsySCxJQUFJM0gsRUFDbkMsRUEwQkEyRCxHQUFTcEQsVUFBVUwsSUFkbkIsU0FBcUJGLEVBQUtELEdBQ3hCLElBQUlpRSxFQUFPbUUsR0FBVzVFLEtBQU12RCxHQUN4QkYsRUFBT2tFLEVBQUtsRSxLQUloQixPQUZBa0UsRUFBSzlELElBQUlGLEVBQUtELEdBQ2R3RCxLQUFLekQsTUFBUWtFLEVBQUtsRSxNQUFRQSxFQUFPLEVBQUksRUFDOUJ5RCxJQUNULEVBd0RBSyxHQUFTckQsVUFBVTNELElBQU1nSCxHQUFTckQsVUFBVXFILEtBbkI1QyxTQUFxQjdILEdBRW5CLE9BREF3RCxLQUFLTyxTQUFTNUQsSUFBSUgsRUFBT2pELEdBQ2xCeUcsSUFDVCxFQWlCQUssR0FBU3JELFVBQVVvSCxJQU5uQixTQUFxQjVILEdBQ25CLE9BQU93RCxLQUFLTyxTQUFTNkQsSUFBSTVILEVBQzNCLEVBb0dBZ0UsR0FBTXhELFVBQVVpRCxNQTNFaEIsV0FDRUQsS0FBS08sU0FBVyxJQUFJSixHQUNwQkgsS0FBS3pELEtBQU8sQ0FDZCxFQXlFQWlFLEdBQU14RCxVQUFrQixPQTlEeEIsU0FBcUJQLEdBQ25CLElBQUlnRSxFQUFPVCxLQUFLTyxTQUNaakUsRUFBU21FLEVBQWEsT0FBRWhFLEdBRzVCLE9BREF1RCxLQUFLekQsS0FBT2tFLEVBQUtsRSxLQUNWRCxDQUNULEVBeURBa0UsR0FBTXhELFVBQVU2RixJQTlDaEIsU0FBa0JwRyxHQUNoQixPQUFPdUQsS0FBS08sU0FBU3NDLElBQUlwRyxFQUMzQixFQTZDQStELEdBQU14RCxVQUFVb0gsSUFsQ2hCLFNBQWtCM0gsR0FDaEIsT0FBT3VELEtBQUtPLFNBQVM2RCxJQUFJM0gsRUFDM0IsRUFpQ0ErRCxHQUFNeEQsVUFBVUwsSUFyQmhCLFNBQWtCRixFQUFLRCxHQUNyQixJQUFJaUUsRUFBT1QsS0FBS08sU0FDaEIsR0FBSUUsYUFBZ0JOLEdBQVcsQ0FDN0IsSUFBSWtGLEVBQVE1RSxFQUFLRixTQUNqQixJQUFLdkIsSUFBUXFHLEVBQU12TSxPQUFTd00sSUFHMUIsT0FGQUQsRUFBTWhCLEtBQUssQ0FBQzVILEVBQUtELElBQ2pCd0QsS0FBS3pELE9BQVNrRSxFQUFLbEUsS0FDWnlELEtBRVRTLEVBQU9ULEtBQUtPLFNBQVcsSUFBSUgsR0FBU2lGLEVBQ3RDLENBR0EsT0FGQTVFLEVBQUs5RCxJQUFJRixFQUFLRCxHQUNkd0QsS0FBS3pELEtBQU9rRSxFQUFLbEUsS0FDVnlELElBQ1QsRUE4aEJBLElBQUkyRSxHQUFjbkcsR0FBK0IsU0FBU2lELEdBQ3hELE9BQWMsTUFBVkEsRUFDSyxJQUVUQSxFQUFTM0csT0FBTzJHLEdBOXNDbEIsU0FBcUJ4RixFQUFPQyxHQU0xQixJQUxBLElBQUlDLEdBQVMsRUFDVHJELEVBQWtCLE1BQVRtRCxFQUFnQixFQUFJQSxFQUFNbkQsT0FDbkN5TSxFQUFXLEVBQ1hqSixFQUFTLEtBRUpILEVBQVFyRCxHQUFRLENBQ3ZCLElBQUkwRCxFQUFRUCxFQUFNRSxHQXdzQ2tDcUosRUF2c0N0Q2hKLEVBd3NDUDRCLEVBQXFCTixLQUFLMkQsRUFBUStELEtBdnNDdkNsSixFQUFPaUosS0FBYy9JLEVBRXpCLENBb3NDNkMsSUFBU2dKLEVBbnNDdEQsT0FBT2xKLENBQ1QsQ0Frc0NTbUosQ0FBWWpILEdBQWlCaUQsSUFHdEMsRUFvZEEsV0FDRSxNQUFPLEVBQ1QsRUE3Y0lNLEdBQVNuQixHQWtDYixTQUFTOEUsR0FBUWxKLEVBQU8xRCxHQUV0QixTQURBQSxFQUFtQixNQUFWQSxFQUFpQlUsRUFBbUJWLEtBRTFCLGlCQUFUMEQsR0FBcUI5QixFQUFTd0ssS0FBSzFJLEtBQzFDQSxHQUFTLEdBQUtBLEVBQVEsR0FBSyxHQUFLQSxFQUFRMUQsQ0FDN0MsQ0EyREEsU0FBU3dHLEdBQVN6QyxHQUNoQixHQUFZLE1BQVJBLEVBQWMsQ0FDaEIsSUFDRSxPQUFPTyxFQUFhVSxLQUFLakIsRUFDZCxDQUFYLE1BQU9oQixHQUFJLENBQ2IsSUFDRSxPQUFRZ0IsRUFBTyxFQUNKLENBQVgsTUFBT2hCLEdBQUksQ0FDZixDQUNBLE1BQU8sRUFDVCxDQWtDQSxTQUFTOEUsR0FBR25FLEVBQU82RSxHQUNqQixPQUFPN0UsSUFBVTZFLEdBQVU3RSxHQUFVQSxHQUFTNkUsR0FBVUEsQ0FDMUQsRUE3SUt2QyxJQUFZaUQsR0FBTyxJQUFJakQsR0FBUyxJQUFJNkcsWUFBWSxNQUFRbkwsR0FDeER3RSxJQUFPK0MsR0FBTyxJQUFJL0MsS0FBUWpGLEdBQzFCa0YsSUFBVzhDLEdBQU85QyxHQUFRMkcsWUFBYzFMLEdBQ3hDZ0YsSUFBTzZDLEdBQU8sSUFBSTdDLEtBQVE5RSxHQUMxQitFLElBQVc0QyxHQUFPLElBQUk1QyxLQUFZN0UsS0FDckN5SCxHQUFTLFNBQVN2RixHQUNoQixJQUFJRixFQUFTc0UsR0FBV3BFLEdBQ3BCcUosRUFBT3ZKLEdBQVVyQyxFQUFZdUMsRUFBTW1ILGlCQUFjMUYsRUFDakQ2SCxFQUFhRCxFQUFPdkcsR0FBU3VHLEdBQVEsR0FFekMsR0FBSUMsRUFDRixPQUFRQSxHQUNOLEtBQUt6RyxHQUFvQixPQUFPN0UsRUFDaEMsS0FBSytFLEdBQWUsT0FBT3hGLEVBQzNCLEtBQUt5RixHQUFtQixPQUFPdEYsRUFDL0IsS0FBS3VGLEdBQWUsT0FBT3JGLEVBQzNCLEtBQUtzRixHQUFtQixPQUFPcEYsRUFHbkMsT0FBT2dDLENBQ1QsR0E2SUYsSUFBSXlKLEdBQWM3RSxHQUFnQixXQUFhLE9BQU84RSxTQUFXLENBQS9CLElBQXNDOUUsR0FBa0IsU0FBUzFFLEdBQ2pHLE9BQU8yRSxHQUFhM0UsSUFBVWMsRUFBZVEsS0FBS3RCLEVBQU8sWUFDdEQ0QixFQUFxQk4sS0FBS3RCLEVBQU8sU0FDdEMsRUF5QklvRixHQUFVckosTUFBTXFKLFFBZ0RoQmpELEdBQVdELElBNE9mLFdBQ0UsT0FBTyxDQUNULEVBM0xBLFNBQVN1RyxHQUFXekksR0FDbEIsSUFBS3VJLEdBQVN2SSxHQUNaLE9BQU8sRUFJVCxJQUFJc0UsRUFBTUYsR0FBV3BFLEdBQ3JCLE9BQU9zRSxHQUFPaEgsR0FubURILDhCQW1tRGNnSCxHQXhtRFosMEJBd21ENkJBLEdBN2xEN0Isa0JBNmxEZ0RBLENBQy9ELENBNEJBLFNBQVNtRixHQUFTekosR0FDaEIsTUFBdUIsaUJBQVRBLEdBQ1pBLEdBQVMsR0FBS0EsRUFBUSxHQUFLLEdBQUtBLEdBQVNoRCxDQUM3QyxDQTJCQSxTQUFTdUwsR0FBU3ZJLEdBQ2hCLElBQUlxSSxTQUFjckksRUFDbEIsT0FBZ0IsTUFBVEEsSUFBMEIsVUFBUnFJLEdBQTRCLFlBQVJBLEVBQy9DLENBMEJBLFNBQVMxRCxHQUFhM0UsR0FDcEIsT0FBZ0IsTUFBVEEsR0FBaUMsaUJBQVRBLENBQ2pDLENBbUJBLElBQUlULEdBQWVELEVBaGlEbkIsU0FBbUJlLEdBQ2pCLE9BQU8sU0FBU0wsR0FDZCxPQUFPSyxFQUFLTCxFQUNkLENBQ0YsQ0E0aERzQzBKLENBQVVwSyxHQW52QmhELFNBQTBCVSxHQUN4QixPQUFPMkUsR0FBYTNFLElBQ2xCeUosR0FBU3pKLEVBQU0xRCxXQUFhNkIsRUFBZWlHLEdBQVdwRSxHQUMxRCxFQTh3QkEsU0FBU2lCLEdBQUtnRSxHQUNaLE9BMU5nQixPQURHakYsRUEyTkFpRixJQTFOS3dFLEdBQVN6SixFQUFNMUQsVUFBWW1NLEdBQVd6SSxHQTF2QmhFLFNBQXVCQSxFQUFPMkosR0FDNUIsSUFBSUMsRUFBUXhFLEdBQVFwRixHQUNoQjZKLEdBQVNELEdBQVNMLEdBQVl2SixHQUM5QjhKLEdBQVVGLElBQVVDLEdBQVMxSCxHQUFTbkMsR0FDdEMrSixHQUFVSCxJQUFVQyxJQUFVQyxHQUFVdkssR0FBYVMsR0FDckRnSyxFQUFjSixHQUFTQyxHQUFTQyxHQUFVQyxFQUMxQ2pLLEVBQVNrSyxFQWxvQmYsU0FBbUJDLEVBQUdDLEdBSXBCLElBSEEsSUFBSXZLLEdBQVMsRUFDVEcsRUFBUy9ELE1BQU1rTyxLQUVWdEssRUFBUXNLLEdBQ2ZuSyxFQUFPSCxHQUFTdUssRUFBU3ZLLEdBRTNCLE9BQU9HLENBQ1QsQ0EwbkI2QnFLLENBQVVuSyxFQUFNMUQsT0FBUThOLFFBQVUsR0FDekQ5TixFQUFTd0QsRUFBT3hELE9BRXBCLElBQUssSUFBSTJELEtBQU9ELEdBQ1QySixJQUFhN0ksRUFBZVEsS0FBS3RCLEVBQU9DLElBQ3ZDK0osSUFFUSxVQUFQL0osR0FFQzZKLElBQWtCLFVBQVA3SixHQUEwQixVQUFQQSxJQUU5QjhKLElBQWtCLFVBQVA5SixHQUEwQixjQUFQQSxHQUE4QixjQUFQQSxJQUV0RGlKLEdBQVFqSixFQUFLM0QsS0FFbEJ3RCxFQUFPK0gsS0FBSzVILEdBR2hCLE9BQU9ILENBQ1QsQ0EyN0IrQnVLLENBQWNwRixHQXR3QjdDLFNBQWtCQSxHQUNoQixHQXlaSW9FLEdBRGVySixFQXhaRmlGLElBeVpHakYsRUFBTW1ILFlBR25CbkgsS0FGcUIsbUJBQVJxSixHQUFzQkEsRUFBSzdJLFdBQWNFLEdBelozRCxPQUFPMEIsR0FBVzZDLEdBdVp0QixJQUFxQmpGLEVBQ2ZxSixFQXRaQXZKLEVBQVMsR0FDYixJQUFLLElBQUlHLEtBQU8zQixPQUFPMkcsR0FDakJuRSxFQUFlUSxLQUFLMkQsRUFBUWhGLElBQWUsZUFBUEEsR0FDdENILEVBQU8rSCxLQUFLNUgsR0FHaEIsT0FBT0gsQ0FDVCxDQTJ2QnVEd0ssQ0FBU3JGLEdBM05oRSxJQUFxQmpGLENBNE5yQixDQXlDQWpCLEVBQU9ILFFBbE5QLFNBQWlCb0IsRUFBTzZFLEdBQ3RCLE9BQU9ELEdBQVk1RSxFQUFPNkUsRUFDNUIsQyxHQ3RtREkwRixFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJoSixJQUFqQmlKLEVBQ0gsT0FBT0EsRUFBYTlMLFFBR3JCLElBQUlHLEVBQVN3TCxFQUF5QkUsR0FBWSxDQUNqREUsR0FBSUYsRUFDSkcsUUFBUSxFQUNSaE0sUUFBUyxDQUFDLEdBVVgsT0FOQWlNLEVBQW9CSixHQUFVMUwsRUFBUUEsRUFBT0gsUUFBUzRMLEdBR3REekwsRUFBTzZMLFFBQVMsRUFHVDdMLEVBQU9ILE9BQ2YsQ0N4QkE0TCxFQUFvQlAsRUFBS2xMLElBQ3hCLElBQUkrTCxFQUFTL0wsR0FBVUEsRUFBT2dNLFdBQzdCLElBQU9oTSxFQUFpQixRQUN4QixJQUFNLEVBRVAsT0FEQXlMLEVBQW9CUSxFQUFFRixFQUFRLENBQUVHLEVBQUdILElBQzVCQSxDQUFNLEVDTGROLEVBQW9CUSxFQUFJLENBQUNwTSxFQUFTc00sS0FDakMsSUFBSSxJQUFJakwsS0FBT2lMLEVBQ1hWLEVBQW9CVyxFQUFFRCxFQUFZakwsS0FBU3VLLEVBQW9CVyxFQUFFdk0sRUFBU3FCLElBQzVFM0IsT0FBTzhNLGVBQWV4TSxFQUFTcUIsRUFBSyxDQUFFb0wsWUFBWSxFQUFNaEYsSUFBSzZFLEVBQVdqTCxJQUUxRSxFQ05EdUssRUFBb0JuTSxFQUFJLFdBQ3ZCLEdBQTBCLGlCQUFmaU4sV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPOUgsTUFBUSxJQUFJOUUsU0FBUyxjQUFiLEVBR2hCLENBRkUsTUFBT1csR0FDUixHQUFzQixpQkFBWGtNLE9BQXFCLE9BQU9BLE1BQ3hDLENBQ0EsQ0FQdUIsR0NBeEJmLEVBQW9CVyxFQUFJLENBQUNLLEVBQUtDLElBQVVuTixPQUFPa0MsVUFBVU0sZUFBZVEsS0FBS2tLLEVBQUtDLEdDQWxGakIsRUFBb0JrQixJQUFPM00sSUFDMUJBLEVBQU80TSxNQUFRLEdBQ1Y1TSxFQUFPNk0sV0FBVTdNLEVBQU82TSxTQUFXLElBQ2pDN00sRyxtQkNpQlIsUUFwQjZCLFdBRzNCLElBRkEsSUFBTThNLEVBQVUsR0FFUHBQLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUV0QixJQURBLElBQU1xUCxFQUFjclAsRUFDWHNQLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUFLLENBQzNCLElBQU1DLEVBQWNELEVBQ3BCRixFQUFRaEUsS0FBSyxDQUFDaUUsRUFBYUUsR0FDN0IsQ0FFRixPQUFPSCxDQUNULENBRXdCSSxHQ1h4QixJQUFNQyxFQUFjclEsU0FBU3NRLGVBQWUsZ0JBQ3RDQyxFQUFVdlEsU0FBU3NRLGVBQWUsWUFDbENFLEVBQW9CeFEsU0FBU3NRLGVBQWUsb0JBZ0JyQ0csRUFiQ3JRLFNBQVEsU0FBQ3NRLEdBQ25CLElBQU1DLEVBQVMzUSxTQUFTYyxjQUFjLE9BQ3RDNlAsRUFBTzVQLFVBQVVDLElBQUksVUFDckIyUCxFQUFPblEsUUFBUW9RLEVBQUlGLEVBQVcsR0FDOUJDLEVBQU9uUSxRQUFRcVEsRUFBSUgsRUFBVyxHQUM5QkwsRUFBWXBQLFlBQVkwUCxHQUN4QixJQUFNRyxFQUFlSCxFQUFPSSxZQUM1QlIsRUFBUXRQLFlBQVk2UCxHQUNwQixJQUFNRSxFQUFlTCxFQUFPSSxZQUM1QlAsRUFBa0J2UCxZQUFZK1AsRUFDaEMsSSw2QkNIRixRQWRhLFNBQUN2USxFQUFRMEosR0FDcEIsSUFFSThHLEVBQVksRUFRaEIsTUFBTyxDQUFFQyxVQVZTLFdBQUgsT0FBU3pRLENBQU0sRUFVVjBRLFFBVEosV0FBSCxPQUFTaEgsQ0FBSSxFQVNHaUgsSUFQakIsV0FDVkgsR0FBYSxDQUNmLEVBS2tDSSxhQUpiLFdBQUgsT0FBU0osQ0FBUyxFQUlZSyxPQUZqQyxXQUFILE9BQVNMLEdBQWF4USxDQUFNLEVBRzFDLEVDWEUsSUFBTThRLEVBQWtCLENBQ3RCLENBQUMsR0FBSSxHQUNMLEVBQUUsR0FBSSxHQUNOLENBQUMsR0FBSSxHQUNMLEVBQUUsRUFBRyxHQUNMLENBQUMsRUFBRyxHQUNKLENBQUMsRUFBRyxHQUNKLEVBQUUsRUFBRyxHQUNMLENBQUMsRUFBRyxJQUdGQyxFQUFZLENBQ2hCLENBQ0VySCxLQUFNLFlBQ04xSixPQUFRLEdBRVYsQ0FDRTBKLEtBQU0sWUFDTjFKLE9BQVEsR0FFVixDQUNFMEosS0FBTSxVQUNOMUosT0FBUSxHQUVWLENBQ0UwSixLQUFNLGFBQ04xSixPQUFRLEdBRVYsQ0FDRTBKLEtBQU0sVUFDTjFKLE9BQVEsSSwwZ0NDd0laLFFBaktrQixXQUNoQixJLEVBQU1nUixFLCtDQUFZaEIsSSxxU0FDWmlCLEVBQVcsR0FDWEMsRUFBYyxJQUFJOUssSUFDbEIrSyxFQUFvQixJQUFJL0ssSUFFeEJnTCxFQUFjLFNBQUNqTyxFQUFPa08sR0FBTyxPQUNqQ2xPLEVBQU1tTyxNQUFLLFNBQUNDLEdBQUUsT0FBS0MsSUFBUUQsRUFBSUYsRUFBUSxHQUFDLEVBRXBDSSxFQUF1QixTQUMzQkMsR0FHRyxJQUZIQyxFQUFzQixVQUFILDZDQUFHYixFQUN0QmMsRUFBYSxVQUFILDZDQUFHVCxFQUViTyxFQUFZL1IsU0FBUSxTQUFDa1MsR0FDbkIsSUFBSyxJQUFJMVIsRUFBSSxFQUFHQSxFQUFJd1IsRUFBb0IzUixPQUFRRyxJQUFLLENBQ25ELElBQU0yUixFQUFpQkgsRUFBb0J4UixHQUNyQzRSLEVBQWMsQ0FDbEJGLEVBQU0sR0FBS0MsRUFBZSxHQUMxQkQsRUFBTSxHQUFLQyxFQUFlLElBRzFCQyxFQUFZLElBQU0sR0FDbEJBLEVBQVksSUFBTSxHQUNsQkEsRUFBWSxJQUFNLEdBQ2xCQSxFQUFZLElBQU0sSUFDd0IsSUFBMUNYLEVBQVlNLEVBQWFLLElBRXpCSCxFQUFXclIsSUFBSXVOLE9BQU9pRSxHQUMxQixDQUNBSCxFQUFXclIsSUFBSXVOLE9BQU8rRCxHQUN4QixHQUNGLEVBRU1HLEVBQW9CLFNBQ3hCQyxHQUVHLElBRWtDLEVBSHJDQyxFQUFlLFVBQUgsNkNBQUdmLEVBRWYsSUFDd0JjLEdBQWEsSUFBckMsSUFBSyxFQUFMLHFCQUF1QyxLQUE1QkUsRUFBUyxRQUNsQixHQUFJRCxFQUFhNUcsSUFBSXdDLE9BQU9xRSxJQUFhLE9BQU8sQ0FDbEQsQ0FBQywrQkFDRCxPQUFPLENBQ1QsRUFFTUMsRUFBWSxTQUFDcFMsRUFBUTBKLEVBQU1nSSxHQUMvQixJQUFNVyxFQUFhLENBQ2pCelMsS0FBTTBTLEVBQUt0UyxFQUFRMEosR0FDbkJnSSxZQUFBQSxHQUVGVCxFQUFTMUYsS0FBSzhHLEdBQ2RaLEVBQXFCQyxFQUFhWixFQUFpQkssRUFDckQsRUFzQ01vQixFQUFpQixTQUFDQyxHQUFVLE9BQ2hDQSxFQUFXak4sT0FBT2tOLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdILEVBQVd4UyxRQUFTLEVBQUUsRUFFL0Q0UyxFQUFxQixXQUFILElBQUlDLEVBQWEsVUFBSCw2Q0FBRyxDQUFDLGFBQWMsWUFBVyxPQUNqRUEsRUFBV0osS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFVBQWMsRUFFckNHLEVBQXdCLFNBQUNqVCxFQUFZSyxHQUV6QyxJQURBLElBQUk2UyxPQUVxQjVOLElBQXZCNE4sR0FDQTVCLEVBQWtCN0YsSUFBSXdDLE9BQU9pRixLQUU3QixHQUFrQixlQUFkN1MsRUFBNEIsQ0FDOUIsSUFBTThTLEVBQ0poQyxFQUFNeUIsS0FBS0MsTUFBTUQsS0FBS0UsVUFBWTNCLEVBQU1oUixPQUFTSCxLQUcvQ21ULEVBQWdCLEdBQUtuVCxHQUFjLEtBQ3JDa1QsRUFBcUJDLEVBQ3pCLEtBQU8sQ0FDTCxJQUFNQSxFQUNKaEMsRUFBTXlCLEtBQUtDLE1BQU1ELEtBQUtFLFVBQStCLElBQWxCOVMsRUFBYSxNQUc5Q21ULEVBQWdCLEdBQUtuVCxHQUFjLEtBQ3JDa1QsRUFBcUJDLEVBQ3pCLENBRUYsT0FBT0QsQ0FDVCxFQUVNRSxFQUFxQixTQUFDcFQsR0FFMUIsSUFEQSxJQUFNc1MsRUFBWSxHQUNYQSxFQUFVblMsUUFBVSxHQUFHLENBQzVCLElBQU1FLEVBQVkwUyxJQUNaTSxFQUFlSixFQUFzQmpULEVBQVlLLEdBQ3ZEaVMsRUFBVTVHLEtBQUsySCxHQUVmLElBQUssSUFBSS9TLEVBQUksRUFBR0EsRUFBSU4sRUFBWU0sSUFFWixlQUFkRCxFQUNGaVMsRUFBVTVHLEtBQUssQ0FBQzJILEVBQWEsR0FBSUEsRUFBYSxHQUFLL1MsSUFDaERnUyxFQUFVNUcsS0FBSyxDQUFDMkgsRUFBYSxHQUFLL1MsRUFBRytTLEVBQWEsS0FFckRsQixFQUFrQkcsSUFBWUEsRUFBVTVNLE9BQU8sRUFDckQsQ0FHQSxPQURBa00sRUFBcUJVLEdBQ2RBLENBQ1QsRUFVQSxNQUFPLENBQ0xsQixTQUFBQSxFQUNBbUIsVUFBQUEsRUFDQWUsY0FsR29CLFNBQUNsRCxHQUNyQixJQUFNbUQsRUF3QlMsU0FBQ25ELEdBQ2hCLElBQzZCLEVBRHpCNU0sRUFBUSxFQUFFLElBQ080TixHQUFRLElBQTdCLElBQUssRUFBTCxxQkFBK0IsQ0FDN0IsR0FEZSxRQUNKUyxZQUFZSixNQUFLLFNBQUNuQixHQUFDLE9BQUtxQixJQUFRdkIsRUFBWUUsRUFBRSxJQUFHLE9BQU85TSxFQUNuRUEsR0FBUyxDQUNYLENBQUMsK0JBQ0gsQ0E5QnNCZ1EsQ0FBU3BELEdBQzdCLFFBQW9COUssSUFBaEJpTyxFQUEyQixDQUM3QixJQUFNRSxFQUFhckMsRUFBU21DLEdBRTVCLE9BREFFLEVBQVcxVCxLQUFLK1EsTUFDWjJDLEVBQVcxVCxLQUFLaVIsU0FDWCxDQUNMRixLQUFLLEVBQ0w0QyxNQUFNLEVBQ05DLE9BQVFGLEVBQVc1QixhQUVoQixDQUNMZixLQUFLLEVBQ0w0QyxNQUFNLEVBQ05DLE9BQVEsS0FFWixDQUVBLE9BREF0QyxFQUFZM1EsSUFBSXVOLE9BQU9tQyxJQUNoQixDQUNMVSxLQUFLLEVBQ0w0QyxNQUFNLEVBQ05DLE9BQVEsS0FFWixFQTRFRXRDLFlBQUFBLEVBQ0F1QyxXQW5FaUIsV0FBSCxPQUFTeEMsRUFBU3lDLE9BQU0sU0FBQ25DLEdBQUUsT0FBS0EsRUFBRzNSLEtBQUtpUixRQUFRLEdBQUMsRUFvRS9ETSxrQkFBQUEsRUFDQWEsa0JBQUFBLEVBQ0EyQixtQkFqQnlCLFdBRXpCLElBREEsSUFBTW5CLEVBQWEsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCQSxFQUFXeFMsUUFBUSxDQUN4QixJQUFNNFQsRUFBY3JCLEVBQWVDLEdBQzdCcUIsRUFBYTlDLEVBQVU2QyxHQUN2QjNCLEVBQWdCZ0IsRUFBbUJZLEVBQVc3VCxRQUNwRG9TLEVBQVV5QixFQUFXN1QsT0FBUTZULEVBQVduSyxLQUFNdUksRUFDaEQsQ0FDRixFQVdGLEVDMUpBLEVBVGUsU0FBQ3ZJLEdBTWQsTUFBTyxDQUFFZ0gsUUFMTyxXQUFILE9BQVNoSCxDQUFJLEVBS1JzSCxNQUpKOEMsSUFJV0MsT0FGVixTQUFDQyxFQUFPL0QsR0FBVSxPQUFLK0QsRUFBTWhELE1BQU1tQyxjQUFjbEQsRUFBVyxFQUc3RSxFLDBHQ0pBLElBQU1nRSxFQUFpQjFVLFNBQVNzUSxlQUFlLGdCQUN6Q3FFLEVBQWEzVSxTQUFTc1EsZUFBZSxZQUNyQ3NFLEVBQWM1VSxTQUFTc1EsZUFBZSxnQkFpTDVDLFFBaExvQixTQUFDdUUsR0FDbkIsSUFBSUMsRUFBYSxhQUNYQyxFQUFVLENBQ2RDLFdBQVlDLEVBQU9KLEdBQ25CSyxHQUFJRCxFQUFPLE9BUVBFLEVBQWdCLFNBQUN6RSxFQUFZcFEsR0FBVSxJQUFFSyxFQUFZLFVBQUgsNkNBQUcsYUFBWSxNQUN2RCxlQUFkQSxFQUNJK1AsRUFBVyxHQUFLcFEsRUFBYSxHQUM3Qm9RLEVBQVcsR0FBS3BRLEVBQWEsRUFBRSxFQW1EL0I4VSxFQUFvQjNFLEVBRXBCNEUsRUFBVSxXQUFILE9BQVNQLENBQVUsRUFFMUJRLEVBQWEsV0FHakIsT0FGaUNSLEVBQWQsZUFBZkEsRUFBMEMsS0FDNUIsWUFFcEIsRUFPTVMsRUFBbUIsU0FBQ0MsR0FDeEIsSUFBTUMsRUFBWUQsRUFFaEJaLEVBQVljLFlBREksZUFBZEQsRUFDd0Isa0JBQ0ssZUFDbkMsRUFFTUUsRUFBVyxTQUFDMUIsRUFBUXVCLEdBQ3hCLElBQUlJLEVBQ3VCQSxFQUFkLGVBQVRKLEVBQXFDYixFQUN0QkQsRUFFbkJULEVBQU83VCxTQUFRLFNBQUNrUyxHQUNJc0QsRUFBWUMsY0FBYyxZQUFELE9BQzdCdkQsRUFBTSxHQUFFLHNCQUFjQSxFQUFNLEdBQUUsT0FFbEN2UixVQUFVQyxJQUFJLE9BQzFCLEdBQ0YsRUFFTThVLEVBQWEsU0FBQ3BGLEVBQVksRUFBdUI4RSxHQUFTLElBQzFETyxFQUQ0QjNFLEVBQUcsRUFBSEEsSUFBUyxFQUFKNEMsS0FBWSxFQUFOQyxPQUU5QixlQUFUdUIsRUFDRk8sRUFBU3BCLEVBQVdrQixjQUFjLG1CQUFELE9BQ1puRixFQUFXLEdBQUUsc0JBQWNBLEVBQVcsR0FBRSxPQUUzQyxPQUFUOEUsSUFDVE8sRUFBU3JCLEVBQWVtQixjQUFjLG1CQUFELE9BQ2hCbkYsRUFBVyxHQUFFLHNCQUFjQSxFQUFXLEdBQUUsU0FJbkQsSUFBUlUsRUFBYzJFLEVBQU9oVixVQUFVQyxJQUFJLE9BQ2xDK1UsRUFBT2hWLFVBQVVDLElBQUksU0FDNUIsRUFrREEsTUFBTyxDQUNMZ1YsWUFqQmtCLFNBQUN4UyxHQUVqQkEsRUFBRXVTLE9BQU9oVixVQUFVa1YsU0FBUyxXQUM1QnpTLEVBQUV1UyxPQUFPaFYsVUFBVWtWLFNBQVMsUUFDZCxPQUFkWixLQUNBTixFQUFRRyxHQUFHekQsTUFBTXlDLGNBQ2pCYSxFQUFRQyxXQUFXdkQsTUFBTXlDLGVBdENWLFNBQUNnQyxHQUNsQnZCLEVBQVc1VCxVQUFVb1YsT0FBTyxVQUM1QixJQTNDMkJKLEVBMkNyQkssR0EzQ3FCTCxFQTJDY0csRUFBTUgsT0EzQ1QsQ0FDdEN4VixPQUFPd1YsRUFBT3ZWLFFBQVFvUSxHQUN0QnJRLE9BQU93VixFQUFPdlYsUUFBUXFRLEtBMENoQndGLEVBQWV0QixFQUFRQyxXQUFXUixPQUFPTyxFQUFRRyxHQUFJa0IsR0FDckRFLEVBQWNqQixJQUNwQkUsRUFBaUJlLEdBQ2pCUixFQUFXTSxFQUFjQyxFQUFjQyxJQUNiLElBQXRCRCxFQUFhckMsTUFBZTJCLEVBQVNVLEVBQWFwQyxPQUFRcUMsR0FDOURoQixHQUNGLENBZ0NFaUIsQ0FBVy9TLEdBOUJFLFdBQ2IsSUFBSXVSLEVBQVFHLEdBQUd6RCxNQUFNeUMsYUFBckIsQ0FDQSxJTjNIb0JzQyxFTTJIZEYsRUFBY2pCLElBQ2RvQixHTjVIY0QsRU00SFlwQixHTjFIL0JwUCxPQUFPa04sS0FBS0MsTUFBTUQsS0FBS0UsU0FBV29ELEVBQWEvVixRQUFTLEdBQ3hEaVcsT00wSEtDLEVBQVc1QixFQUFRRyxHQUFHVixPQUFPTyxFQUFRQyxXQUFZeUIsR0FFdkRHLFlBQVcsV0FDVGQsRUFBV1csRUFBVUUsRUFBVUwsSUFDVCxJQUFsQkssRUFBUzNDLE1BQWUyQixFQUFTZ0IsRUFBUzFDLE9BQVFxQyxFQUN4RCxHQUFHLEtBRUhNLFlBQVcsV0FDVHJCLEVBQWlCZSxFQUNuQixHQUFHLEtBRUhNLFlBQVcsV0FDVHRCLElBQ0FYLEVBQVc1VCxVQUFVQyxJQUFJLFNBQzNCLEdBQUcsSUFqQnNDLENBa0IzQyxDQVlFNlYsR0FDRixFQU9FOUIsUUFBQUEsRUFDQStCLFlBOUhrQixTQUFDQyxFQUFrQkMsR0FDckMsSUFBSTdCLEVBQWM0QixFQUFrQkMsRUFBU3ZXLE9BQVF1VyxFQUFTclcsV0FBOUQsQ0FFQSxJQUFNK1IsRUE1QmtCLFNBQ3hCaEMsRUFDQXBRLEdBSUEsSUFGRyxJQURISyxFQUFZLFVBQUgsNkNBQUcsYUFFTitSLEVBQWdCLEdBQ2I5UixFQUFJLEVBQUdBLEVBQUlOLEVBQVlNLElBQ1osZUFBZEQsRUFDRitSLEVBQWMxRyxLQUFLLENBQUMwRSxFQUFXLEdBQUlBLEVBQVcsR0FBSzlQLElBQ2hEOFIsRUFBYzFHLEtBQUssQ0FBQzBFLEVBQVcsR0FBSzlQLEVBQUc4UCxFQUFXLEtBRXpELE9BQU9nQyxDQUNULENBZ0J3QnVFLENBQ3BCRixFQUNBQyxFQUFTdlcsT0FDVHVXLEVBQVNyVyxXQUVMMFAsRUFBYzBFLEVBQVFDLFdBQVd2RCxNQUN2QyxJQWpCbUIsU0FBQ3RILEVBQU11SCxHQUMxQixJQUNpQyxFQURqQyxFLDI1QkFBQSxDQUN5QkEsR0FBUSxJQUFqQyxJQUFLLEVBQUwscUJBQ0UsR0FEbUIsUUFDSnJSLEtBQUs4USxZQUFjaEgsRUFBTSxPQUFPLENBQ2hELCtCQUNELE9BQU8sQ0FDVCxDQVlJK00sQ0FBYUYsRUFBUzdNLEtBQU1rRyxFQUFZcUIsWUFDeENyQixFQUFZb0Msa0JBQWtCQyxHQUtoQyxPQURBckMsRUFBWXdDLFVBQVVtRSxFQUFTdlcsT0FBUXVXLEVBQVM3TSxLQUFNdUksR0FDL0NBLENBZEMsQ0FlVixFQThHRXlFLGFBNUdtQixXQUFILE9BQzZCLElBQTdDcEMsRUFBUUMsV0FBV3ZELE1BQU1DLFNBQVNqUixNQUFZLEVBNEc5QzBVLGNBQUFBLEVBQ0FpQyxXQVRpQixXQUFILE9BQ2RyQyxFQUFRRyxHQUFHekQsTUFBTXlDLGNBQWdCYSxFQUFRQyxXQUFXdkQsTUFBTXlDLFlBQVksRUFTdEVtQixRQUFBQSxFQUVKLEVDcExBLElBQU05RSxFQUFVdlEsU0FBU3NRLGVBQWUsWUFDbENELEVBQWNyUSxTQUFTc1EsZUFBZSxnQkFDdENFLEVBQW9CeFEsU0FBU3NRLGVBQWUsb0JBQzVDK0csRUFBaUJyWCxTQUFTc1EsZUFBZSxtQkFDekNnSCxFQUFXdFgsU0FBUzZWLGNBQWMsVUFDbEMwQixFQUFnQnZYLFNBQVM2VixjQUFjLGdCQUN2QzJCLEVBQWV4WCxTQUFTNlYsY0FBYyxlQUN0QzRCLEVBQWV6WCxTQUFTNlYsY0FBYyxrQkFDdEM2QixFQUFVMVgsU0FBUzZWLGNBQWMsWUFFakM4QixFQUFhM1gsU0FBUzZWLGNBQWMsa0JBQ3BDK0IsRUFBa0I1WCxTQUFTNlYsY0FBYyxxQkFDekNnQyxFQUFpQjdYLFNBQVM2VixjQUFjLG9CQUUxQ2lDLEVBQWdCQyxFQUFZLFFBY2hDTixFQUFhTyxpQkFBaUIsU0FBUyxXQUNyQyxJQUFJQyxFQUFpQlosRUFBZWEsa0JBQWtCMVgsUUFBUUcsVUFDeER3WCxFQUFZalksTUFBTUMsS0FBS2tYLEVBQWV0SCxVQUNyQixlQUFuQmtJLEdBQ0ZBLEVBQWlCLFdBQ2pCRSxFQUFVL1gsU0FBUSxTQUFDQyxHQUNqQkEsRUFBS0csUUFBUUcsVUFBWXNYLEVBQ3pCNVgsRUFBS1UsVUFBVUMsSUFBSSxXQUNyQixLQUVBbVgsRUFBVS9YLFNBQVEsU0FBQ0MsR0FDakI0WCxFQUFpQixhQUNqQjVYLEVBQUtHLFFBQVFHLFVBQVlzWCxFQUN6QjVYLEVBQUtVLFVBQVVvVixPQUFPLFdBQ3hCLEdBRUosSUFnQ0FtQixFQUFTVSxpQkFFUCxTQUNBLFdBQ01GLEVBQWNYLGlCQXJCcEJRLEVBQVc1VyxVQUFVb1YsT0FBTyxVQUM1QnVCLEVBQVEzVyxVQUFVb1YsT0FBTyxVQUN6QjVGLEVBQVF4UCxVQUFVQyxJQUFJLFVBNUNGOFcsRUFBYy9DLFFBQVFDLFdBQVd2RCxNQUFNQyxTQUMvQ3RSLFNBQVEsU0FBQ2dZLEdBQ25CQSxFQUFRakcsWUFBWS9SLFNBQVEsU0FBQ2tTLEdBQ0FqQyxFQUFZd0YsY0FBYyxZQUFELE9BQ3RDdkQsRUFBTSxHQUFFLHNCQUFjQSxFQUFNLEdBQUUsT0FFekJ2UixVQUFVQyxJQUFJLFdBQ25DLEdBQ0YsSUFzQ0E4VyxFQUFjL0MsUUFBUUcsR0FBR3pELE1BQU0yQyxxQkFDL0I3RCxFQUFReUgsaUJBQWlCLGFBQWEsU0FBQ3hVLElBRW5Dc1UsRUFBY1YsY0FDYyxPQUE1QlUsRUFBY3pDLFdBQ2I3UixFQUFFdVMsT0FBT2hWLFVBQVVrVixTQUFTLFlBRy9CNkIsRUFBYzlCLFlBQVl4UyxHQXZCeEJzVSxFQUFjVixlQUNaVSxFQUFjL0MsUUFBUUcsR0FBR3pELE1BQU15QyxhQUNqQzJELEVBQWVuQyxZQUFjLFVBQzFCbUMsRUFBZW5DLFlBQWMsU0FFbENrQyxFQUFnQjdXLFVBQVVDLElBQUksVUFDOUIwVyxFQUFRM1csVUFBVUMsSUFBSSxXQW1CeEIsSUFVQSxJQUdGcVcsRUFBZVcsaUJBQWlCLGFBQWEsU0FBQ3hVLEdBQ3hDQSxFQUFFdVMsT0FBT2hWLFVBQVVrVixTQUFTLFVBQzlCelMsRUFBRTZVLGFBQWFDLFFBQVEsY0FBZTlVLEVBQUV1UyxPQUFPdlYsUUFBUUMsUUFDdkQrQyxFQUFFNlUsYUFBYUMsUUFBUSxZQUFhOVUsRUFBRXVTLE9BQU9qSCxJQUM3Q3RMLEVBQUU2VSxhQUFhQyxRQUFRLGlCQUFrQjlVLEVBQUV1UyxPQUFPdlYsUUFBUUcsV0FFOUQsSUFFQTZQLEVBQWtCd0gsaUJBQWlCLFlBQVksU0FBQ3hVLEdBRTVCLHFCQUFoQkEsRUFBRXVTLE9BQU9qSCxJQUNUdEwsRUFBRXVTLE9BQU9oVixVQUFVa1YsU0FBUyxjQUc5QnpTLEVBQUV1UyxPQUFPaFYsVUFBVUMsSUFBSSxZQUN2QndDLEVBQUUrVSxpQkFDSixJQUVBL0gsRUFBa0J3SCxpQkFBaUIsYUFBYSxTQUFDeFUsR0FDM0IscUJBQWhCQSxFQUFFdVMsT0FBT2pILEtBQ2J0TCxFQUFFdVMsT0FBT2hWLFVBQVVvVixPQUFPLFlBQzFCM1MsRUFBRStVLGlCQUNKLElBV0EvSCxFQUFrQndILGlCQUFpQixRQUFRLFNBQUN4VSxHQUMxQ0EsRUFBRXVTLE9BQU9oVixVQUFVb1YsT0FBTyxZQUMxQixJQUFNcUMsRUFBYSxDQUNqQi9YLE9BQVFGLE9BQU9pRCxFQUFFNlUsYUFBYUksUUFBUSxnQkFDdEN0TyxLQUFNM0csRUFBRTZVLGFBQWFJLFFBQVEsYUFDN0I5WCxVQUFXNkMsRUFBRTZVLGFBQWFJLFFBQVEsbUJBRTlCMUIsRUFBbUIsQ0FDdkJ4VyxPQUFPaUQsRUFBRXVTLE9BQU92VixRQUFRb1EsR0FDeEJyUSxPQUFPaUQsRUFBRXVTLE9BQU92VixRQUFRcVEsSUFHcEI2SCxFQUFlWixFQUFjaEIsWUFBWUMsRUFBa0J5QixHQUM3REUsSUFDZUEsRUF0Qkx0WSxTQUFRLFNBQUN3UyxHQUNFcEMsRUFBa0JxRixjQUFjLFlBQUQsT0FDeENqRCxFQUFVLEdBQUUsc0JBQWNBLEVBQVUsR0FBRSxPQUVyQzdSLFVBQVVDLElBQUksV0FDL0IsSUFrQkVoQixTQUFTNlYsY0FBYyxJQUFELE9BQUsyQyxFQUFXck8sT0FBUXBKLFVBQVVDLElBQUksV0FFaEUsSUFFQSxJQUFNMlgsRUFBZSxTQUFDQyxHQUFvQyxJQUF6QkMsRUFBWSxVQUFILDZDQUFHN1ksU0FDckM4WSxFQUFrQjVZLE1BQU1DLEtBQzVCMFksRUFBVTVZLGlCQUFpQixJQUFELE9BQUsyWSxLQUVqQ0UsRUFBZ0IxWSxTQUFRLFNBQUMwUixHQUFPLE9BQUtBLEVBQVEvUSxVQUFVb1YsT0FBT3lDLEVBQVUsR0FDMUUsRUFHTUcsRUFBYSxXQUNqQmpCLEVBQWdCQyxFQUFZLFFBQzVCWSxFQUFhLFlBQ2JBLEVBQWEsVUFBV3RCLEVBQzFCLEVBRUFFLEVBQWNTLGlCQUFpQixTQUFTLFdBQ3RDZSxHQUNGLElBRUF2QixFQUFhUSxpQkFBaUIsU0FBUyxXQUNyQ2UsSUFDQUosRUFBYSxPQUNiQSxFQUFhLFVBQ2JBLEVBQWEsUUFDYmYsRUFBZ0I3VyxVQUFVb1YsT0FBTyxVQUNqQ3dCLEVBQVc1VyxVQUFVQyxJQUFJLFNBQzNCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9ET00vZHJhZ0Ryb3BTaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL25vZGVfbW9kdWxlcy9sb2Rhc2guaXNlcXVhbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZUhlbHBlcnMvQUktcG9zc2libGUtYXR0YWNrcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9ET00vY3JlYXRlQm9hcmRET00uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9iYXR0bGVzaGlwLWZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZUhlbHBlcnMvcGxhY2VtZW50LWhlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9wbGF5ZXItZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9tb2R1bGVzL2dhbWVIYW5kbGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL0RPTS9ET01FdmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2hpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXBcIik7XG5cbmNvbnN0IGdlbmVyYXRlU2hpcEJsb2NrcyA9ICgpID0+IHtcbiAgQXJyYXkuZnJvbShzaGlwcykuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgIGNvbnN0IHNoaXBMZW5ndGggPSBOdW1iZXIoc2hpcC5kYXRhc2V0Lmxlbmd0aCk7XG4gICAgc2hpcC5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwgXCJ0cnVlXCIpOyBcbiAgICBzaGlwLmRhdGFzZXQuYWxpZ25tZW50ID0gXCJob3Jpem9udGFsXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHNoaXBCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBzaGlwQmxvY2suY2xhc3NMaXN0LmFkZChcImJsb2NrXCIpO1xuICAgICAgc2hpcC5hcHBlbmRDaGlsZChzaGlwQmxvY2spO1xuICAgIH1cbiAgfSk7XG59O1xuZ2VuZXJhdGVTaGlwQmxvY2tzKCk7XG4iLCIvKipcbiAqIExvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcy5mb3VuZGF0aW9uLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbnZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqL1xudmFyIENPTVBBUkVfUEFSVElBTF9GTEFHID0gMSxcbiAgICBDT01QQVJFX1VOT1JERVJFRF9GTEFHID0gMjtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGFzeW5jVGFnID0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHByb21pc2VUYWcgPSAnW29iamVjdCBQcm9taXNlXScsXG4gICAgcHJveHlUYWcgPSAnW29iamVjdCBQcm94eV0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nLFxuICAgIHVuZGVmaW5lZFRhZyA9ICdbb2JqZWN0IFVuZGVmaW5lZF0nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID1cbnR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID1cbnR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cbnR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID1cbnR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi9cbnZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqL1xudmFyIGZyZWVNb2R1bGUgPSBmcmVlRXhwb3J0cyAmJiB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi9cbnZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHByb2Nlc3NgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlUHJvY2VzcyA9IG1vZHVsZUV4cG9ydHMgJiYgZnJlZUdsb2JhbC5wcm9jZXNzO1xuXG4vKiogVXNlZCB0byBhY2Nlc3MgZmFzdGVyIE5vZGUuanMgaGVscGVycy4gKi9cbnZhciBub2RlVXRpbCA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZnJlZVByb2Nlc3MgJiYgZnJlZVByb2Nlc3MuYmluZGluZyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nKCd1dGlsJyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59KCkpO1xuXG4vKiBOb2RlLmpzIGhlbHBlciByZWZlcmVuY2VzLiAqL1xudmFyIG5vZGVJc1R5cGVkQXJyYXkgPSBub2RlVXRpbCAmJiBub2RlVXRpbC5pc1R5cGVkQXJyYXk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZpbHRlcmAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yXG4gKiBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheUZpbHRlcihhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGgsXG4gICAgICByZXNJbmRleCA9IDAsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXN1bHRbcmVzSW5kZXgrK10gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYXBwZW5kLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5UHVzaChhcnJheSwgdmFsdWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aCxcbiAgICAgIG9mZnNldCA9IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGFycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAqIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuYXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0b3JpbmcgbWV0YWRhdGEuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FwcGVkIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlVW5hcnkoZnVuYykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZnVuYyh2YWx1ZSk7XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgYGNhY2hlYCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gY2FjaGUgVGhlIGNhY2hlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGNhY2hlSGFzKGNhY2hlLCBrZXkpIHtcbiAgcmV0dXJuIGNhY2hlLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUga2V5LXZhbHVlIHBhaXJzLlxuICovXG5mdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG1hcC5zaXplKTtcblxuICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gW2tleSwgdmFsdWVdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYHNldGAgdG8gYW4gYXJyYXkgb2YgaXRzIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gc2V0VG9BcnJheShzZXQpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cbiAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLFxuICAgIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgICBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi9cbnZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmdW5jVG9TdHJpbmcgPSBmdW5jUHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG52YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcbiAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xufSgpKTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIEJ1ZmZlciA9IG1vZHVsZUV4cG9ydHMgPyByb290LkJ1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBTeW1ib2wgPSByb290LlN5bWJvbCxcbiAgICBVaW50OEFycmF5ID0gcm9vdC5VaW50OEFycmF5LFxuICAgIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsXG4gICAgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2UsXG4gICAgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVHZXRTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxcbiAgICBuYXRpdmVJc0J1ZmZlciA9IEJ1ZmZlciA/IEJ1ZmZlci5pc0J1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIERhdGFWaWV3ID0gZ2V0TmF0aXZlKHJvb3QsICdEYXRhVmlldycpLFxuICAgIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyksXG4gICAgUHJvbWlzZSA9IGdldE5hdGl2ZShyb290LCAnUHJvbWlzZScpLFxuICAgIFNldCA9IGdldE5hdGl2ZShyb290LCAnU2V0JyksXG4gICAgV2Vha01hcCA9IGdldE5hdGl2ZShyb290LCAnV2Vha01hcCcpLFxuICAgIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1hcHMsIHNldHMsIGFuZCB3ZWFrbWFwcy4gKi9cbnZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG4gICAgbWFwQ3RvclN0cmluZyA9IHRvU291cmNlKE1hcCksXG4gICAgcHJvbWlzZUN0b3JTdHJpbmcgPSB0b1NvdXJjZShQcm9taXNlKSxcbiAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcbiAgICB3ZWFrTWFwQ3RvclN0cmluZyA9IHRvU291cmNlKFdlYWtNYXApO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgSGFzaFxuICovXG5mdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hEZWxldGUoa2V5KSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG4gIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuICAgIHZhciByZXN1bHQgPSBkYXRhW2tleV07XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSA/IGRhdGFba2V5XSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHJldHVybiBuYXRpdmVDcmVhdGUgPyAoZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIDogaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICB0aGlzLnNpemUgKz0gdGhpcy5oYXMoa2V5KSA/IDAgOiAxO1xuICBkYXRhW2tleV0gPSAobmF0aXZlQ3JlYXRlICYmIHZhbHVlID09PSB1bmRlZmluZWQpID8gSEFTSF9VTkRFRklORUQgOiB2YWx1ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gW107XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICBkYXRhLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgfVxuICAtLXRoaXMuc2l6ZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgICsrdGhpcy5zaXplO1xuICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMuX19kYXRhX18gPSB7XG4gICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcbiAgICAnc3RyaW5nJzogbmV3IEhhc2hcbiAgfTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgcmVzdWx0ID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xuICB0aGlzLnNpemUgLT0gcmVzdWx0ID8gMSA6IDA7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLFxuICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTtcblxuICBkYXRhLnNldChrZXksIHZhbHVlKTtcbiAgdGhpcy5zaXplICs9IGRhdGEuc2l6ZSA9PSBzaXplID8gMCA6IDE7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuTWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gbWFwQ2FjaGVDbGVhcjtcbk1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcbk1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcbk1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBDYWNoZUhhcztcbk1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblxuLyoqXG4gKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSB2YWx1ZXMgPT0gbnVsbCA/IDAgOiB2YWx1ZXMubGVuZ3RoO1xuXG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGU7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGB2YWx1ZWAgdG8gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBhZGRcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQGFsaWFzIHB1c2hcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNhY2hlLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlQWRkKHZhbHVlKSB7XG4gIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlSGFzKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5TZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBzZXRDYWNoZUhhcztcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xuICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqL1xuZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGU7XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICByZXN1bHQgPSBkYXRhWydkZWxldGUnXShrZXkpO1xuXG4gIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBzdGFjayB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHN0YWNrIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzdGFja1NldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBMaXN0Q2FjaGUpIHtcbiAgICB2YXIgcGFpcnMgPSBkYXRhLl9fZGF0YV9fO1xuICAgIGlmICghTWFwIHx8IChwYWlycy5sZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIC0gMSkpIHtcbiAgICAgIHBhaXJzLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgICAgIHRoaXMuc2l6ZSA9ICsrZGF0YS5zaXplO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRhdGEgPSB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlKHBhaXJzKTtcbiAgfVxuICBkYXRhLnNldChrZXksIHZhbHVlKTtcbiAgdGhpcy5zaXplID0gZGF0YS5zaXplO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC5cblN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5TdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5TdGFjay5wcm90b3R5cGUuZ2V0ID0gc3RhY2tHZXQ7XG5TdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5TdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZUtleXModmFsdWUsIGluaGVyaXRlZCkge1xuICB2YXIgaXNBcnIgPSBpc0FycmF5KHZhbHVlKSxcbiAgICAgIGlzQXJnID0gIWlzQXJyICYmIGlzQXJndW1lbnRzKHZhbHVlKSxcbiAgICAgIGlzQnVmZiA9ICFpc0FyciAmJiAhaXNBcmcgJiYgaXNCdWZmZXIodmFsdWUpLFxuICAgICAgaXNUeXBlID0gIWlzQXJyICYmICFpc0FyZyAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheSh2YWx1ZSksXG4gICAgICBza2lwSW5kZXhlcyA9IGlzQXJyIHx8IGlzQXJnIHx8IGlzQnVmZiB8fCBpc1R5cGUsXG4gICAgICByZXN1bHQgPSBza2lwSW5kZXhlcyA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZykgOiBbXSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoXG4gICAgICAgICAgIC8vIFNhZmFyaSA5IGhhcyBlbnVtZXJhYmxlIGBhcmd1bWVudHMubGVuZ3RoYCBpbiBzdHJpY3QgbW9kZS5cbiAgICAgICAgICAga2V5ID09ICdsZW5ndGgnIHx8XG4gICAgICAgICAgIC8vIE5vZGUuanMgMC4xMCBoYXMgZW51bWVyYWJsZSBub24taW5kZXggcHJvcGVydGllcyBvbiBidWZmZXJzLlxuICAgICAgICAgICAoaXNCdWZmICYmIChrZXkgPT0gJ29mZnNldCcgfHwga2V5ID09ICdwYXJlbnQnKSkgfHxcbiAgICAgICAgICAgLy8gUGhhbnRvbUpTIDIgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gdHlwZWQgYXJyYXlzLlxuICAgICAgICAgICAoaXNUeXBlICYmIChrZXkgPT0gJ2J1ZmZlcicgfHwga2V5ID09ICdieXRlTGVuZ3RoJyB8fCBrZXkgPT0gJ2J5dGVPZmZzZXQnKSkgfHxcbiAgICAgICAgICAgLy8gU2tpcCBpbmRleCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICBpc0luZGV4KGtleSwgbGVuZ3RoKVxuICAgICAgICApKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICogQHBhcmFtIHsqfSBrZXkgVGhlIGtleSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAqL1xuZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKGVxKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHtcbiAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0QWxsS2V5c2AgYW5kIGBnZXRBbGxLZXlzSW5gIHdoaWNoIHVzZXNcbiAqIGBrZXlzRnVuY2AgYW5kIGBzeW1ib2xzRnVuY2AgdG8gZ2V0IHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZFxuICogc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN5bWJvbHNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXNGdW5jLCBzeW1ib2xzRnVuYykge1xuICB2YXIgcmVzdWx0ID0ga2V5c0Z1bmMob2JqZWN0KTtcbiAgcmV0dXJuIGlzQXJyYXkob2JqZWN0KSA/IHJlc3VsdCA6IGFycmF5UHVzaChyZXN1bHQsIHN5bWJvbHNGdW5jKG9iamVjdCkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZztcbiAgfVxuICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgPyBnZXRSYXdUYWcodmFsdWUpXG4gICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNBcmd1bWVudHNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqL1xuZnVuY3Rpb24gYmFzZUlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IGFyZ3NUYWc7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuICogYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuXG4gKiAgMSAtIFVub3JkZXJlZCBjb21wYXJpc29uXG4gKiAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdExpa2UodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBiYXNlSXNFcXVhbCwgc3RhY2spO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICBvYmpUYWcgPSBvYmpJc0FyciA/IGFycmF5VGFnIDogZ2V0VGFnKG9iamVjdCksXG4gICAgICBvdGhUYWcgPSBvdGhJc0FyciA/IGFycmF5VGFnIDogZ2V0VGFnKG90aGVyKTtcblxuICBvYmpUYWcgPSBvYmpUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG9ialRhZztcbiAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG5cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiBpc0J1ZmZlcihvYmplY3QpKSB7XG4gICAgaWYgKCFpc0J1ZmZlcihvdGhlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgb2JqSXNBcnIgPSB0cnVlO1xuICAgIG9iaklzT2JqID0gZmFsc2U7XG4gIH1cbiAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHtcbiAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgIHJldHVybiAob2JqSXNBcnIgfHwgaXNUeXBlZEFycmF5KG9iamVjdCkpXG4gICAgICA/IGVxdWFsQXJyYXlzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spXG4gICAgICA6IGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTtcbiAgfVxuICBpZiAoIShiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUcpKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuICAgICAgICAgIG90aFVud3JhcHBlZCA9IG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlcjtcblxuICAgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFpc1NhbWVUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgcmV0dXJuIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gaXNGdW5jdGlvbih2YWx1ZSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNUeXBlZEFycmF5YCB3aXRob3V0IE5vZGUuanMgb3B0aW1pemF0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiZcbiAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3NbYmFzZUdldFRhZyh2YWx1ZSldO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG4gIGlmICghaXNQcm90b3R5cGUob2JqZWN0KSkge1xuICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYga2V5ICE9ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSB0cnVlLFxuICAgICAgc2VlbiA9IChiaXRtYXNrICYgQ09NUEFSRV9VTk9SREVSRURfRkxBRykgPyBuZXcgU2V0Q2FjaGUgOiB1bmRlZmluZWQ7XG5cbiAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG4gIHN0YWNrLnNldChvdGhlciwgYXJyYXkpO1xuXG4gIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIGFyclZhbHVlLCBpbmRleCwgb3RoZXIsIGFycmF5LCBzdGFjaylcbiAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICBpZiAoY29tcGFyZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGNvbXBhcmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoc2Vlbikge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlLCBvdGhJbmRleCkge1xuICAgICAgICAgICAgaWYgKCFjYWNoZUhhcyhzZWVuLCBvdGhJbmRleCkgJiZcbiAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlZW4ucHVzaChvdGhJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShcbiAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcbiAgICAgICAgICAgIGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKVxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10oYXJyYXkpO1xuICBzdGFja1snZGVsZXRlJ10ob3RoZXIpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgZGF0YVZpZXdUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG4gICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIC8vIENvZXJjZSBib29sZWFucyB0byBgMWAgb3IgYDBgIGFuZCBkYXRlcyB0byBtaWxsaXNlY29uZHMuXG4gICAgICAvLyBJbnZhbGlkIGRhdGVzIGFyZSBjb2VyY2VkIHRvIGBOYU5gLlxuICAgICAgcmV0dXJuIGVxKCtvYmplY3QsICtvdGhlcik7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cyxcbiAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcbiAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcblxuICAgIGNhc2UgbWFwVGFnOlxuICAgICAgdmFyIGNvbnZlcnQgPSBtYXBUb0FycmF5O1xuXG4gICAgY2FzZSBzZXRUYWc6XG4gICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHO1xuICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXG4gICAgICBpZiAob2JqZWN0LnNpemUgIT0gb3RoZXIuc2l6ZSAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gICAgICBpZiAoc3RhY2tlZCkge1xuICAgICAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgICAgIH1cbiAgICAgIGJpdG1hc2sgfD0gQ09NUEFSRV9VTk9SREVSRURfRkxBRztcblxuICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG4gICAgICB2YXIgcmVzdWx0ID0gZXF1YWxBcnJheXMoY29udmVydChvYmplY3QpLCBjb252ZXJ0KG90aGVyKSwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7XG4gICAgICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlIHN5bWJvbFRhZzpcbiAgICAgIGlmIChzeW1ib2xWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyxcbiAgICAgIG9ialByb3BzID0gZ2V0QWxsS2V5cyhvYmplY3QpLFxuICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgb3RoUHJvcHMgPSBnZXRBbGxLZXlzKG90aGVyKSxcbiAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIGlmICghKGlzUGFydGlhbCA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcbiAgaWYgKHN0YWNrZWQgJiYgc3RhY2suZ2V0KG90aGVyKSkge1xuICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICB9XG4gIHZhciByZXN1bHQgPSB0cnVlO1xuICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG4gIHN0YWNrLnNldChvdGhlciwgb2JqZWN0KTtcblxuICB2YXIgc2tpcEN0b3IgPSBpc1BhcnRpYWw7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUsIGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoIShjb21wYXJlZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSlcbiAgICAgICAgICA6IGNvbXBhcmVkXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgfVxuICBpZiAocmVzdWx0ICYmICFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuICBzdGFja1snZGVsZXRlJ10ob3RoZXIpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2Ygb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMuXG4gKi9cbmZ1bmN0aW9uIGdldEFsbEtleXMob2JqZWN0KSB7XG4gIHJldHVybiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXMsIGdldFN5bWJvbHMpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hcCBkYXRhLlxuICovXG5mdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG4gIHZhciBkYXRhID0gbWFwLl9fZGF0YV9fO1xuICByZXR1cm4gaXNLZXlhYmxlKGtleSlcbiAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuICAgIDogZGF0YS5tYXA7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG4gIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7XG4gIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcblxuICB0cnkge1xuICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgaWYgKHVubWFza2VkKSB7XG4gICAgaWYgKGlzT3duKSB7XG4gICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBzeW1ib2xzLlxuICovXG52YXIgZ2V0U3ltYm9scyA9ICFuYXRpdmVHZXRTeW1ib2xzID8gc3R1YkFycmF5IDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgcmV0dXJuIGFycmF5RmlsdGVyKG5hdGl2ZUdldFN5bWJvbHMob2JqZWN0KSwgZnVuY3Rpb24oc3ltYm9sKSB7XG4gICAgcmV0dXJuIHByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob2JqZWN0LCBzeW1ib2wpO1xuICB9KTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbnZhciBnZXRUYWcgPSBiYXNlR2V0VGFnO1xuXG4vLyBGYWxsYmFjayBmb3IgZGF0YSB2aWV3cywgbWFwcywgc2V0cywgYW5kIHdlYWsgbWFwcyBpbiBJRSAxMSBhbmQgcHJvbWlzZXMgaW4gTm9kZS5qcyA8IDYuXG5pZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcbiAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBiYXNlR2V0VGFnKHZhbHVlKSxcbiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6ICcnO1xuXG4gICAgaWYgKGN0b3JTdHJpbmcpIHtcbiAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuICAgICAgICBjYXNlIGRhdGFWaWV3Q3RvclN0cmluZzogcmV0dXJuIGRhdGFWaWV3VGFnO1xuICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG4gICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuICAgICAgICBjYXNlIHNldEN0b3JTdHJpbmc6IHJldHVybiBzZXRUYWc7XG4gICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcbiAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBpcyBtYXNrZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyB1c2luZyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYGZ1bmNgIHRvIGl0cyBzb3VyY2UgY29kZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuICovXG5mdW5jdGlvbiB0b1NvdXJjZShmdW5jKSB7XG4gIGlmIChmdW5jICE9IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZ1bmNUb1N0cmluZy5jYWxsKGZ1bmMpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAoZnVuYyArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBhXG4gKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FyZ3VtZW50cyA9IGJhc2VJc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA/IGJhc2VJc0FyZ3VtZW50cyA6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG4gKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjMuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0J1ZmZlcihuZXcgQnVmZmVyKDIpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQnVmZmVyKG5ldyBVaW50OEFycmF5KDIpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0J1ZmZlciA9IG5hdGl2ZUlzQnVmZmVyIHx8IHN0dWJGYWxzZTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gKiBlcXVpdmFsZW50LlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBhcnJheSBidWZmZXJzLCBib29sZWFucyxcbiAqIGRhdGUgb2JqZWN0cywgZXJyb3Igb2JqZWN0cywgbWFwcywgbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcyxcbiAqIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZCBhcnJheXMuIGBPYmplY3RgIG9iamVjdHMgYXJlIGNvbXBhcmVkXG4gKiBieSB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET01cbiAqIG5vZGVzIGFyZSBjb21wYXJlZCBieSBzdHJpY3QgZXF1YWxpdHksIGkuZS4gYD09PWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBvYmplY3QgPT09IG90aGVyO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNFcXVhbCh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheXMgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cbiAgdmFyIHRhZyA9IGJhc2VHZXRUYWcodmFsdWUpO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNUeXBlZEFycmF5ID0gbm9kZUlzVHlwZWRBcnJheSA/IGJhc2VVbmFyeShub2RlSXNUeXBlZEFycmF5KSA6IGJhc2VJc1R5cGVkQXJyYXk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xuZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCkgOiBiYXNlS2V5cyhvYmplY3QpO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgZW1wdHkgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEzLjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBlbXB0eSBhcnJheS5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIGFycmF5cyA9IF8udGltZXMoMiwgXy5zdHViQXJyYXkpO1xuICpcbiAqIGNvbnNvbGUubG9nKGFycmF5cyk7XG4gKiAvLyA9PiBbW10sIFtdXVxuICpcbiAqIGNvbnNvbGUubG9nKGFycmF5c1swXSA9PT0gYXJyYXlzWzFdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIHN0dWJBcnJheSgpIHtcbiAgcmV0dXJuIFtdO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYGZhbHNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTMuMFxuICogQGNhdGVnb3J5IFV0aWxcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udGltZXMoMiwgXy5zdHViRmFsc2UpO1xuICogLy8gPT4gW2ZhbHNlLCBmYWxzZV1cbiAqL1xuZnVuY3Rpb24gc3R1YkZhbHNlKCkge1xuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFcXVhbDtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ubWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsImNvbnN0IGNyZWF0ZUFycmF5T2ZBdHRhY2tzID0gKCkgPT4ge1xuICBjb25zdCBhdHRhY2tzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgY29uc3QgeENvb3JkaW5hdGUgPSBpO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgY29uc3QgeUNvb3JkaW5hdGUgPSBqO1xuICAgICAgYXR0YWNrcy5wdXNoKFt4Q29vcmRpbmF0ZSwgeUNvb3JkaW5hdGVdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGF0dGFja3M7XG59O1xuXG5jb25zdCBwb3NzaWJsZUF0dGFja3MgPSBjcmVhdGVBcnJheU9mQXR0YWNrcygpO1xuXG5jb25zdCBnZXRWYWxpZEF0dGFjayA9IChhdHRhY2tzQXJyYXkpID0+XG4gIGF0dGFja3NBcnJheVxuICAgIC5zcGxpY2UoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXR0YWNrc0FycmF5Lmxlbmd0aCksIDEpXG4gICAgLmZsYXQoKTtcblxuZXhwb3J0IGRlZmF1bHQgcG9zc2libGVBdHRhY2tzO1xuZXhwb3J0IHsgZ2V0VmFsaWRBdHRhY2sgfTtcbiIsImltcG9ydCBwb3NzaWJsZUF0dGFja3MgZnJvbSBcIi4uL2dhbWVIZWxwZXJzL0FJLXBvc3NpYmxlLWF0dGFja3NcIjtcblxuY29uc3QgcGxheWVyQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllci1ib2FyZFwiKTtcbmNvbnN0IEFJQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpLWJvYXJkXCIpO1xuY29uc3QgYm9hcmRGb3JQbGFjZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYWNlLXNoaXAtYm9hcmRcIik7XG5cbmNvbnN0IGNyZWF0ZUJvYXJkcyA9IChjb29yZGluYXRlcykgPT4ge1xuICBjb29yZGluYXRlcy5mb3JFYWNoKChjb29yZGluYXRlKSA9PiB7XG4gICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICBzcXVhcmUuZGF0YXNldC54ID0gY29vcmRpbmF0ZVswXTtcbiAgICBzcXVhcmUuZGF0YXNldC55ID0gY29vcmRpbmF0ZVsxXTtcbiAgICBwbGF5ZXJCb2FyZC5hcHBlbmRDaGlsZChzcXVhcmUpO1xuICAgIGNvbnN0IHNxdWFyZUNsb25lMSA9IHNxdWFyZS5jbG9uZU5vZGUoKTtcbiAgICBBSUJvYXJkLmFwcGVuZENoaWxkKHNxdWFyZUNsb25lMSk7XG4gICAgY29uc3Qgc3F1YXJlQ2xvbmUyID0gc3F1YXJlLmNsb25lTm9kZSgpO1xuICAgIGJvYXJkRm9yUGxhY2VtZW50LmFwcGVuZENoaWxkKHNxdWFyZUNsb25lMik7XG4gIH0pO1xufTtcblxuY3JlYXRlQm9hcmRzKHBvc3NpYmxlQXR0YWNrcyk7XG5cbiIsImNvbnN0IFNoaXAgPSAobGVuZ3RoLCBuYW1lKSA9PiB7XG4gIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IGxlbmd0aDtcbiAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWU7XG4gIGxldCBoaXRzVGFrZW4gPSAwO1xuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaGl0c1Rha2VuICs9IDE7XG4gIH07XG4gIGNvbnN0IGdldEhpdHNUYWtlbiA9ICgpID0+IGhpdHNUYWtlbjtcblxuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBoaXRzVGFrZW4gPj0gbGVuZ3RoO1xuXG4gIHJldHVybiB7IGdldExlbmd0aCwgZ2V0TmFtZSwgaGl0LCBnZXRIaXRzVGFrZW4sIGlzU3VuayB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2hpcDtcbiIsIlxuICBjb25zdCBpbGxlZ2FsVmFyaWFudHMgPSBbXG4gICAgWzAsIC0xXSxcbiAgICBbLTEsIC0xXSxcbiAgICBbMSwgLTFdLFxuICAgIFstMSwgMF0sXG4gICAgWzEsIDBdLFxuICAgIFswLCAxXSxcbiAgICBbLTEsICsxXSxcbiAgICBbMSwgMV0sXG4gIF07XG5cbmNvbnN0IHNoaXBBcnJheSA9IFtcbiAge1xuICAgIG5hbWU6IFwiZGVzdHJveWVyXCIsXG4gICAgbGVuZ3RoOiAyLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJzdWJtYXJpbmVcIixcbiAgICBsZW5ndGg6IDMsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImNydWlzZXJcIixcbiAgICBsZW5ndGg6IDMsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImJhdHRsZXNoaXBcIixcbiAgICBsZW5ndGg6IDQsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImNhcnJpZXJcIixcbiAgICBsZW5ndGg6IDUsXG4gIH0sXG5dO1xuXG5leHBvcnQge2lsbGVnYWxWYXJpYW50cywgc2hpcEFycmF5fSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG5pbXBvcnQgaXNFcXVhbCBmcm9tIFwibG9kYXNoLmlzZXF1YWxcIjtcbmltcG9ydCBwb3NzaWJsZUF0dGFja3MgZnJvbSBcIi4uL2dhbWVIZWxwZXJzL0FJLXBvc3NpYmxlLWF0dGFja3NcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL2JhdHRsZXNoaXAtZmFjdG9yeVwiO1xuaW1wb3J0IHsgaWxsZWdhbFZhcmlhbnRzLCBzaGlwQXJyYXkgfSBmcm9tIFwiLi4vZ2FtZUhlbHBlcnMvcGxhY2VtZW50LWhlbHBlcnNcIjtcblxuY29uc3QgR2FtZWJvYXJkID0gKCkgPT4ge1xuICBjb25zdCBib2FyZCA9IFsuLi5wb3NzaWJsZUF0dGFja3NdO1xuICBjb25zdCBzaGlwTGlzdCA9IFtdO1xuICBjb25zdCBtaXNzZWRTaG90cyA9IG5ldyBTZXQoKTtcbiAgY29uc3QgdW5hdmFpbGFibGVDb29yZHMgPSBuZXcgU2V0KCk7XG5cbiAgY29uc3QgaXNJbkFuQXJyYXkgPSAoYXJyYXksIGVsZW1lbnQpID0+XG4gICAgYXJyYXkuc29tZSgoZWwpID0+IGlzRXF1YWwoZWwsIGVsZW1lbnQpKTtcblxuICBjb25zdCBnZW5lcmF0ZUlsbGVnYWxNb3ZlcyA9IChcbiAgICBjb29yZGluYXRlcyxcbiAgICBpbGxlZ2FsUG9zc2liaWxpdGVzID0gaWxsZWdhbFZhcmlhbnRzLFxuICAgIGlsbGVnYWxTZXQgPSB1bmF2YWlsYWJsZUNvb3Jkc1xuICApID0+IHtcbiAgICBjb29yZGluYXRlcy5mb3JFYWNoKChjb29yZCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbGxlZ2FsUG9zc2liaWxpdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGlsbGVnYWxWYXJpYW50ID0gaWxsZWdhbFBvc3NpYmlsaXRlc1tpXTtcbiAgICAgICAgY29uc3QgaWxsZWdhbE1vdmUgPSBbXG4gICAgICAgICAgY29vcmRbMF0gKyBpbGxlZ2FsVmFyaWFudFswXSxcbiAgICAgICAgICBjb29yZFsxXSArIGlsbGVnYWxWYXJpYW50WzFdLFxuICAgICAgICBdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaWxsZWdhbE1vdmVbMF0gPj0gMCAmJlxuICAgICAgICAgIGlsbGVnYWxNb3ZlWzBdIDw9IDkgJiZcbiAgICAgICAgICBpbGxlZ2FsTW92ZVsxXSA+PSAwICYmXG4gICAgICAgICAgaWxsZWdhbE1vdmVbMV0gPD0gOSAmJlxuICAgICAgICAgIGlzSW5BbkFycmF5KGNvb3JkaW5hdGVzLCBpbGxlZ2FsTW92ZSkgPT09IGZhbHNlXG4gICAgICAgIClcbiAgICAgICAgICBpbGxlZ2FsU2V0LmFkZChTdHJpbmcoaWxsZWdhbE1vdmUpKTtcbiAgICAgIH1cbiAgICAgIGlsbGVnYWxTZXQuYWRkKFN0cmluZyhjb29yZCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGlzSW5JbGxlZ2FsQ29vcmRzID0gKFxuICAgIHNoaXBQbGFjZW1lbnQsXG4gICAgaWxsZWdhbE1vdmVzID0gdW5hdmFpbGFibGVDb29yZHNcbiAgKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgZm9yIChjb25zdCBwbGFjZW1lbnQgb2Ygc2hpcFBsYWNlbWVudCkge1xuICAgICAgaWYgKGlsbGVnYWxNb3Zlcy5oYXMoU3RyaW5nKHBsYWNlbWVudCkpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IChsZW5ndGgsIG5hbWUsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3Qgc2hpcE9iamVjdCA9IHtcbiAgICAgIHNoaXA6IFNoaXAobGVuZ3RoLCBuYW1lKSxcbiAgICAgIGNvb3JkaW5hdGVzLFxuICAgIH07XG4gICAgc2hpcExpc3QucHVzaChzaGlwT2JqZWN0KTtcbiAgICBnZW5lcmF0ZUlsbGVnYWxNb3Zlcyhjb29yZGluYXRlcywgaWxsZWdhbFZhcmlhbnRzLCB1bmF2YWlsYWJsZUNvb3Jkcyk7XG4gIH07XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlKSA9PiB7XG4gICAgY29uc3QgaW5kZXhPZlNoaXAgPSBjaGVja0hpdChjb29yZGluYXRlKTtcbiAgICBpZiAoaW5kZXhPZlNoaXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgc2hpcEluTGlzdCA9IHNoaXBMaXN0W2luZGV4T2ZTaGlwXTtcbiAgICAgIHNoaXBJbkxpc3Quc2hpcC5oaXQoKTtcbiAgICAgIGlmIChzaGlwSW5MaXN0LnNoaXAuaXNTdW5rKCkpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGl0OiB0cnVlLFxuICAgICAgICAgIHN1bms6IHRydWUsXG4gICAgICAgICAgY29vcmRzOiBzaGlwSW5MaXN0LmNvb3JkaW5hdGVzLFxuICAgICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGl0OiB0cnVlLFxuICAgICAgICBzdW5rOiBmYWxzZSxcbiAgICAgICAgY29vcmRzOiBudWxsLFxuICAgICAgfTtcbiAgICB9XG4gICAgbWlzc2VkU2hvdHMuYWRkKFN0cmluZyhjb29yZGluYXRlKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhpdDogZmFsc2UsXG4gICAgICBzdW5rOiBmYWxzZSxcbiAgICAgIGNvb3JkczogbnVsbCxcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrSGl0ID0gKGNvb3JkaW5hdGUpID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIHNoaXBMaXN0KSB7XG4gICAgICBpZiAob2JqZWN0LmNvb3JkaW5hdGVzLnNvbWUoKHgpID0+IGlzRXF1YWwoY29vcmRpbmF0ZSwgeCkpKSByZXR1cm4gaW5kZXg7XG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBhcmVBbGxTdW5rID0gKCkgPT4gc2hpcExpc3QuZXZlcnkoKGVsKSA9PiBlbC5zaGlwLmlzU3VuaygpKTtcblxuICAvLyBBSSByYW5kb20gc2hpcCBwbGFjZW1lbnRcbiAgY29uc3QgZ2V0UmFuZG9tSW5kZXggPSAoaW5kZXhBcnJheSkgPT5cbiAgICBpbmRleEFycmF5LnNwbGljZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpbmRleEFycmF5Lmxlbmd0aCksIDEpO1xuXG4gIGNvbnN0IGdldFJhbmRvbUFsaWdubWVudCA9IChhbGlnbm1lbnRzID0gW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdKSA9PlxuICAgIGFsaWdubWVudHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuXG4gIGNvbnN0IGdldEluaXRpYWxCb2FyZFNxdWFyZSA9IChzaGlwTGVuZ3RoLCBhbGlnbm1lbnQpID0+IHtcbiAgICBsZXQgaW5pdGlhbEJvYXJkU3F1YXJlO1xuICAgIHdoaWxlIChcbiAgICAgIGluaXRpYWxCb2FyZFNxdWFyZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB1bmF2YWlsYWJsZUNvb3Jkcy5oYXMoU3RyaW5nKGluaXRpYWxCb2FyZFNxdWFyZSkpXG4gICAgKSB7XG4gICAgICBpZiAoYWxpZ25tZW50ID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgICBjb25zdCBob3Jpem9udGFsQ29vcmQgPVxuICAgICAgICAgIGJvYXJkW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChib2FyZC5sZW5ndGggLSBzaGlwTGVuZ3RoKSldO1xuXG4gICAgICAgIC8vIFByZXZlbnQgZnJvbSBnb2luZyBvdXQgb2YgYm91bmRzIG9uIHkgYXhpc1xuICAgICAgICBpZiAoaG9yaXpvbnRhbENvb3JkWzFdICsgc2hpcExlbmd0aCA8PSAxMClcbiAgICAgICAgICBpbml0aWFsQm9hcmRTcXVhcmUgPSBob3Jpem9udGFsQ29vcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBob3Jpem9udGFsQ29vcmQgPVxuICAgICAgICAgIGJvYXJkW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgoc2hpcExlbmd0aCArIDEpICogMTApKV07XG5cbiAgICAgICAgLy8gUHJldmVudCBmcm9tIGdvaW5nIG91dCBvZiBib3VuZHMgb24geCBheGlzXG4gICAgICAgIGlmIChob3Jpem9udGFsQ29vcmRbMF0gKyBzaGlwTGVuZ3RoIDw9IDEwKVxuICAgICAgICAgIGluaXRpYWxCb2FyZFNxdWFyZSA9IGhvcml6b250YWxDb29yZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluaXRpYWxCb2FyZFNxdWFyZTtcbiAgfTtcblxuICBjb25zdCBnZXRSYW5kb21QbGFjZW1lbnQgPSAoc2hpcExlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHBsYWNlbWVudCA9IFtdO1xuICAgIHdoaWxlIChwbGFjZW1lbnQubGVuZ3RoIDw9IDEpIHtcbiAgICAgIGNvbnN0IGFsaWdubWVudCA9IGdldFJhbmRvbUFsaWdubWVudCgpO1xuICAgICAgY29uc3QgaW5pdGlhbENvb3JkID0gZ2V0SW5pdGlhbEJvYXJkU3F1YXJlKHNoaXBMZW5ndGgsIGFsaWdubWVudCk7XG4gICAgICBwbGFjZW1lbnQucHVzaChpbml0aWFsQ29vcmQpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBjb25zdCBsYXN0SXRlbSA9IHBsYWNlbWVudFtwbGFjZW1lbnQubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChhbGlnbm1lbnQgPT09IFwiaG9yaXpvbnRhbFwiKVxuICAgICAgICAgIHBsYWNlbWVudC5wdXNoKFtpbml0aWFsQ29vcmRbMF0sIGluaXRpYWxDb29yZFsxXSArIGldKTtcbiAgICAgICAgZWxzZSBwbGFjZW1lbnQucHVzaChbaW5pdGlhbENvb3JkWzBdICsgaSwgaW5pdGlhbENvb3JkWzFdXSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNJbklsbGVnYWxDb29yZHMocGxhY2VtZW50KSkgcGxhY2VtZW50LnNwbGljZSgwKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUlsbGVnYWxNb3ZlcyhwbGFjZW1lbnQpO1xuICAgIHJldHVybiBwbGFjZW1lbnQ7XG4gIH07XG4gIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICBjb25zdCBpbmRleEFycmF5ID0gWzAsIDEsIDIsIDMsIDRdO1xuICAgIHdoaWxlIChpbmRleEFycmF5Lmxlbmd0aCkge1xuICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBnZXRSYW5kb21JbmRleChpbmRleEFycmF5KTtcbiAgICAgIGNvbnN0IHNoaXBIZWxwZXIgPSBzaGlwQXJyYXlbcmFuZG9tSW5kZXhdO1xuICAgICAgY29uc3Qgc2hpcFBsYWNlbWVudCA9IGdldFJhbmRvbVBsYWNlbWVudChzaGlwSGVscGVyLmxlbmd0aCk7XG4gICAgICBwbGFjZVNoaXAoc2hpcEhlbHBlci5sZW5ndGgsIHNoaXBIZWxwZXIubmFtZSwgc2hpcFBsYWNlbWVudCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIHNoaXBMaXN0LFxuICAgIHBsYWNlU2hpcCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIG1pc3NlZFNob3RzLFxuICAgIGFyZUFsbFN1bmssXG4gICAgdW5hdmFpbGFibGVDb29yZHMsXG4gICAgaXNJbklsbGVnYWxDb29yZHMsXG4gICAgcmFuZG9tbHlQbGFjZVNoaXBzLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR2FtZWJvYXJkO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuY29uc3QgUGxheWVyID0gKG5hbWUpID0+IHtcbiAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWU7XG4gIGNvbnN0IGJvYXJkID0gR2FtZWJvYXJkKCk7XG5cbiAgY29uc3QgYXR0YWNrID0gKGVuZW15LCBjb29yZGluYXRlKSA9PiBlbmVteS5ib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGUpO1xuXG4gIHJldHVybiB7IGdldE5hbWUsIGJvYXJkLCBhdHRhY2sgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vcGxheWVyLWZhY3RvcnlcIjtcbmltcG9ydCBwb3NzaWJsZUF0dGFja3MsIHtcbiAgZ2V0VmFsaWRBdHRhY2ssXG59IGZyb20gXCIuLi9nYW1lSGVscGVycy9BSS1wb3NzaWJsZS1hdHRhY2tzXCI7XG5cbmNvbnN0IHBsYXllckJvYXJkRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXItYm9hcmRcIik7XG5jb25zdCBBSUJvYXJkRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaS1ib2FyZFwiKTtcbmNvbnN0IHR1cm5EaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0dXJuLWRpc3BsYXlcIik7XG5jb25zdCBnYW1lSGFuZGxlciA9IChwbGF5ZXJOYW1lKSA9PiB7XG4gIGxldCBwbGF5ZXJUdXJuID0gXCJyZWFsUGxheWVyXCI7XG4gIGNvbnN0IHBsYXllcnMgPSB7XG4gICAgcmVhbFBsYXllcjogUGxheWVyKHBsYXllck5hbWUpLFxuICAgIEFJOiBQbGF5ZXIoXCJBSVwiKSxcbiAgfTtcblxuICAvLyBTaGlwIHBsYWNlbWVudFxuICAvKiBsZXQgaWxsZWdhbFNoaXBQbGFjZW1lbnRzID0gbmV3IFNldCgpOyAqL1xuXG4gIC8vIENoZWNrIGlmIHkgYXhpcyBpcyBvdXQgb2YgYm91bmRcblxuICBjb25zdCBpc091dE9mQm91bmRzID0gKGNvb3JkaW5hdGUsIHNoaXBMZW5ndGgsIGFsaWdubWVudCA9IFwiaG9yaXpvbnRhbFwiKSA9PlxuICAgIGFsaWdubWVudCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgID8gY29vcmRpbmF0ZVsxXSArIHNoaXBMZW5ndGggPiAxMFxuICAgICAgOiBjb29yZGluYXRlWzBdICsgc2hpcExlbmd0aCA+IDEwO1xuXG4gIGNvbnN0IGdlbmVyYXRlUGxhY2VtZW50ID0gKFxuICAgIGNvb3JkaW5hdGUsXG4gICAgc2hpcExlbmd0aCxcbiAgICBhbGlnbm1lbnQgPSBcImhvcml6b250YWxcIlxuICApID0+IHtcbiAgICBjb25zdCBzaGlwUGxhY2VtZW50ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhbGlnbm1lbnQgPT09IFwiaG9yaXpvbnRhbFwiKVxuICAgICAgICBzaGlwUGxhY2VtZW50LnB1c2goW2Nvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0gKyBpXSk7XG4gICAgICBlbHNlIHNoaXBQbGFjZW1lbnQucHVzaChbY29vcmRpbmF0ZVswXSArIGksIGNvb3JkaW5hdGVbMV1dKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoaXBQbGFjZW1lbnQ7XG4gIH07XG4gIC8qIFxuICBjb25zdCBpc0luQW5BcnJheSA9IChhcnJheSwgZWxlbWVudCkgPT5cbiAgICBhcnJheS5zb21lKChlbCkgPT4gaXNFcXVhbChlbCwgZWxlbWVudCkpOyAqL1xuXG4gIGNvbnN0IGlzU2hpcFBsYWNlZCA9IChuYW1lLCBzaGlwTGlzdCkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciAoY29uc3Qgc2hpcE9iamVjdCBvZiBzaGlwTGlzdCkge1xuICAgICAgaWYgKHNoaXBPYmplY3Quc2hpcC5nZXROYW1lKCkgPT09IG5hbWUpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgYW5jaG9yQVNoaXAgPSAoY2hvc2VuQ29vcmRpbmF0ZSwgc2hpcERhdGEpID0+IHtcbiAgICBpZiAoaXNPdXRPZkJvdW5kcyhjaG9zZW5Db29yZGluYXRlLCBzaGlwRGF0YS5sZW5ndGgsIHNoaXBEYXRhLmFsaWdubWVudCkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3Qgc2hpcFBsYWNlbWVudCA9IGdlbmVyYXRlUGxhY2VtZW50KFxuICAgICAgY2hvc2VuQ29vcmRpbmF0ZSxcbiAgICAgIHNoaXBEYXRhLmxlbmd0aCxcbiAgICAgIHNoaXBEYXRhLmFsaWdubWVudFxuICAgICk7XG4gICAgY29uc3QgcGxheWVyQm9hcmQgPSBwbGF5ZXJzLnJlYWxQbGF5ZXIuYm9hcmQ7XG4gICAgaWYgKFxuICAgICAgaXNTaGlwUGxhY2VkKHNoaXBEYXRhLm5hbWUsIHBsYXllckJvYXJkLnNoaXBMaXN0KSB8fFxuICAgICAgcGxheWVyQm9hcmQuaXNJbklsbGVnYWxDb29yZHMoc2hpcFBsYWNlbWVudClcbiAgICApXG4gICAgICByZXR1cm47XG5cbiAgICBwbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcERhdGEubGVuZ3RoLCBzaGlwRGF0YS5uYW1lLCBzaGlwUGxhY2VtZW50KTtcbiAgICByZXR1cm4gc2hpcFBsYWNlbWVudDtcbiAgfTtcblxuICBjb25zdCBjYW5TdGFydEdhbWUgPSAoKSA9PlxuICAgIHBsYXllcnMucmVhbFBsYXllci5ib2FyZC5zaGlwTGlzdC5sZW5ndGggPT09IDU7IC8qICAmJlxuICAgIHBsYXllcnMuQUkuYm9hcmQuc2hpcExpc3QubGVuZ3RoID09PSA1OyAqL1xuXG4gIC8vIEdhbWUgbG9vcFxuICBjb25zdCBBSVBvc3NpYmxlQXR0YWNrcyA9IHBvc3NpYmxlQXR0YWNrcztcblxuICBjb25zdCBnZXRUdXJuID0gKCkgPT4gcGxheWVyVHVybjtcblxuICBjb25zdCBjaGFuZ2VUdXJuID0gKCkgPT4ge1xuICAgIGlmIChwbGF5ZXJUdXJuID09PSBcInJlYWxQbGF5ZXJcIikgcGxheWVyVHVybiA9IFwiYWlcIjtcbiAgICBlbHNlIHBsYXllclR1cm4gPSBcInJlYWxQbGF5ZXJcIjtcbiAgICByZXR1cm4gcGxheWVyVHVybjtcbiAgfTtcblxuICBjb25zdCBjb252ZXJ0VG9Db29yZGluYXRlID0gKHRhcmdldCkgPT4gW1xuICAgIE51bWJlcih0YXJnZXQuZGF0YXNldC54KSxcbiAgICBOdW1iZXIodGFyZ2V0LmRhdGFzZXQueSksXG4gIF07XG5cbiAgY29uc3QgZGlzcGxheVdob3NlVHVybiA9ICh0dXJuKSA9PiB7XG4gICAgY29uc3Qgd2hvc2VUdXJuID0gdHVybjtcbiAgICBpZiAod2hvc2VUdXJuID09PSBcInJlYWxQbGF5ZXJcIikge1xuICAgICAgdHVybkRpc3BsYXkudGV4dENvbnRlbnQgPSBcImNvbXB1dGVyJ3MgdHVyblwiO1xuICAgIH0gZWxzZSB0dXJuRGlzcGxheS50ZXh0Q29udGVudCA9IFwicGxheWVyJ3MgdHVyblwiO1xuICB9O1xuXG4gIGNvbnN0IG1hcmtTdW5rID0gKGNvb3JkcywgdHVybikgPT4ge1xuICAgIGxldCBib2FyZFRvTWFyaztcbiAgICBpZiAodHVybiA9PT0gXCJyZWFsUGxheWVyXCIpIGJvYXJkVG9NYXJrID0gQUlCb2FyZERPTTtcbiAgICBlbHNlIGJvYXJkVG9NYXJrID0gcGxheWVyQm9hcmRET007XG5cbiAgICBjb29yZHMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgIGNvbnN0IGhpdFNxdWFyZSA9IGJvYXJkVG9NYXJrLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBbZGF0YS14PVwiJHtjb29yZFswXX1cIl1bZGF0YS15PVwiJHtjb29yZFsxXX1cIl1gXG4gICAgICApO1xuICAgICAgaGl0U3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzdW5rXCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IG1hcmtTcXVhcmUgPSAoY29vcmRpbmF0ZSwgeyBoaXQsIHN1bmssIGNvb3JkcyB9LCB0dXJuKSA9PiB7XG4gICAgbGV0IHRhcmdldDtcbiAgICBpZiAodHVybiA9PT0gXCJyZWFsUGxheWVyXCIpIHtcbiAgICAgIHRhcmdldCA9IEFJQm9hcmRET00ucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5zcXVhcmVbZGF0YS14PVwiJHtjb29yZGluYXRlWzBdfVwiXVtkYXRhLXk9XCIke2Nvb3JkaW5hdGVbMV19XCJdYFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHR1cm4gPT09IFwiYWlcIikge1xuICAgICAgdGFyZ2V0ID0gcGxheWVyQm9hcmRET00ucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5zcXVhcmVbZGF0YS14PVwiJHtjb29yZGluYXRlWzBdfVwiXVtkYXRhLXk9XCIke2Nvb3JkaW5hdGVbMV19XCJdYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaGl0ID09PSB0cnVlKSB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICBlbHNlIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwibWlzc2VkXCIpO1xuICB9O1xuXG4gIGNvbnN0IHBsYXllck1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICBBSUJvYXJkRE9NLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgY29uc3QgcGxheWVyVGFyZ2V0ID0gY29udmVydFRvQ29vcmRpbmF0ZShldmVudC50YXJnZXQpO1xuICAgIGNvbnN0IHBsYXllckF0dGFjayA9IHBsYXllcnMucmVhbFBsYXllci5hdHRhY2socGxheWVycy5BSSwgcGxheWVyVGFyZ2V0KTtcbiAgICBjb25zdCBjdXJyZW50VHVybiA9IGdldFR1cm4oKTtcbiAgICBkaXNwbGF5V2hvc2VUdXJuKGN1cnJlbnRUdXJuKTtcbiAgICBtYXJrU3F1YXJlKHBsYXllclRhcmdldCwgcGxheWVyQXR0YWNrLCBjdXJyZW50VHVybik7XG4gICAgaWYgKHBsYXllckF0dGFjay5zdW5rID09PSB0cnVlKSBtYXJrU3VuayhwbGF5ZXJBdHRhY2suY29vcmRzLCBjdXJyZW50VHVybik7XG4gICAgY2hhbmdlVHVybigpO1xuICB9O1xuXG4gIGNvbnN0IEFJTW92ZSA9ICgpID0+IHtcbiAgICBpZiAocGxheWVycy5BSS5ib2FyZC5hcmVBbGxTdW5rKCkpIHJldHVybjtcbiAgICBjb25zdCBjdXJyZW50VHVybiA9IGdldFR1cm4oKTtcbiAgICBjb25zdCBBSVRhcmdldCA9IGdldFZhbGlkQXR0YWNrKEFJUG9zc2libGVBdHRhY2tzKTtcbiAgICBjb25zdCBBSUF0dGFjayA9IHBsYXllcnMuQUkuYXR0YWNrKHBsYXllcnMucmVhbFBsYXllciwgQUlUYXJnZXQpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYXJrU3F1YXJlKEFJVGFyZ2V0LCBBSUF0dGFjaywgY3VycmVudFR1cm4pO1xuICAgICAgaWYgKEFJQXR0YWNrLnN1bmsgPT09IHRydWUpIG1hcmtTdW5rKEFJQXR0YWNrLmNvb3JkcywgY3VycmVudFR1cm4pO1xuICAgIH0sIDUwMCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRpc3BsYXlXaG9zZVR1cm4oY3VycmVudFR1cm4pO1xuICAgIH0sIDcwMCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNoYW5nZVR1cm4oKTtcbiAgICAgIEFJQm9hcmRET00uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9LCA4MDApO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0QXR0YWNrID0gKGUpID0+IHtcbiAgICBpZiAoXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtaXNzZWRcIikgfHxcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImhpdFwiKSB8fFxuICAgICAgZ2V0VHVybigpID09PSBcImFpXCIgfHxcbiAgICAgIHBsYXllcnMuQUkuYm9hcmQuYXJlQWxsU3VuaygpIHx8XG4gICAgICBwbGF5ZXJzLnJlYWxQbGF5ZXIuYm9hcmQuYXJlQWxsU3VuaygpXG4gICAgKVxuICAgICAgcmV0dXJuO1xuICAgIHBsYXllck1vdmUoZSk7XG4gICAgQUlNb3ZlKCk7XG4gIH07XG5cbiAgY29uc3QgaXNHYW1lT3ZlciA9ICgpID0+XG4gICAgcGxheWVycy5BSS5ib2FyZC5hcmVBbGxTdW5rKCkgfHwgcGxheWVycy5yZWFsUGxheWVyLmJvYXJkLmFyZUFsbFN1bmsoKTtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0QXR0YWNrLFxuICAgIHBsYXllcnMsXG4gICAgYW5jaG9yQVNoaXAsXG4gICAgY2FuU3RhcnRHYW1lLFxuICAgIGlzT3V0T2ZCb3VuZHMsXG4gICAgaXNHYW1lT3ZlcixcbiAgICBnZXRUdXJuLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZUhhbmRsZXI7XG4iLCJpbXBvcnQgZ2FtZUhhbmRsZXIgZnJvbSBcIi4uL21vZHVsZXMvZ2FtZUhhbmRsZXJcIjtcblxuY29uc3QgQUlCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWktYm9hcmRcIik7XG5jb25zdCBwbGF5ZXJCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyLWJvYXJkXCIpO1xuY29uc3QgYm9hcmRGb3JQbGFjZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYWNlLXNoaXAtYm9hcmRcIik7XG5jb25zdCBzaGlwc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hpcHMtY29udGFpbmVyXCIpO1xuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xuY29uc3QgYm9hcmRSZXNldEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm9hcmQtcmVzZXRcIik7XG5jb25zdCBnYW1lUmVzZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWUtcmVzZXRcIik7XG5jb25zdCBhbGlnbm1lbnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FsaWdubWVudC1idG5cIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5XCIpO1xuXG5jb25zdCBib2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib2FyZC1jcmVhdG9yXCIpO1xuY29uc3QgZ2FtZW92ZXJEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lb3Zlci1kaXNwbGF5XCIpO1xuY29uc3QgZ2FtZW92ZXJSZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWVvdmVyLXJlc3VsdFwiKTtcblxubGV0IG15R2FtZUhhbmRsZXIgPSBnYW1lSGFuZGxlcihcInRlc3RcIik7XG5cbmNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJTaGlwcyA9IG15R2FtZUhhbmRsZXIucGxheWVycy5yZWFsUGxheWVyLmJvYXJkLnNoaXBMaXN0O1xuICBwbGF5ZXJTaGlwcy5mb3JFYWNoKChzaGlwT2JqKSA9PiB7XG4gICAgc2hpcE9iai5jb29yZGluYXRlcy5mb3JFYWNoKChjb29yZCkgPT4ge1xuICAgICAgY29uc3QgY29vcmRPblBsYXllckJvYXJkID0gcGxheWVyQm9hcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFtkYXRhLXg9XCIke2Nvb3JkWzBdfVwiXVtkYXRhLXk9XCIke2Nvb3JkWzFdfVwiXWBcbiAgICAgICk7XG4gICAgICBjb29yZE9uUGxheWVyQm9hcmQuY2xhc3NMaXN0LmFkZChcImFuY2hvcmVkXCIpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmFsaWdubWVudEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBsZXQgYWxpZ25tZW50U3RhdGUgPSBzaGlwc0NvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5kYXRhc2V0LmFsaWdubWVudDtcbiAgY29uc3QgZXZlcnlTaGlwID0gQXJyYXkuZnJvbShzaGlwc0NvbnRhaW5lci5jaGlsZHJlbik7XG4gIGlmIChhbGlnbm1lbnRTdGF0ZSA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICBhbGlnbm1lbnRTdGF0ZSA9IFwidmVydGljYWxcIjtcbiAgICBldmVyeVNoaXAuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5kYXRhc2V0LmFsaWdubWVudCA9IGFsaWdubWVudFN0YXRlO1xuICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZXZlcnlTaGlwLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGFsaWdubWVudFN0YXRlID0gXCJob3Jpem9udGFsXCI7XG4gICAgICBzaGlwLmRhdGFzZXQuYWxpZ25tZW50ID0gYWxpZ25tZW50U3RhdGU7XG4gICAgICBzaGlwLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbmNvbnN0IGNhbkVuZEdhbWUgPSAoKSA9PiB7XG4gIC8vIEltcGxlbWVudCBtb2RhbCB0byBwb3AgdXAgaW5zdGVhZCBvZiBhbHRlclxuICBpZiAobXlHYW1lSGFuZGxlci5pc0dhbWVPdmVyKCkpIHtcbiAgICBpZiAobXlHYW1lSGFuZGxlci5wbGF5ZXJzLkFJLmJvYXJkLmFyZUFsbFN1bmsoKSlcbiAgICAgIGdhbWVvdmVyUmVzdWx0LnRleHRDb250ZW50ID0gXCJZb3Ugd29uXCI7XG4gICAgZWxzZSBnYW1lb3ZlclJlc3VsdC50ZXh0Q29udGVudCA9IFwiQUkgd29uXCI7XG5cbiAgICBnYW1lb3ZlckRpc3BsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH1cbn07XG5cbmNvbnN0IGF0dGFja2luZ1BoYXNlID0gKCkgPT4ge1xuICBib2FyZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgQUlCb2FyZC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICByZW5kZXJQbGF5ZXJTaGlwcygpO1xuICBteUdhbWVIYW5kbGVyLnBsYXllcnMuQUkuYm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKCk7XG4gIEFJQm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChcbiAgICAgIG15R2FtZUhhbmRsZXIuaXNHYW1lT3ZlcigpIHx8XG4gICAgICBteUdhbWVIYW5kbGVyLmdldFR1cm4oKSA9PT0gXCJhaVwiIHx8XG4gICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic3F1YXJlXCIpXG4gICAgKVxuICAgICAgcmV0dXJuO1xuICAgIG15R2FtZUhhbmRsZXIuc3RhcnRBdHRhY2soZSk7XG4gICAgY2FuRW5kR2FtZSgpO1xuICB9KTtcbn07XG5cbnN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gIC8vIElmIGNsaWNrZWQgYmVmb3JlIHBsYXlhYmxlLCBwcmV2ZW50cyBmcm9tIGZ1cnRociBwbGF5aW5nXG4gIFwiY2xpY2tcIixcbiAgKCkgPT4ge1xuICAgIGlmIChteUdhbWVIYW5kbGVyLmNhblN0YXJ0R2FtZSgpKSB7XG4gICAgICBhdHRhY2tpbmdQaGFzZSgpO1xuICAgIH1cbiAgfVxuKTtcblxuc2hpcHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZSkgPT4ge1xuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hpcFwiKSkge1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJzaGlwLWxlbmd0aFwiLCBlLnRhcmdldC5kYXRhc2V0Lmxlbmd0aCk7XG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInNoaXAtbmFtZVwiLCBlLnRhcmdldC5pZCk7XG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInNoaXAtYWxpZ25tZW50XCIsIGUudGFyZ2V0LmRhdGFzZXQuYWxpZ25tZW50KTtcbiAgfVxufSk7XG5cbmJvYXJkRm9yUGxhY2VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xuICBpZiAoXG4gICAgZS50YXJnZXQuaWQgPT09IFwicGxhY2Utc2hpcC1ib2FyZFwiIHx8XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYW5jaG9yZWRcIilcbiAgKVxuICAgIHJldHVybjtcbiAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcImRyYWdvdmVyXCIpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuYm9hcmRGb3JQbGFjZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCAoZSkgPT4ge1xuICBpZiAoZS50YXJnZXQuaWQgPT09IFwicGxhY2Utc2hpcC1ib2FyZFwiKSByZXR1cm47XG4gIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmNvbnN0IGFkZEFuY2hvcmVkQ2xhc3MgPSAoc2hpcFBsYWNlbWVudCkgPT4ge1xuICBzaGlwUGxhY2VtZW50LmZvckVhY2goKHBsYWNlbWVudCkgPT4ge1xuICAgIGNvbnN0IHBsYWNlbWVudEluRE9NID0gYm9hcmRGb3JQbGFjZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS14PVwiJHtwbGFjZW1lbnRbMF19XCJdW2RhdGEteT1cIiR7cGxhY2VtZW50WzFdfVwiXWBcbiAgICApO1xuICAgIHBsYWNlbWVudEluRE9NLmNsYXNzTGlzdC5hZGQoXCJhbmNob3JlZFwiKTtcbiAgfSk7XG59O1xuXG5ib2FyZEZvclBsYWNlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZSkgPT4ge1xuICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ292ZXJcIik7XG4gIGNvbnN0IG9iamVjdERhdGEgPSB7XG4gICAgbGVuZ3RoOiBOdW1iZXIoZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInNoaXAtbGVuZ3RoXCIpKSxcbiAgICBuYW1lOiBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwic2hpcC1uYW1lXCIpLFxuICAgIGFsaWdubWVudDogZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInNoaXAtYWxpZ25tZW50XCIpLFxuICB9O1xuICBjb25zdCBjaG9zZW5Db29yZGluYXRlID0gW1xuICAgIE51bWJlcihlLnRhcmdldC5kYXRhc2V0LngpLFxuICAgIE51bWJlcihlLnRhcmdldC5kYXRhc2V0LnkpLFxuICBdO1xuXG4gIGNvbnN0IHNoaXBMb2NhdGlvbiA9IG15R2FtZUhhbmRsZXIuYW5jaG9yQVNoaXAoY2hvc2VuQ29vcmRpbmF0ZSwgb2JqZWN0RGF0YSk7XG4gIGlmIChzaGlwTG9jYXRpb24pIHtcbiAgICBhZGRBbmNob3JlZENsYXNzKHNoaXBMb2NhdGlvbik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7b2JqZWN0RGF0YS5uYW1lfWApLmNsYXNzTGlzdC5hZGQoXCJyZW1vdmVkXCIpO1xuICB9XG59KTtcblxuY29uc3QgY2xhc3NSZW1vdmFsID0gKGNsYXNzTmFtZSwgY29udGFpbmVyID0gZG9jdW1lbnQpID0+IHtcbiAgY29uc3QgZWxlbWVudHNUb0NsZWFyID0gQXJyYXkuZnJvbShcbiAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgLiR7Y2xhc3NOYW1lfWApXG4gICk7XG4gIGVsZW1lbnRzVG9DbGVhci5mb3JFYWNoKChlbGVtZW50KSA9PiBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSk7XG59O1xuXG4vKiA8ISEhISEhISEhISBHYW1lIFJlc2V0ICEhISEhISEhISEhPiAqL1xuY29uc3QgcmVzZXRCb2FyZCA9ICgpID0+IHtcbiAgbXlHYW1lSGFuZGxlciA9IGdhbWVIYW5kbGVyKFwidGVzdFwiKTtcbiAgY2xhc3NSZW1vdmFsKFwiYW5jaG9yZWRcIik7XG4gIGNsYXNzUmVtb3ZhbChcInJlbW92ZWRcIiwgc2hpcHNDb250YWluZXIpO1xufTtcblxuYm9hcmRSZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICByZXNldEJvYXJkKCk7XG59KTtcblxuZ2FtZVJlc2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHJlc2V0Qm9hcmQoKTtcbiAgY2xhc3NSZW1vdmFsKFwiaGl0XCIpO1xuICBjbGFzc1JlbW92YWwoXCJtaXNzZWRcIik7XG4gIGNsYXNzUmVtb3ZhbChcInN1bmtcIik7XG4gIGdhbWVvdmVyRGlzcGxheS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICBib2FyZE1vZGFsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG59KTtcbiJdLCJuYW1lcyI6WyJzaGlwcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJzaGlwIiwic2hpcExlbmd0aCIsIk51bWJlciIsImRhdGFzZXQiLCJsZW5ndGgiLCJzZXRBdHRyaWJ1dGUiLCJhbGlnbm1lbnQiLCJpIiwic2hpcEJsb2NrIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiSEFTSF9VTkRFRklORUQiLCJNQVhfU0FGRV9JTlRFR0VSIiwiYXJnc1RhZyIsImFycmF5VGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsImZ1bmNUYWciLCJtYXBUYWciLCJudW1iZXJUYWciLCJvYmplY3RUYWciLCJwcm9taXNlVGFnIiwicmVnZXhwVGFnIiwic2V0VGFnIiwic3RyaW5nVGFnIiwid2Vha01hcFRhZyIsImFycmF5QnVmZmVyVGFnIiwiZGF0YVZpZXdUYWciLCJyZUlzSG9zdEN0b3IiLCJyZUlzVWludCIsInR5cGVkQXJyYXlUYWdzIiwiZnJlZUdsb2JhbCIsImciLCJPYmplY3QiLCJmcmVlU2VsZiIsInNlbGYiLCJyb290IiwiRnVuY3Rpb24iLCJmcmVlRXhwb3J0cyIsImV4cG9ydHMiLCJub2RlVHlwZSIsImZyZWVNb2R1bGUiLCJtb2R1bGUiLCJtb2R1bGVFeHBvcnRzIiwiZnJlZVByb2Nlc3MiLCJwcm9jZXNzIiwibm9kZVV0aWwiLCJiaW5kaW5nIiwiZSIsIm5vZGVJc1R5cGVkQXJyYXkiLCJpc1R5cGVkQXJyYXkiLCJhcnJheVNvbWUiLCJhcnJheSIsInByZWRpY2F0ZSIsImluZGV4IiwibWFwVG9BcnJheSIsIm1hcCIsInJlc3VsdCIsInNpemUiLCJ2YWx1ZSIsImtleSIsInNldFRvQXJyYXkiLCJzZXQiLCJ1aWQiLCJmdW5jIiwidHJhbnNmb3JtIiwiYXJyYXlQcm90byIsInByb3RvdHlwZSIsImZ1bmNQcm90byIsIm9iamVjdFByb3RvIiwiY29yZUpzRGF0YSIsImZ1bmNUb1N0cmluZyIsInRvU3RyaW5nIiwiaGFzT3duUHJvcGVydHkiLCJtYXNrU3JjS2V5IiwiZXhlYyIsImtleXMiLCJJRV9QUk9UTyIsIm5hdGl2ZU9iamVjdFRvU3RyaW5nIiwicmVJc05hdGl2ZSIsIlJlZ0V4cCIsImNhbGwiLCJyZXBsYWNlIiwiQnVmZmVyIiwidW5kZWZpbmVkIiwiU3ltYm9sIiwiVWludDhBcnJheSIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwic3BsaWNlIiwic3ltVG9TdHJpbmdUYWciLCJ0b1N0cmluZ1RhZyIsIm5hdGl2ZUdldFN5bWJvbHMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJuYXRpdmVJc0J1ZmZlciIsImlzQnVmZmVyIiwibmF0aXZlS2V5cyIsImFyZyIsIkRhdGFWaWV3IiwiZ2V0TmF0aXZlIiwiTWFwIiwiUHJvbWlzZSIsIlNldCIsIldlYWtNYXAiLCJuYXRpdmVDcmVhdGUiLCJkYXRhVmlld0N0b3JTdHJpbmciLCJ0b1NvdXJjZSIsIm1hcEN0b3JTdHJpbmciLCJwcm9taXNlQ3RvclN0cmluZyIsInNldEN0b3JTdHJpbmciLCJ3ZWFrTWFwQ3RvclN0cmluZyIsInN5bWJvbFByb3RvIiwic3ltYm9sVmFsdWVPZiIsInZhbHVlT2YiLCJIYXNoIiwiZW50cmllcyIsInRoaXMiLCJjbGVhciIsImVudHJ5IiwiTGlzdENhY2hlIiwiTWFwQ2FjaGUiLCJTZXRDYWNoZSIsInZhbHVlcyIsIl9fZGF0YV9fIiwiU3RhY2siLCJkYXRhIiwiYXNzb2NJbmRleE9mIiwiZXEiLCJiYXNlR2V0VGFnIiwiaXNPd24iLCJ0YWciLCJ1bm1hc2tlZCIsImdldFJhd1RhZyIsIm9iamVjdFRvU3RyaW5nIiwiYmFzZUlzQXJndW1lbnRzIiwiaXNPYmplY3RMaWtlIiwiYmFzZUlzRXF1YWwiLCJvdGhlciIsImJpdG1hc2siLCJjdXN0b21pemVyIiwic3RhY2siLCJvYmplY3QiLCJlcXVhbEZ1bmMiLCJvYmpJc0FyciIsImlzQXJyYXkiLCJvdGhJc0FyciIsIm9ialRhZyIsImdldFRhZyIsIm90aFRhZyIsIm9iaklzT2JqIiwib3RoSXNPYmoiLCJpc1NhbWVUYWciLCJlcXVhbEFycmF5cyIsImJ5dGVMZW5ndGgiLCJieXRlT2Zmc2V0IiwiYnVmZmVyIiwibmFtZSIsIm1lc3NhZ2UiLCJjb252ZXJ0IiwiaXNQYXJ0aWFsIiwic3RhY2tlZCIsImdldCIsImVxdWFsQnlUYWciLCJvYmpJc1dyYXBwZWQiLCJvdGhJc1dyYXBwZWQiLCJvYmpVbndyYXBwZWQiLCJvdGhVbndyYXBwZWQiLCJvYmpQcm9wcyIsImdldEFsbEtleXMiLCJvYmpMZW5ndGgiLCJza2lwQ3RvciIsIm9ialZhbHVlIiwib3RoVmFsdWUiLCJjb21wYXJlZCIsIm9iakN0b3IiLCJjb25zdHJ1Y3RvciIsIm90aEN0b3IiLCJlcXVhbE9iamVjdHMiLCJiYXNlSXNFcXVhbERlZXAiLCJhcnJMZW5ndGgiLCJvdGhMZW5ndGgiLCJzZWVuIiwiYXJyVmFsdWUiLCJvdGhJbmRleCIsImhhcyIsInB1c2giLCJrZXlzRnVuYyIsInN5bWJvbHNGdW5jIiwib2Zmc2V0IiwiYXJyYXlQdXNoIiwiYmFzZUdldEFsbEtleXMiLCJnZXRTeW1ib2xzIiwiZ2V0TWFwRGF0YSIsInR5cGUiLCJnZXRWYWx1ZSIsImlzT2JqZWN0IiwiaXNNYXNrZWQiLCJpc0Z1bmN0aW9uIiwidGVzdCIsImJhc2VJc05hdGl2ZSIsInBvcCIsInBhaXJzIiwiTEFSR0VfQVJSQVlfU0laRSIsInJlc0luZGV4Iiwic3ltYm9sIiwiYXJyYXlGaWx0ZXIiLCJpc0luZGV4IiwiQXJyYXlCdWZmZXIiLCJyZXNvbHZlIiwiQ3RvciIsImN0b3JTdHJpbmciLCJpc0FyZ3VtZW50cyIsImFyZ3VtZW50cyIsImlzTGVuZ3RoIiwiYmFzZVVuYXJ5IiwiaW5oZXJpdGVkIiwiaXNBcnIiLCJpc0FyZyIsImlzQnVmZiIsImlzVHlwZSIsInNraXBJbmRleGVzIiwibiIsIml0ZXJhdGVlIiwiYmFzZVRpbWVzIiwiU3RyaW5nIiwiYXJyYXlMaWtlS2V5cyIsImJhc2VLZXlzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnbG9iYWxUaGlzIiwid2luZG93Iiwib2JqIiwicHJvcCIsIm5tZCIsInBhdGhzIiwiY2hpbGRyZW4iLCJhdHRhY2tzIiwieENvb3JkaW5hdGUiLCJqIiwieUNvb3JkaW5hdGUiLCJjcmVhdGVBcnJheU9mQXR0YWNrcyIsInBsYXllckJvYXJkIiwiZ2V0RWxlbWVudEJ5SWQiLCJBSUJvYXJkIiwiYm9hcmRGb3JQbGFjZW1lbnQiLCJwb3NzaWJsZUF0dGFja3MiLCJjb29yZGluYXRlIiwic3F1YXJlIiwieCIsInkiLCJzcXVhcmVDbG9uZTEiLCJjbG9uZU5vZGUiLCJzcXVhcmVDbG9uZTIiLCJoaXRzVGFrZW4iLCJnZXRMZW5ndGgiLCJnZXROYW1lIiwiaGl0IiwiZ2V0SGl0c1Rha2VuIiwiaXNTdW5rIiwiaWxsZWdhbFZhcmlhbnRzIiwic2hpcEFycmF5IiwiYm9hcmQiLCJzaGlwTGlzdCIsIm1pc3NlZFNob3RzIiwidW5hdmFpbGFibGVDb29yZHMiLCJpc0luQW5BcnJheSIsImVsZW1lbnQiLCJzb21lIiwiZWwiLCJpc0VxdWFsIiwiZ2VuZXJhdGVJbGxlZ2FsTW92ZXMiLCJjb29yZGluYXRlcyIsImlsbGVnYWxQb3NzaWJpbGl0ZXMiLCJpbGxlZ2FsU2V0IiwiY29vcmQiLCJpbGxlZ2FsVmFyaWFudCIsImlsbGVnYWxNb3ZlIiwiaXNJbklsbGVnYWxDb29yZHMiLCJzaGlwUGxhY2VtZW50IiwiaWxsZWdhbE1vdmVzIiwicGxhY2VtZW50IiwicGxhY2VTaGlwIiwic2hpcE9iamVjdCIsIlNoaXAiLCJnZXRSYW5kb21JbmRleCIsImluZGV4QXJyYXkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRSYW5kb21BbGlnbm1lbnQiLCJhbGlnbm1lbnRzIiwiZ2V0SW5pdGlhbEJvYXJkU3F1YXJlIiwiaW5pdGlhbEJvYXJkU3F1YXJlIiwiaG9yaXpvbnRhbENvb3JkIiwiZ2V0UmFuZG9tUGxhY2VtZW50IiwiaW5pdGlhbENvb3JkIiwicmVjZWl2ZUF0dGFjayIsImluZGV4T2ZTaGlwIiwiY2hlY2tIaXQiLCJzaGlwSW5MaXN0Iiwic3VuayIsImNvb3JkcyIsImFyZUFsbFN1bmsiLCJldmVyeSIsInJhbmRvbWx5UGxhY2VTaGlwcyIsInJhbmRvbUluZGV4Iiwic2hpcEhlbHBlciIsIkdhbWVib2FyZCIsImF0dGFjayIsImVuZW15IiwicGxheWVyQm9hcmRET00iLCJBSUJvYXJkRE9NIiwidHVybkRpc3BsYXkiLCJwbGF5ZXJOYW1lIiwicGxheWVyVHVybiIsInBsYXllcnMiLCJyZWFsUGxheWVyIiwiUGxheWVyIiwiQUkiLCJpc091dE9mQm91bmRzIiwiQUlQb3NzaWJsZUF0dGFja3MiLCJnZXRUdXJuIiwiY2hhbmdlVHVybiIsImRpc3BsYXlXaG9zZVR1cm4iLCJ0dXJuIiwid2hvc2VUdXJuIiwidGV4dENvbnRlbnQiLCJtYXJrU3VuayIsImJvYXJkVG9NYXJrIiwicXVlcnlTZWxlY3RvciIsIm1hcmtTcXVhcmUiLCJ0YXJnZXQiLCJzdGFydEF0dGFjayIsImNvbnRhaW5zIiwiZXZlbnQiLCJyZW1vdmUiLCJwbGF5ZXJUYXJnZXQiLCJwbGF5ZXJBdHRhY2siLCJjdXJyZW50VHVybiIsInBsYXllck1vdmUiLCJhdHRhY2tzQXJyYXkiLCJBSVRhcmdldCIsImZsYXQiLCJBSUF0dGFjayIsInNldFRpbWVvdXQiLCJBSU1vdmUiLCJhbmNob3JBU2hpcCIsImNob3NlbkNvb3JkaW5hdGUiLCJzaGlwRGF0YSIsImdlbmVyYXRlUGxhY2VtZW50IiwiaXNTaGlwUGxhY2VkIiwiY2FuU3RhcnRHYW1lIiwiaXNHYW1lT3ZlciIsInNoaXBzQ29udGFpbmVyIiwic3RhcnRCdG4iLCJib2FyZFJlc2V0QnRuIiwiZ2FtZVJlc2V0QnRuIiwiYWxpZ25tZW50QnRuIiwib3ZlcmxheSIsImJvYXJkTW9kYWwiLCJnYW1lb3ZlckRpc3BsYXkiLCJnYW1lb3ZlclJlc3VsdCIsIm15R2FtZUhhbmRsZXIiLCJnYW1lSGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhbGlnbm1lbnRTdGF0ZSIsImZpcnN0RWxlbWVudENoaWxkIiwiZXZlcnlTaGlwIiwic2hpcE9iaiIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJwcmV2ZW50RGVmYXVsdCIsIm9iamVjdERhdGEiLCJnZXREYXRhIiwic2hpcExvY2F0aW9uIiwiY2xhc3NSZW1vdmFsIiwiY2xhc3NOYW1lIiwiY29udGFpbmVyIiwiZWxlbWVudHNUb0NsZWFyIiwicmVzZXRCb2FyZCJdLCJzb3VyY2VSb290IjoiIn0=