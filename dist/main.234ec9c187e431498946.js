(()=>{var t={183:()=>{var t=document.querySelectorAll(".ship");Array.from(t).forEach((function(t){var e=Number(t.dataset.length);t.setAttribute("draggable","true"),t.dataset.alignment="horizontal";for(var r=0;r<e;r+=1){var n=document.createElement("div");n.classList.add("block"),t.appendChild(n)}}))},307:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",i="[object Array]",c="[object Boolean]",u="[object Date]",s="[object Error]",l="[object Function]",f="[object Map]",d="[object Number]",h="[object Object]",v="[object Promise]",y="[object RegExp]",p="[object Set]",g="[object String]",m="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",A="[object DataView]",S=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[o]=w[i]=w[_]=w[c]=w[A]=w[u]=w[s]=w[l]=w[f]=w[d]=w[h]=w[y]=w[p]=w[g]=w[b]=!1;var L="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,E="object"==typeof self&&self&&self.Object===Object&&self,k=L||E||Function("return this")(),I=e&&!e.nodeType&&e,z=I&&t&&!t.nodeType&&t,O=z&&z.exports===I,P=O&&L.process,x=function(){try{return P&&P.binding&&P.binding("util")}catch(t){}}(),T=x&&x.isTypedArray;function q(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function M(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function B(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var C,N,D,$=Array.prototype,F=Function.prototype,U=Object.prototype,G=k["__core-js_shared__"],R=F.toString,V=U.hasOwnProperty,W=(C=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",H=U.toString,Y=RegExp("^"+R.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=O?k.Buffer:void 0,K=k.Symbol,Q=k.Uint8Array,X=U.propertyIsEnumerable,Z=$.splice,tt=K?K.toStringTag:void 0,et=Object.getOwnPropertySymbols,rt=J?J.isBuffer:void 0,nt=(N=Object.keys,D=Object,function(t){return N(D(t))}),at=xt(k,"DataView"),ot=xt(k,"Map"),it=xt(k,"Promise"),ct=xt(k,"Set"),ut=xt(k,"WeakMap"),st=xt(Object,"create"),lt=Bt(at),ft=Bt(ot),dt=Bt(it),ht=Bt(ct),vt=Bt(ut),yt=K?K.prototype:void 0,pt=yt?yt.valueOf:void 0;function gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function _t(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new bt;++e<r;)this.add(t[e])}function At(t){var e=this.__data__=new mt(t);this.size=e.size}function St(t,e){var r=Dt(t),n=!r&&Nt(t),a=!r&&!n&&$t(t),o=!r&&!n&&!a&&Vt(t),i=r||n||a||o,c=i?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!V.call(t,s)||i&&("length"==s||a&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Mt(s,u))||c.push(s);return c}function jt(t,e){for(var r=t.length;r--;)if(Ct(t[r][0],e))return r;return-1}function wt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":tt&&tt in Object(t)?function(t){var e=V.call(t,tt),r=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var a=H.call(t);n&&(e?t[tt]=r:delete t[tt]);return a}(t):function(t){return H.call(t)}(t)}function Lt(t){return Rt(t)&&wt(t)==o}function Et(t,e,r,n,a){return t===e||(null==t||null==e||!Rt(t)&&!Rt(e)?t!=t&&e!=e:function(t,e,r,n,a,l){var v=Dt(t),b=Dt(e),S=v?i:qt(t),j=b?i:qt(e),w=(S=S==o?h:S)==h,L=(j=j==o?h:j)==h,E=S==j;if(E&&$t(t)){if(!$t(e))return!1;v=!0,w=!1}if(E&&!w)return l||(l=new At),v||Vt(t)?zt(t,e,r,n,a,l):function(t,e,r,n,a,o,i){switch(r){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!o(new Q(t),new Q(e)));case c:case u:case d:return Ct(+t,+e);case s:return t.name==e.name&&t.message==e.message;case y:case g:return t==e+"";case f:var l=M;case p:var h=1&n;if(l||(l=B),t.size!=e.size&&!h)return!1;var v=i.get(t);if(v)return v==e;n|=2,i.set(t,e);var b=zt(l(t),l(e),n,a,o,i);return i.delete(t),b;case m:if(pt)return pt.call(t)==pt.call(e)}return!1}(t,e,S,r,n,a,l);if(!(1&r)){var k=w&&V.call(t,"__wrapped__"),I=L&&V.call(e,"__wrapped__");if(k||I){var z=k?t.value():t,O=I?e.value():e;return l||(l=new At),a(z,O,r,n,l)}}if(!E)return!1;return l||(l=new At),function(t,e,r,n,a,o){var i=1&r,c=Ot(t),u=c.length,s=Ot(e).length;if(u!=s&&!i)return!1;var l=u;for(;l--;){var f=c[l];if(!(i?f in e:V.call(e,f)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var h=!0;o.set(t,e),o.set(e,t);var v=i;for(;++l<u;){var y=t[f=c[l]],p=e[f];if(n)var g=i?n(p,y,f,e,t,o):n(y,p,f,t,e,o);if(!(void 0===g?y===p||a(y,p,r,n,o):g)){h=!1;break}v||(v="constructor"==f)}if(h&&!v){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(t),o.delete(e),h}(t,e,r,n,a,l)}(t,e,r,n,Et,a))}function kt(t){return!(!Gt(t)||function(t){return!!W&&W in t}(t))&&(Ft(t)?Y:S).test(Bt(t))}function It(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||U,e!==n)return nt(t);var e,r,n,a=[];for(var o in Object(t))V.call(t,o)&&"constructor"!=o&&a.push(o);return a}function zt(t,e,r,n,a,o){var i=1&r,c=t.length,u=e.length;if(c!=u&&!(i&&u>c))return!1;var s=o.get(t);if(s&&o.get(e))return s==e;var l=-1,f=!0,d=2&r?new _t:void 0;for(o.set(t,e),o.set(e,t);++l<c;){var h=t[l],v=e[l];if(n)var y=i?n(v,h,l,e,t,o):n(h,v,l,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(d){if(!q(e,(function(t,e){if(i=e,!d.has(i)&&(h===t||a(h,t,r,n,o)))return d.push(e);var i}))){f=!1;break}}else if(h!==v&&!a(h,v,r,n,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Ot(t){return function(t,e,r){var n=e(t);return Dt(t)?n:function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}(n,r(t))}(t,Wt,Tt)}function Pt(t,e){var r,n,a=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof e?"string":"hash"]:a.map}function xt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return kt(r)?r:void 0}gt.prototype.clear=function(){this.__data__=st?st(null):{},this.size=0},gt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gt.prototype.get=function(t){var e=this.__data__;if(st){var r=e[t];return r===n?void 0:r}return V.call(e,t)?e[t]:void 0},gt.prototype.has=function(t){var e=this.__data__;return st?void 0!==e[t]:V.call(e,t)},gt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=st&&void 0===e?n:e,this},mt.prototype.clear=function(){this.__data__=[],this.size=0},mt.prototype.delete=function(t){var e=this.__data__,r=jt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Z.call(e,r,1),--this.size,!0)},mt.prototype.get=function(t){var e=this.__data__,r=jt(e,t);return r<0?void 0:e[r][1]},mt.prototype.has=function(t){return jt(this.__data__,t)>-1},mt.prototype.set=function(t,e){var r=this.__data__,n=jt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new gt,map:new(ot||mt),string:new gt}},bt.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return Pt(this,t).get(t)},bt.prototype.has=function(t){return Pt(this,t).has(t)},bt.prototype.set=function(t,e){var r=Pt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,n),this},_t.prototype.has=function(t){return this.__data__.has(t)},At.prototype.clear=function(){this.__data__=new mt,this.size=0},At.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof mt){var n=r.__data__;if(!ot||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new bt(n)}return r.set(t,e),this.size=r.size,this};var Tt=et?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,a=0,o=[];++r<n;){var i=t[r];e(i,r,t)&&(o[a++]=i)}return o}(et(t),(function(e){return X.call(t,e)})))}:function(){return[]},qt=wt;function Mt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Bt(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ct(t,e){return t===e||t!=t&&e!=e}(at&&qt(new at(new ArrayBuffer(1)))!=A||ot&&qt(new ot)!=f||it&&qt(it.resolve())!=v||ct&&qt(new ct)!=p||ut&&qt(new ut)!=b)&&(qt=function(t){var e=wt(t),r=e==h?t.constructor:void 0,n=r?Bt(r):"";if(n)switch(n){case lt:return A;case ft:return f;case dt:return v;case ht:return p;case vt:return b}return e});var Nt=Lt(function(){return arguments}())?Lt:function(t){return Rt(t)&&V.call(t,"callee")&&!X.call(t,"callee")},Dt=Array.isArray;var $t=rt||function(){return!1};function Ft(t){if(!Gt(t))return!1;var e=wt(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Gt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}var Vt=T?function(t){return function(e){return t(e)}}(T):function(t){return Rt(t)&&Ut(t.length)&&!!w[wt(t)]};function Wt(t){return null!=(e=t)&&Ut(e.length)&&!Ft(e)?St(t):It(t);var e}t.exports=function(t,e){return Et(t,e)}}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n](o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=function(){for(var t=[],e=0;e<10;e++)for(var r=e,n=0;n<10;n++){var a=n;t.push([r,a])}return t}();const e=t;var n=document.getElementById("player-board"),a=document.getElementById("ai-board"),o=document.getElementById("place-ship-board");e.forEach((function(t){var e=document.createElement("div");e.classList.add("square"),e.dataset.x=t[0],e.dataset.y=t[1],n.appendChild(e);var r=e.cloneNode();a.appendChild(r);var i=e.cloneNode();o.appendChild(i)}));r(183);var i=r(307),c=r.n(i);const u=function(t,e){var r=0;return{getLength:function(){return t},getName:function(){return e},hit:function(){r+=1},getHitsTaken:function(){return r},isSunk:function(){return r>=t}}};var s=[[0,-1],[-1,-1],[1,-1],[-1,0],[1,0],[0,1],[-1,1],[1,1]],l=[{name:"destroyer",length:2},{name:"submarine",length:3},{name:"cruiser",length:3},{name:"battleship",length:4},{name:"carrier",length:5}];function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const y=function(){var t=d(e),r=[],n=new Set,a=new Set,o=function(t,e){return t.some((function(t){return c()(t,e)}))},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;t.forEach((function(n){for(var a=0;a<e.length;a++){var i=e[a],c=[n[0]+i[0],n[1]+i[1]];c[0]>=0&&c[0]<=9&&c[1]>=0&&c[1]<=9&&!1===o(t,c)&&r.add(String(c))}r.add(String(n))}))},h=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=f(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(r.has(String(o)))return!0}}catch(t){n.e(t)}finally{n.f()}return!1},v=function(t,e,n){var o={ship:u(t,e),coordinates:n};r.push(o),i(n,s,a)},y=function(t){var e,n=0,a=f(r);try{for(a.s();!(e=a.n()).done;){if(e.value.coordinates.some((function(e){return c()(t,e)})))return n;n+=1}}catch(t){a.e(t)}finally{a.f()}},p=function(t){return t.splice(Math.floor(Math.random()*t.length),1)},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["horizontal","vertical"];return t[Math.floor(2*Math.random())]},m=function(e,r){for(var n;void 0===n||a.has(String(n));)if("horizontal"===r){var o=t[Math.floor(Math.random()*(t.length-e))];o[1]+e<=10&&(n=o)}else{var i=t[Math.floor(Math.random()*(10*(e+1)))];i[0]+e<=10&&(n=i)}return n},b=function(t){for(var e=[];e.length<=1;){var r=g(),n=m(t,r);e.push(n);for(var a=1;a<t;a++)"horizontal"===r?e.push([n[0],n[1]+a]):e.push([n[0]+a,n[1]]);h(e)&&e.splice(0)}return i(e),e};return{shipList:r,placeShip:v,receiveAttack:function(t){var e=y(t);if(void 0!==e){var a=r[e];return a.ship.hit(),a.ship.isSunk()?{hit:!0,sunk:!0,coords:a.coordinates}:{hit:!0,sunk:!1,coords:null}}return n.add(String(t)),{hit:!1,sunk:!1,coords:null}},missedShots:n,areAllSunk:function(){return r.every((function(t){return t.ship.isSunk()}))},unavailableCoords:a,isInIllegalCoords:h,randomlyPlaceShips:function(){for(var t=[0,1,2,3,4];t.length;){var e=p(t),r=l[e],n=b(r.length);v(r.length,r.name,n)}}}};const p=function(t){return{getName:function(){return t},board:y(),attack:function(t,e){return t.board.receiveAttack(e)}}};function g(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=document.getElementById("player-board"),_=document.getElementById("ai-board"),A=document.getElementById("turn-display");const S=function(t){var r="realPlayer",n={realPlayer:p(t),AI:p("AI")},a=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal";return"horizontal"===r?t[1]+e>10:t[0]+e>10},o=e,i=function(){return r},c=function(){return r="realPlayer"===r?"ai":"realPlayer"},u=function(t){var e=t;A.textContent="realPlayer"===e?"computer's turn":"player's turn"},s=function(t,e){var r;r="realPlayer"===e?_:b,t.forEach((function(t){r.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("sunk")}))},l=function(t,e,r){var n,a=e.hit;e.sunk,e.coords;"realPlayer"===r?n=_.querySelector('.square[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')):"ai"===r&&(n=b.querySelector('.square[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]'))),!0===a?n.classList.add("hit"):n.classList.add("missed")},f=function(t){_.classList.remove("active");var e,r=(e=t.target,[Number(e.dataset.x),Number(e.dataset.y)]),a=n.realPlayer.attack(n.AI,r),o=i();u(o),l(r,a,o),!0===a.sunk&&s(a.coords,o),c()},d=function(){if(!n.AI.board.areAllSunk()){var t,e=i(),r=(t=o).splice(Math.floor(Math.random()*t.length),1).flat(),a=n.AI.attack(n.realPlayer,r);setTimeout((function(){l(r,a,e),!0===a.sunk&&s(a.coords,e)}),500),setTimeout((function(){u(e)}),700),setTimeout((function(){c(),_.classList.add("active")}),800)}};return{startAttack:function(t){t.target.classList.contains("missed")||t.target.classList.contains("hit")||"ai"===i()||n.AI.board.areAllSunk()||n.realPlayer.board.areAllSunk()||(f(t),d())},players:n,anchorAShip:function(t,e){if(!a(t,e.length,e.alignment)){var r=function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",n=[],a=0;a<e;a++)"horizontal"===r?n.push([t[0],t[1]+a]):n.push([t[0]+a,t[1]]);return n}(t,e.length,e.alignment),o=n.realPlayer.board;if(!function(t,e){var r,n=g(e);try{for(n.s();!(r=n.n()).done;)if(r.value.ship.getName()===t)return!0}catch(t){n.e(t)}finally{n.f()}return!1}(e.name,o.shipList)&&!o.isInIllegalCoords(r))return o.placeShip(e.length,e.name,r),r}},canStartGame:function(){return 5===n.realPlayer.board.shipList.length},isOutOfBounds:a,isGameOver:function(){return n.AI.board.areAllSunk()||n.realPlayer.board.areAllSunk()},getTurn:i}};var j=document.getElementById("ai-board"),w=document.getElementById("player-board"),L=document.getElementById("place-ship-board"),E=document.getElementById("ships-container"),k=document.querySelector("#start"),I=document.querySelector("#board-reset"),z=document.querySelector("#game-reset"),O=document.querySelector("#alignment-btn"),P=document.querySelector("#overlay"),x=document.querySelector("#board-creator"),T=document.querySelector("#gameover-display"),q=document.querySelector("#gameover-result"),M=S("test");O.addEventListener("click",(function(){var t=E.firstElementChild.dataset.alignment,e=Array.from(E.children);"horizontal"===t?(t="vertical",e.forEach((function(e){e.dataset.alignment=t,e.classList.add("vertical")}))):e.forEach((function(e){t="horizontal",e.dataset.alignment=t,e.classList.remove("vertical")}))}));var B=function(){x.classList.remove("active"),P.classList.remove("active"),j.classList.add("active"),M.players.realPlayer.board.shipList.forEach((function(t){t.coordinates.forEach((function(t){w.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("anchored")}))})),M.players.AI.board.randomlyPlaceShips(),j.addEventListener("mousedown",(function(t){!M.isGameOver()&&"ai"!==M.getTurn()&&t.target.classList.contains("square")&&(M.startAttack(t),M.isGameOver()&&(M.players.AI.board.areAllSunk()?q.textContent="You won":q.textContent="AI won",T.classList.add("active"),P.classList.add("active")))}))};k.addEventListener("click",(function(){M.canStartGame()&&B()})),E.addEventListener("dragstart",(function(t){t.target.classList.contains("ship")&&(t.dataTransfer.setData("ship-length",t.target.dataset.length),t.dataTransfer.setData("ship-name",t.target.id),t.dataTransfer.setData("ship-alignment",t.target.dataset.alignment))})),L.addEventListener("dragover",(function(t){"place-ship-board"===t.target.id||t.target.classList.contains("anchored")||(t.target.classList.add("dragover"),t.preventDefault())})),L.addEventListener("dragleave",(function(t){"place-ship-board"!==t.target.id&&(t.target.classList.remove("dragover"),t.preventDefault())}));L.addEventListener("drop",(function(t){t.target.classList.remove("dragover");var e={length:Number(t.dataTransfer.getData("ship-length")),name:t.dataTransfer.getData("ship-name"),alignment:t.dataTransfer.getData("ship-alignment")},r=[Number(t.target.dataset.x),Number(t.target.dataset.y)],n=M.anchorAShip(r,e);n&&(n.forEach((function(t){L.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("anchored")})),document.querySelector("#".concat(e.name)).classList.add("removed"))}));var C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=Array.from(e.querySelectorAll(".".concat(t)));r.forEach((function(e){return e.classList.remove(t)}))},N=function(){M=S("test"),C("anchored"),C("removed",E)};I.addEventListener("click",(function(){N()})),z.addEventListener("click",(function(){N(),C("hit"),C("missed"),C("sunk"),T.classList.remove("active"),x.classList.add("active")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YSxXQUNqQmxCLEVBQWdCQyxFQUFZLFFBQzVCYSxFQUFhLFlBQ2JBLEVBQWEsVUFBV3ZCLEVBQzFCLEVBRUFFLEVBQWNTLGlCQUFpQixTQUFTLFdBQ3RDZ0IsR0FDRixJQUVBeEIsRUFBYVEsaUJBQWlCLFNBQVMsV0FDckNnQixJQUNBSixFQUFhLE9BQ2JBLEVBQWEsVUFDYkEsRUFBYSxRQUNiaEIsRUFBZ0IvVyxVQUFVcVYsT0FBTyxVQUNqQ3lCLEVBQVc5VyxVQUFVQyxJQUFJLFNBQzNCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9ET00vZHJhZ0Ryb3BTaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL25vZGVfbW9kdWxlcy9sb2Rhc2guaXNlcXVhbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZUhlbHBlcnMvQUktcG9zc2libGUtYXR0YWNrcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9ET00vY3JlYXRlQm9hcmRET00uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9iYXR0bGVzaGlwLWZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZUhlbHBlcnMvcGxhY2VtZW50LWhlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9wbGF5ZXItZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9tb2R1bGVzL2dhbWVIYW5kbGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL0RPTS9ET01FdmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2hpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXBcIik7XG5cbmNvbnN0IGdlbmVyYXRlU2hpcEJsb2NrcyA9ICgpID0+IHtcbiAgQXJyYXkuZnJvbShzaGlwcykuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgIGNvbnN0IHNoaXBMZW5ndGggPSBOdW1iZXIoc2hpcC5kYXRhc2V0Lmxlbmd0aCk7XG4gICAgc2hpcC5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwgXCJ0cnVlXCIpOyBcbiAgICBzaGlwLmRhdGFzZXQuYWxpZ25tZW50ID0gXCJob3Jpem9udGFsXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHNoaXBCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBzaGlwQmxvY2suY2xhc3NMaXN0LmFkZChcImJsb2NrXCIpO1xuICAgICAgc2hpcC5hcHBlbmRDaGlsZChzaGlwQmxvY2spO1xuICAgIH1cbiAgfSk7XG59O1xuZ2VuZXJhdGVTaGlwQmxvY2tzKCk7XG4iLCIvKipcbiAqIExvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcy5mb3VuZGF0aW9uLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbnZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqL1xudmFyIENPTVBBUkVfUEFSVElBTF9GTEFHID0gMSxcbiAgICBDT01QQVJFX1VOT1JERVJFRF9GTEFHID0gMjtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGFzeW5jVGFnID0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHByb21pc2VUYWcgPSAnW29iamVjdCBQcm9taXNlXScsXG4gICAgcHJveHlUYWcgPSAnW29iamVjdCBQcm94eV0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nLFxuICAgIHVuZGVmaW5lZFRhZyA9ICdbb2JqZWN0IFVuZGVmaW5lZF0nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID1cbnR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID1cbnR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cbnR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID1cbnR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi9cbnZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqL1xudmFyIGZyZWVNb2R1bGUgPSBmcmVlRXhwb3J0cyAmJiB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi9cbnZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHByb2Nlc3NgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlUHJvY2VzcyA9IG1vZHVsZUV4cG9ydHMgJiYgZnJlZUdsb2JhbC5wcm9jZXNzO1xuXG4vKiogVXNlZCB0byBhY2Nlc3MgZmFzdGVyIE5vZGUuanMgaGVscGVycy4gKi9cbnZhciBub2RlVXRpbCA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZnJlZVByb2Nlc3MgJiYgZnJlZVByb2Nlc3MuYmluZGluZyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nKCd1dGlsJyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59KCkpO1xuXG4vKiBOb2RlLmpzIGhlbHBlciByZWZlcmVuY2VzLiAqL1xudmFyIG5vZGVJc1R5cGVkQXJyYXkgPSBub2RlVXRpbCAmJiBub2RlVXRpbC5pc1R5cGVkQXJyYXk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZpbHRlcmAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yXG4gKiBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheUZpbHRlcihhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGgsXG4gICAgICByZXNJbmRleCA9IDAsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXN1bHRbcmVzSW5kZXgrK10gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYXBwZW5kLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5UHVzaChhcnJheSwgdmFsdWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aCxcbiAgICAgIG9mZnNldCA9IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGFycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAqIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuYXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0b3JpbmcgbWV0YWRhdGEuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FwcGVkIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlVW5hcnkoZnVuYykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZnVuYyh2YWx1ZSk7XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgYGNhY2hlYCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gY2FjaGUgVGhlIGNhY2hlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGNhY2hlSGFzKGNhY2hlLCBrZXkpIHtcbiAgcmV0dXJuIGNhY2hlLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUga2V5LXZhbHVlIHBhaXJzLlxuICovXG5mdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG1hcC5zaXplKTtcblxuICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gW2tleSwgdmFsdWVdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYHNldGAgdG8gYW4gYXJyYXkgb2YgaXRzIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gc2V0VG9BcnJheShzZXQpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cbiAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLFxuICAgIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgICBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi9cbnZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmdW5jVG9TdHJpbmcgPSBmdW5jUHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG52YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcbiAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xufSgpKTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIEJ1ZmZlciA9IG1vZHVsZUV4cG9ydHMgPyByb290LkJ1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBTeW1ib2wgPSByb290LlN5bWJvbCxcbiAgICBVaW50OEFycmF5ID0gcm9vdC5VaW50OEFycmF5LFxuICAgIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsXG4gICAgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2UsXG4gICAgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVHZXRTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxcbiAgICBuYXRpdmVJc0J1ZmZlciA9IEJ1ZmZlciA/IEJ1ZmZlci5pc0J1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIERhdGFWaWV3ID0gZ2V0TmF0aXZlKHJvb3QsICdEYXRhVmlldycpLFxuICAgIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyksXG4gICAgUHJvbWlzZSA9IGdldE5hdGl2ZShyb290LCAnUHJvbWlzZScpLFxuICAgIFNldCA9IGdldE5hdGl2ZShyb290LCAnU2V0JyksXG4gICAgV2Vha01hcCA9IGdldE5hdGl2ZShyb290LCAnV2Vha01hcCcpLFxuICAgIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1hcHMsIHNldHMsIGFuZCB3ZWFrbWFwcy4gKi9cbnZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG4gICAgbWFwQ3RvclN0cmluZyA9IHRvU291cmNlKE1hcCksXG4gICAgcHJvbWlzZUN0b3JTdHJpbmcgPSB0b1NvdXJjZShQcm9taXNlKSxcbiAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcbiAgICB3ZWFrTWFwQ3RvclN0cmluZyA9IHRvU291cmNlKFdlYWtNYXApO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgSGFzaFxuICovXG5mdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hEZWxldGUoa2V5KSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG4gIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuICAgIHZhciByZXN1bHQgPSBkYXRhW2tleV07XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSA/IGRhdGFba2V5XSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHJldHVybiBuYXRpdmVDcmVhdGUgPyAoZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIDogaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICB0aGlzLnNpemUgKz0gdGhpcy5oYXMoa2V5KSA/IDAgOiAxO1xuICBkYXRhW2tleV0gPSAobmF0aXZlQ3JlYXRlICYmIHZhbHVlID09PSB1bmRlZmluZWQpID8gSEFTSF9VTkRFRklORUQgOiB2YWx1ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gW107XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICBkYXRhLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgfVxuICAtLXRoaXMuc2l6ZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgICsrdGhpcy5zaXplO1xuICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMuX19kYXRhX18gPSB7XG4gICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcbiAgICAnc3RyaW5nJzogbmV3IEhhc2hcbiAgfTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgcmVzdWx0ID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xuICB0aGlzLnNpemUgLT0gcmVzdWx0ID8gMSA6IDA7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLFxuICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTtcblxuICBkYXRhLnNldChrZXksIHZhbHVlKTtcbiAgdGhpcy5zaXplICs9IGRhdGEuc2l6ZSA9PSBzaXplID8gMCA6IDE7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuTWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gbWFwQ2FjaGVDbGVhcjtcbk1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcbk1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcbk1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBDYWNoZUhhcztcbk1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblxuLyoqXG4gKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSB2YWx1ZXMgPT0gbnVsbCA/IDAgOiB2YWx1ZXMubGVuZ3RoO1xuXG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGU7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGB2YWx1ZWAgdG8gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBhZGRcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQGFsaWFzIHB1c2hcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNhY2hlLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlQWRkKHZhbHVlKSB7XG4gIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlSGFzKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5TZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBzZXRDYWNoZUhhcztcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xuICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqL1xuZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGU7XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICByZXN1bHQgPSBkYXRhWydkZWxldGUnXShrZXkpO1xuXG4gIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBzdGFjayB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHN0YWNrIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzdGFja1NldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBMaXN0Q2FjaGUpIHtcbiAgICB2YXIgcGFpcnMgPSBkYXRhLl9fZGF0YV9fO1xuICAgIGlmICghTWFwIHx8IChwYWlycy5sZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIC0gMSkpIHtcbiAgICAgIHBhaXJzLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgICAgIHRoaXMuc2l6ZSA9ICsrZGF0YS5zaXplO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRhdGEgPSB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlKHBhaXJzKTtcbiAgfVxuICBkYXRhLnNldChrZXksIHZhbHVlKTtcbiAgdGhpcy5zaXplID0gZGF0YS5zaXplO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC5cblN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5TdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5TdGFjay5wcm90b3R5cGUuZ2V0ID0gc3RhY2tHZXQ7XG5TdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5TdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZUtleXModmFsdWUsIGluaGVyaXRlZCkge1xuICB2YXIgaXNBcnIgPSBpc0FycmF5KHZhbHVlKSxcbiAgICAgIGlzQXJnID0gIWlzQXJyICYmIGlzQXJndW1lbnRzKHZhbHVlKSxcbiAgICAgIGlzQnVmZiA9ICFpc0FyciAmJiAhaXNBcmcgJiYgaXNCdWZmZXIodmFsdWUpLFxuICAgICAgaXNUeXBlID0gIWlzQXJyICYmICFpc0FyZyAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheSh2YWx1ZSksXG4gICAgICBza2lwSW5kZXhlcyA9IGlzQXJyIHx8IGlzQXJnIHx8IGlzQnVmZiB8fCBpc1R5cGUsXG4gICAgICByZXN1bHQgPSBza2lwSW5kZXhlcyA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZykgOiBbXSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoXG4gICAgICAgICAgIC8vIFNhZmFyaSA5IGhhcyBlbnVtZXJhYmxlIGBhcmd1bWVudHMubGVuZ3RoYCBpbiBzdHJpY3QgbW9kZS5cbiAgICAgICAgICAga2V5ID09ICdsZW5ndGgnIHx8XG4gICAgICAgICAgIC8vIE5vZGUuanMgMC4xMCBoYXMgZW51bWVyYWJsZSBub24taW5kZXggcHJvcGVydGllcyBvbiBidWZmZXJzLlxuICAgICAgICAgICAoaXNCdWZmICYmIChrZXkgPT0gJ29mZnNldCcgfHwga2V5ID09ICdwYXJlbnQnKSkgfHxcbiAgICAgICAgICAgLy8gUGhhbnRvbUpTIDIgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gdHlwZWQgYXJyYXlzLlxuICAgICAgICAgICAoaXNUeXBlICYmIChrZXkgPT0gJ2J1ZmZlcicgfHwga2V5ID09ICdieXRlTGVuZ3RoJyB8fCBrZXkgPT0gJ2J5dGVPZmZzZXQnKSkgfHxcbiAgICAgICAgICAgLy8gU2tpcCBpbmRleCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICBpc0luZGV4KGtleSwgbGVuZ3RoKVxuICAgICAgICApKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICogQHBhcmFtIHsqfSBrZXkgVGhlIGtleSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAqL1xuZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKGVxKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHtcbiAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0QWxsS2V5c2AgYW5kIGBnZXRBbGxLZXlzSW5gIHdoaWNoIHVzZXNcbiAqIGBrZXlzRnVuY2AgYW5kIGBzeW1ib2xzRnVuY2AgdG8gZ2V0IHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZFxuICogc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN5bWJvbHNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXNGdW5jLCBzeW1ib2xzRnVuYykge1xuICB2YXIgcmVzdWx0ID0ga2V5c0Z1bmMob2JqZWN0KTtcbiAgcmV0dXJuIGlzQXJyYXkob2JqZWN0KSA/IHJlc3VsdCA6IGFycmF5UHVzaChyZXN1bHQsIHN5bWJvbHNGdW5jKG9iamVjdCkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZztcbiAgfVxuICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgPyBnZXRSYXdUYWcodmFsdWUpXG4gICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNBcmd1bWVudHNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqL1xuZnVuY3Rpb24gYmFzZUlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IGFyZ3NUYWc7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuICogYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuXG4gKiAgMSAtIFVub3JkZXJlZCBjb21wYXJpc29uXG4gKiAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdExpa2UodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBiYXNlSXNFcXVhbCwgc3RhY2spO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICBvYmpUYWcgPSBvYmpJc0FyciA/IGFycmF5VGFnIDogZ2V0VGFnKG9iamVjdCksXG4gICAgICBvdGhUYWcgPSBvdGhJc0FyciA/IGFycmF5VGFnIDogZ2V0VGFnKG90aGVyKTtcblxuICBvYmpUYWcgPSBvYmpUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG9ialRhZztcbiAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG5cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiBpc0J1ZmZlcihvYmplY3QpKSB7XG4gICAgaWYgKCFpc0J1ZmZlcihvdGhlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgb2JqSXNBcnIgPSB0cnVlO1xuICAgIG9iaklzT2JqID0gZmFsc2U7XG4gIH1cbiAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHtcbiAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgIHJldHVybiAob2JqSXNBcnIgfHwgaXNUeXBlZEFycmF5KG9iamVjdCkpXG4gICAgICA/IGVxdWFsQXJyYXlzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spXG4gICAgICA6IGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTtcbiAgfVxuICBpZiAoIShiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUcpKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuICAgICAgICAgIG90aFVud3JhcHBlZCA9IG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlcjtcblxuICAgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFpc1NhbWVUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgcmV0dXJuIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gaXNGdW5jdGlvbih2YWx1ZSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNUeXBlZEFycmF5YCB3aXRob3V0IE5vZGUuanMgb3B0aW1pemF0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiZcbiAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3NbYmFzZUdldFRhZyh2YWx1ZSldO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG4gIGlmICghaXNQcm90b3R5cGUob2JqZWN0KSkge1xuICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYga2V5ICE9ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSB0cnVlLFxuICAgICAgc2VlbiA9IChiaXRtYXNrICYgQ09NUEFSRV9VTk9SREVSRURfRkxBRykgPyBuZXcgU2V0Q2FjaGUgOiB1bmRlZmluZWQ7XG5cbiAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG4gIHN0YWNrLnNldChvdGhlciwgYXJyYXkpO1xuXG4gIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIGFyclZhbHVlLCBpbmRleCwgb3RoZXIsIGFycmF5LCBzdGFjaylcbiAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICBpZiAoY29tcGFyZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGNvbXBhcmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoc2Vlbikge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlLCBvdGhJbmRleCkge1xuICAgICAgICAgICAgaWYgKCFjYWNoZUhhcyhzZWVuLCBvdGhJbmRleCkgJiZcbiAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlZW4ucHVzaChvdGhJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShcbiAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcbiAgICAgICAgICAgIGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKVxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10oYXJyYXkpO1xuICBzdGFja1snZGVsZXRlJ10ob3RoZXIpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgZGF0YVZpZXdUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG4gICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIC8vIENvZXJjZSBib29sZWFucyB0byBgMWAgb3IgYDBgIGFuZCBkYXRlcyB0byBtaWxsaXNlY29uZHMuXG4gICAgICAvLyBJbnZhbGlkIGRhdGVzIGFyZSBjb2VyY2VkIHRvIGBOYU5gLlxuICAgICAgcmV0dXJuIGVxKCtvYmplY3QsICtvdGhlcik7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cyxcbiAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcbiAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcblxuICAgIGNhc2UgbWFwVGFnOlxuICAgICAgdmFyIGNvbnZlcnQgPSBtYXBUb0FycmF5O1xuXG4gICAgY2FzZSBzZXRUYWc6XG4gICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHO1xuICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXG4gICAgICBpZiAob2JqZWN0LnNpemUgIT0gb3RoZXIuc2l6ZSAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gICAgICBpZiAoc3RhY2tlZCkge1xuICAgICAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgICAgIH1cbiAgICAgIGJpdG1hc2sgfD0gQ09NUEFSRV9VTk9SREVSRURfRkxBRztcblxuICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG4gICAgICB2YXIgcmVzdWx0ID0gZXF1YWxBcnJheXMoY29udmVydChvYmplY3QpLCBjb252ZXJ0KG90aGVyKSwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7XG4gICAgICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlIHN5bWJvbFRhZzpcbiAgICAgIGlmIChzeW1ib2xWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyxcbiAgICAgIG9ialByb3BzID0gZ2V0QWxsS2V5cyhvYmplY3QpLFxuICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgb3RoUHJvcHMgPSBnZXRBbGxLZXlzKG90aGVyKSxcbiAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIGlmICghKGlzUGFydGlhbCA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcbiAgaWYgKHN0YWNrZWQgJiYgc3RhY2suZ2V0KG90aGVyKSkge1xuICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICB9XG4gIHZhciByZXN1bHQgPSB0cnVlO1xuICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG4gIHN0YWNrLnNldChvdGhlciwgb2JqZWN0KTtcblxuICB2YXIgc2tpcEN0b3IgPSBpc1BhcnRpYWw7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUsIGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoIShjb21wYXJlZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSlcbiAgICAgICAgICA6IGNvbXBhcmVkXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgfVxuICBpZiAocmVzdWx0ICYmICFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuICBzdGFja1snZGVsZXRlJ10ob3RoZXIpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2Ygb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMuXG4gKi9cbmZ1bmN0aW9uIGdldEFsbEtleXMob2JqZWN0KSB7XG4gIHJldHVybiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXMsIGdldFN5bWJvbHMpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hcCBkYXRhLlxuICovXG5mdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG4gIHZhciBkYXRhID0gbWFwLl9fZGF0YV9fO1xuICByZXR1cm4gaXNLZXlhYmxlKGtleSlcbiAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuICAgIDogZGF0YS5tYXA7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG4gIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7XG4gIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcblxuICB0cnkge1xuICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgaWYgKHVubWFza2VkKSB7XG4gICAgaWYgKGlzT3duKSB7XG4gICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBzeW1ib2xzLlxuICovXG52YXIgZ2V0U3ltYm9scyA9ICFuYXRpdmVHZXRTeW1ib2xzID8gc3R1YkFycmF5IDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgcmV0dXJuIGFycmF5RmlsdGVyKG5hdGl2ZUdldFN5bWJvbHMob2JqZWN0KSwgZnVuY3Rpb24oc3ltYm9sKSB7XG4gICAgcmV0dXJuIHByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob2JqZWN0LCBzeW1ib2wpO1xuICB9KTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbnZhciBnZXRUYWcgPSBiYXNlR2V0VGFnO1xuXG4vLyBGYWxsYmFjayBmb3IgZGF0YSB2aWV3cywgbWFwcywgc2V0cywgYW5kIHdlYWsgbWFwcyBpbiBJRSAxMSBhbmQgcHJvbWlzZXMgaW4gTm9kZS5qcyA8IDYuXG5pZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcbiAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBiYXNlR2V0VGFnKHZhbHVlKSxcbiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6ICcnO1xuXG4gICAgaWYgKGN0b3JTdHJpbmcpIHtcbiAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuICAgICAgICBjYXNlIGRhdGFWaWV3Q3RvclN0cmluZzogcmV0dXJuIGRhdGFWaWV3VGFnO1xuICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG4gICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuICAgICAgICBjYXNlIHNldEN0b3JTdHJpbmc6IHJldHVybiBzZXRUYWc7XG4gICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcbiAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBpcyBtYXNrZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyB1c2luZyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYGZ1bmNgIHRvIGl0cyBzb3VyY2UgY29kZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuICovXG5mdW5jdGlvbiB0b1NvdXJjZShmdW5jKSB7XG4gIGlmIChmdW5jICE9IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZ1bmNUb1N0cmluZy5jYWxsKGZ1bmMpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAoZnVuYyArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBhXG4gKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FyZ3VtZW50cyA9IGJhc2VJc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA/IGJhc2VJc0FyZ3VtZW50cyA6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG4gKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjMuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0J1ZmZlcihuZXcgQnVmZmVyKDIpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQnVmZmVyKG5ldyBVaW50OEFycmF5KDIpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0J1ZmZlciA9IG5hdGl2ZUlzQnVmZmVyIHx8IHN0dWJGYWxzZTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gKiBlcXVpdmFsZW50LlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBhcnJheSBidWZmZXJzLCBib29sZWFucyxcbiAqIGRhdGUgb2JqZWN0cywgZXJyb3Igb2JqZWN0cywgbWFwcywgbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcyxcbiAqIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZCBhcnJheXMuIGBPYmplY3RgIG9iamVjdHMgYXJlIGNvbXBhcmVkXG4gKiBieSB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET01cbiAqIG5vZGVzIGFyZSBjb21wYXJlZCBieSBzdHJpY3QgZXF1YWxpdHksIGkuZS4gYD09PWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBvYmplY3QgPT09IG90aGVyO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNFcXVhbCh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheXMgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cbiAgdmFyIHRhZyA9IGJhc2VHZXRUYWcodmFsdWUpO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNUeXBlZEFycmF5ID0gbm9kZUlzVHlwZWRBcnJheSA/IGJhc2VVbmFyeShub2RlSXNUeXBlZEFycmF5KSA6IGJhc2VJc1R5cGVkQXJyYXk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xuZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCkgOiBiYXNlS2V5cyhvYmplY3QpO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgZW1wdHkgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEzLjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBlbXB0eSBhcnJheS5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIGFycmF5cyA9IF8udGltZXMoMiwgXy5zdHViQXJyYXkpO1xuICpcbiAqIGNvbnNvbGUubG9nKGFycmF5cyk7XG4gKiAvLyA9PiBbW10sIFtdXVxuICpcbiAqIGNvbnNvbGUubG9nKGFycmF5c1swXSA9PT0gYXJyYXlzWzFdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIHN0dWJBcnJheSgpIHtcbiAgcmV0dXJuIFtdO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYGZhbHNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTMuMFxuICogQGNhdGVnb3J5IFV0aWxcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udGltZXMoMiwgXy5zdHViRmFsc2UpO1xuICogLy8gPT4gW2ZhbHNlLCBmYWxzZV1cbiAqL1xuZnVuY3Rpb24gc3R1YkZhbHNlKCkge1xuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFcXVhbDtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ubWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsImNvbnN0IGNyZWF0ZUFycmF5T2ZBdHRhY2tzID0gKCkgPT4ge1xuICBjb25zdCBhdHRhY2tzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgY29uc3QgeENvb3JkaW5hdGUgPSBpO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgY29uc3QgeUNvb3JkaW5hdGUgPSBqO1xuICAgICAgYXR0YWNrcy5wdXNoKFt4Q29vcmRpbmF0ZSwgeUNvb3JkaW5hdGVdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGF0dGFja3M7XG59O1xuXG5jb25zdCBwb3NzaWJsZUF0dGFja3MgPSBjcmVhdGVBcnJheU9mQXR0YWNrcygpO1xuXG5jb25zdCBnZXRWYWxpZEF0dGFjayA9IChhdHRhY2tzQXJyYXkpID0+XG4gIGF0dGFja3NBcnJheVxuICAgIC5zcGxpY2UoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXR0YWNrc0FycmF5Lmxlbmd0aCksIDEpXG4gICAgLmZsYXQoKTtcblxuZXhwb3J0IGRlZmF1bHQgcG9zc2libGVBdHRhY2tzO1xuZXhwb3J0IHsgZ2V0VmFsaWRBdHRhY2sgfTtcbiIsImltcG9ydCBwb3NzaWJsZUF0dGFja3MgZnJvbSBcIi4uL2dhbWVIZWxwZXJzL0FJLXBvc3NpYmxlLWF0dGFja3NcIjtcblxuY29uc3QgcGxheWVyQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllci1ib2FyZFwiKTtcbmNvbnN0IEFJQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpLWJvYXJkXCIpO1xuY29uc3QgYm9hcmRGb3JQbGFjZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYWNlLXNoaXAtYm9hcmRcIik7XG5cbmNvbnN0IGNyZWF0ZUJvYXJkcyA9IChjb29yZGluYXRlcykgPT4ge1xuICBjb29yZGluYXRlcy5mb3JFYWNoKChjb29yZGluYXRlKSA9PiB7XG4gICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICBzcXVhcmUuZGF0YXNldC54ID0gY29vcmRpbmF0ZVswXTtcbiAgICBzcXVhcmUuZGF0YXNldC55ID0gY29vcmRpbmF0ZVsxXTtcbiAgICBwbGF5ZXJCb2FyZC5hcHBlbmRDaGlsZChzcXVhcmUpO1xuICAgIGNvbnN0IHNxdWFyZUNsb25lMSA9IHNxdWFyZS5jbG9uZU5vZGUoKTtcbiAgICBBSUJvYXJkLmFwcGVuZENoaWxkKHNxdWFyZUNsb25lMSk7XG4gICAgY29uc3Qgc3F1YXJlQ2xvbmUyID0gc3F1YXJlLmNsb25lTm9kZSgpO1xuICAgIGJvYXJkRm9yUGxhY2VtZW50LmFwcGVuZENoaWxkKHNxdWFyZUNsb25lMik7XG4gIH0pO1xufTtcblxuY3JlYXRlQm9hcmRzKHBvc3NpYmxlQXR0YWNrcyk7XG5cbiIsImNvbnN0IFNoaXAgPSAobGVuZ3RoLCBuYW1lKSA9PiB7XG4gIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IGxlbmd0aDtcbiAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWU7XG4gIGxldCBoaXRzVGFrZW4gPSAwO1xuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaGl0c1Rha2VuICs9IDE7XG4gIH07XG4gIGNvbnN0IGdldEhpdHNUYWtlbiA9ICgpID0+IGhpdHNUYWtlbjtcblxuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBoaXRzVGFrZW4gPj0gbGVuZ3RoO1xuXG4gIHJldHVybiB7IGdldExlbmd0aCwgZ2V0TmFtZSwgaGl0LCBnZXRIaXRzVGFrZW4sIGlzU3VuayB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2hpcDtcbiIsIlxuICBjb25zdCBpbGxlZ2FsVmFyaWFudHMgPSBbXG4gICAgWzAsIC0xXSxcbiAgICBbLTEsIC0xXSxcbiAgICBbMSwgLTFdLFxuICAgIFstMSwgMF0sXG4gICAgWzEsIDBdLFxuICAgIFswLCAxXSxcbiAgICBbLTEsICsxXSxcbiAgICBbMSwgMV0sXG4gIF07XG5cbmNvbnN0IHNoaXBBcnJheSA9IFtcbiAge1xuICAgIG5hbWU6IFwiZGVzdHJveWVyXCIsXG4gICAgbGVuZ3RoOiAyLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJzdWJtYXJpbmVcIixcbiAgICBsZW5ndGg6IDMsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImNydWlzZXJcIixcbiAgICBsZW5ndGg6IDMsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImJhdHRsZXNoaXBcIixcbiAgICBsZW5ndGg6IDQsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImNhcnJpZXJcIixcbiAgICBsZW5ndGg6IDUsXG4gIH0sXG5dO1xuXG5leHBvcnQge2lsbGVnYWxWYXJpYW50cywgc2hpcEFycmF5fSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG5pbXBvcnQgaXNFcXVhbCBmcm9tIFwibG9kYXNoLmlzZXF1YWxcIjtcbmltcG9ydCBwb3NzaWJsZUF0dGFja3MgZnJvbSBcIi4uL2dhbWVIZWxwZXJzL0FJLXBvc3NpYmxlLWF0dGFja3NcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL2JhdHRsZXNoaXAtZmFjdG9yeVwiO1xuaW1wb3J0IHsgaWxsZWdhbFZhcmlhbnRzLCBzaGlwQXJyYXkgfSBmcm9tIFwiLi4vZ2FtZUhlbHBlcnMvcGxhY2VtZW50LWhlbHBlcnNcIjtcblxuY29uc3QgR2FtZWJvYXJkID0gKCkgPT4ge1xuICBjb25zdCBib2FyZCA9IFsuLi5wb3NzaWJsZUF0dGFja3NdO1xuICBjb25zdCBzaGlwTGlzdCA9IFtdO1xuICBjb25zdCBtaXNzZWRTaG90cyA9IG5ldyBTZXQoKTtcbiAgY29uc3QgdW5hdmFpbGFibGVDb29yZHMgPSBuZXcgU2V0KCk7XG5cbiAgY29uc3QgaXNJbkFuQXJyYXkgPSAoYXJyYXksIGVsZW1lbnQpID0+XG4gICAgYXJyYXkuc29tZSgoZWwpID0+IGlzRXF1YWwoZWwsIGVsZW1lbnQpKTtcblxuICBjb25zdCBnZW5lcmF0ZUlsbGVnYWxNb3ZlcyA9IChcbiAgICBjb29yZGluYXRlcyxcbiAgICBpbGxlZ2FsUG9zc2liaWxpdGVzID0gaWxsZWdhbFZhcmlhbnRzLFxuICAgIGlsbGVnYWxTZXQgPSB1bmF2YWlsYWJsZUNvb3Jkc1xuICApID0+IHtcbiAgICBjb29yZGluYXRlcy5mb3JFYWNoKChjb29yZCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbGxlZ2FsUG9zc2liaWxpdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGlsbGVnYWxWYXJpYW50ID0gaWxsZWdhbFBvc3NpYmlsaXRlc1tpXTtcbiAgICAgICAgY29uc3QgaWxsZWdhbE1vdmUgPSBbXG4gICAgICAgICAgY29vcmRbMF0gKyBpbGxlZ2FsVmFyaWFudFswXSxcbiAgICAgICAgICBjb29yZFsxXSArIGlsbGVnYWxWYXJpYW50WzFdLFxuICAgICAgICBdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaWxsZWdhbE1vdmVbMF0gPj0gMCAmJlxuICAgICAgICAgIGlsbGVnYWxNb3ZlWzBdIDw9IDkgJiZcbiAgICAgICAgICBpbGxlZ2FsTW92ZVsxXSA+PSAwICYmXG4gICAgICAgICAgaWxsZWdhbE1vdmVbMV0gPD0gOSAmJlxuICAgICAgICAgIGlzSW5BbkFycmF5KGNvb3JkaW5hdGVzLCBpbGxlZ2FsTW92ZSkgPT09IGZhbHNlXG4gICAgICAgIClcbiAgICAgICAgICBpbGxlZ2FsU2V0LmFkZChTdHJpbmcoaWxsZWdhbE1vdmUpKTtcbiAgICAgIH1cbiAgICAgIGlsbGVnYWxTZXQuYWRkKFN0cmluZyhjb29yZCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGlzSW5JbGxlZ2FsQ29vcmRzID0gKFxuICAgIHNoaXBQbGFjZW1lbnQsXG4gICAgaWxsZWdhbE1vdmVzID0gdW5hdmFpbGFibGVDb29yZHNcbiAgKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgZm9yIChjb25zdCBwbGFjZW1lbnQgb2Ygc2hpcFBsYWNlbWVudCkge1xuICAgICAgaWYgKGlsbGVnYWxNb3Zlcy5oYXMoU3RyaW5nKHBsYWNlbWVudCkpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IChsZW5ndGgsIG5hbWUsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3Qgc2hpcE9iamVjdCA9IHtcbiAgICAgIHNoaXA6IFNoaXAobGVuZ3RoLCBuYW1lKSxcbiAgICAgIGNvb3JkaW5hdGVzLFxuICAgIH07XG4gICAgc2hpcExpc3QucHVzaChzaGlwT2JqZWN0KTtcbiAgICBnZW5lcmF0ZUlsbGVnYWxNb3Zlcyhjb29yZGluYXRlcywgaWxsZWdhbFZhcmlhbnRzLCB1bmF2YWlsYWJsZUNvb3Jkcyk7XG4gIH07XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlKSA9PiB7XG4gICAgY29uc3QgaW5kZXhPZlNoaXAgPSBjaGVja0hpdChjb29yZGluYXRlKTtcbiAgICBpZiAoaW5kZXhPZlNoaXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgc2hpcEluTGlzdCA9IHNoaXBMaXN0W2luZGV4T2ZTaGlwXTtcbiAgICAgIHNoaXBJbkxpc3Quc2hpcC5oaXQoKTtcbiAgICAgIGlmIChzaGlwSW5MaXN0LnNoaXAuaXNTdW5rKCkpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGl0OiB0cnVlLFxuICAgICAgICAgIHN1bms6IHRydWUsXG4gICAgICAgICAgY29vcmRzOiBzaGlwSW5MaXN0LmNvb3JkaW5hdGVzLFxuICAgICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGl0OiB0cnVlLFxuICAgICAgICBzdW5rOiBmYWxzZSxcbiAgICAgICAgY29vcmRzOiBudWxsLFxuICAgICAgfTtcbiAgICB9XG4gICAgbWlzc2VkU2hvdHMuYWRkKFN0cmluZyhjb29yZGluYXRlKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhpdDogZmFsc2UsXG4gICAgICBzdW5rOiBmYWxzZSxcbiAgICAgIGNvb3JkczogbnVsbCxcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrSGl0ID0gKGNvb3JkaW5hdGUpID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIHNoaXBMaXN0KSB7XG4gICAgICBpZiAob2JqZWN0LmNvb3JkaW5hdGVzLnNvbWUoKHgpID0+IGlzRXF1YWwoY29vcmRpbmF0ZSwgeCkpKSByZXR1cm4gaW5kZXg7XG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBhcmVBbGxTdW5rID0gKCkgPT4gc2hpcExpc3QuZXZlcnkoKGVsKSA9PiBlbC5zaGlwLmlzU3VuaygpKTtcblxuICAvLyBBSSByYW5kb20gc2hpcCBwbGFjZW1lbnRcbiAgY29uc3QgZ2V0UmFuZG9tSW5kZXggPSAoaW5kZXhBcnJheSkgPT5cbiAgICBpbmRleEFycmF5LnNwbGljZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpbmRleEFycmF5Lmxlbmd0aCksIDEpO1xuXG4gIGNvbnN0IGdldFJhbmRvbUFsaWdubWVudCA9IChhbGlnbm1lbnRzID0gW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdKSA9PlxuICAgIGFsaWdubWVudHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuXG4gIGNvbnN0IGdldEluaXRpYWxCb2FyZFNxdWFyZSA9IChzaGlwTGVuZ3RoLCBhbGlnbm1lbnQpID0+IHtcbiAgICBsZXQgaW5pdGlhbEJvYXJkU3F1YXJlO1xuICAgIHdoaWxlIChcbiAgICAgIGluaXRpYWxCb2FyZFNxdWFyZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB1bmF2YWlsYWJsZUNvb3Jkcy5oYXMoU3RyaW5nKGluaXRpYWxCb2FyZFNxdWFyZSkpXG4gICAgKSB7XG4gICAgICBpZiAoYWxpZ25tZW50ID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgICBjb25zdCBob3Jpem9udGFsQ29vcmQgPVxuICAgICAgICAgIGJvYXJkW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChib2FyZC5sZW5ndGggLSBzaGlwTGVuZ3RoKSldO1xuXG4gICAgICAgIC8vIFByZXZlbnQgZnJvbSBnb2luZyBvdXQgb2YgYm91bmRzIG9uIHkgYXhpc1xuICAgICAgICBpZiAoaG9yaXpvbnRhbENvb3JkWzFdICsgc2hpcExlbmd0aCA8PSAxMClcbiAgICAgICAgICBpbml0aWFsQm9hcmRTcXVhcmUgPSBob3Jpem9udGFsQ29vcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBob3Jpem9udGFsQ29vcmQgPVxuICAgICAgICAgIGJvYXJkW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgoc2hpcExlbmd0aCArIDEpICogMTApKV07XG5cbiAgICAgICAgLy8gUHJldmVudCBmcm9tIGdvaW5nIG91dCBvZiBib3VuZHMgb24geCBheGlzXG4gICAgICAgIGlmIChob3Jpem9udGFsQ29vcmRbMF0gKyBzaGlwTGVuZ3RoIDw9IDEwKVxuICAgICAgICAgIGluaXRpYWxCb2FyZFNxdWFyZSA9IGhvcml6b250YWxDb29yZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluaXRpYWxCb2FyZFNxdWFyZTtcbiAgfTtcblxuICBjb25zdCBnZXRSYW5kb21QbGFjZW1lbnQgPSAoc2hpcExlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHBsYWNlbWVudCA9IFtdO1xuICAgIHdoaWxlIChwbGFjZW1lbnQubGVuZ3RoIDw9IDEpIHtcbiAgICAgIGNvbnN0IGFsaWdubWVudCA9IGdldFJhbmRvbUFsaWdubWVudCgpO1xuICAgICAgY29uc3QgaW5pdGlhbENvb3JkID0gZ2V0SW5pdGlhbEJvYXJkU3F1YXJlKHNoaXBMZW5ndGgsIGFsaWdubWVudCk7XG4gICAgICBwbGFjZW1lbnQucHVzaChpbml0aWFsQ29vcmQpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBjb25zdCBsYXN0SXRlbSA9IHBsYWNlbWVudFtwbGFjZW1lbnQubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChhbGlnbm1lbnQgPT09IFwiaG9yaXpvbnRhbFwiKVxuICAgICAgICAgIHBsYWNlbWVudC5wdXNoKFtpbml0aWFsQ29vcmRbMF0sIGluaXRpYWxDb29yZFsxXSArIGldKTtcbiAgICAgICAgZWxzZSBwbGFjZW1lbnQucHVzaChbaW5pdGlhbENvb3JkWzBdICsgaSwgaW5pdGlhbENvb3JkWzFdXSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNJbklsbGVnYWxDb29yZHMocGxhY2VtZW50KSkgcGxhY2VtZW50LnNwbGljZSgwKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUlsbGVnYWxNb3ZlcyhwbGFjZW1lbnQpO1xuICAgIHJldHVybiBwbGFjZW1lbnQ7XG4gIH07XG4gIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICBjb25zdCBpbmRleEFycmF5ID0gWzAsIDEsIDIsIDMsIDRdO1xuICAgIHdoaWxlIChpbmRleEFycmF5Lmxlbmd0aCkge1xuICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBnZXRSYW5kb21JbmRleChpbmRleEFycmF5KTtcbiAgICAgIGNvbnN0IHNoaXBIZWxwZXIgPSBzaGlwQXJyYXlbcmFuZG9tSW5kZXhdO1xuICAgICAgY29uc3Qgc2hpcFBsYWNlbWVudCA9IGdldFJhbmRvbVBsYWNlbWVudChzaGlwSGVscGVyLmxlbmd0aCk7XG4gICAgICBwbGFjZVNoaXAoc2hpcEhlbHBlci5sZW5ndGgsIHNoaXBIZWxwZXIubmFtZSwgc2hpcFBsYWNlbWVudCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIHNoaXBMaXN0LFxuICAgIHBsYWNlU2hpcCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIG1pc3NlZFNob3RzLFxuICAgIGFyZUFsbFN1bmssXG4gICAgdW5hdmFpbGFibGVDb29yZHMsXG4gICAgaXNJbklsbGVnYWxDb29yZHMsXG4gICAgcmFuZG9tbHlQbGFjZVNoaXBzLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR2FtZWJvYXJkO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuY29uc3QgUGxheWVyID0gKG5hbWUpID0+IHtcbiAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWU7XG4gIGNvbnN0IGJvYXJkID0gR2FtZWJvYXJkKCk7XG5cbiAgY29uc3QgYXR0YWNrID0gKGVuZW15LCBjb29yZGluYXRlKSA9PiBlbmVteS5ib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGUpO1xuXG4gIHJldHVybiB7IGdldE5hbWUsIGJvYXJkLCBhdHRhY2sgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vcGxheWVyLWZhY3RvcnlcIjtcbmltcG9ydCBwb3NzaWJsZUF0dGFja3MsIHtcbiAgZ2V0VmFsaWRBdHRhY2ssXG59IGZyb20gXCIuLi9nYW1lSGVscGVycy9BSS1wb3NzaWJsZS1hdHRhY2tzXCI7XG5cbmNvbnN0IHBsYXllckJvYXJkRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXItYm9hcmRcIik7XG5jb25zdCBBSUJvYXJkRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaS1ib2FyZFwiKTtcbmNvbnN0IHR1cm5EaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0dXJuLWRpc3BsYXlcIik7XG5jb25zdCBnYW1lSGFuZGxlciA9IChwbGF5ZXJOYW1lKSA9PiB7XG4gIGxldCBwbGF5ZXJUdXJuID0gXCJyZWFsUGxheWVyXCI7XG4gIGNvbnN0IHBsYXllcnMgPSB7XG4gICAgcmVhbFBsYXllcjogUGxheWVyKHBsYXllck5hbWUpLFxuICAgIEFJOiBQbGF5ZXIoXCJBSVwiKSxcbiAgfTtcblxuICAvLyBTaGlwIHBsYWNlbWVudFxuICAvKiBsZXQgaWxsZWdhbFNoaXBQbGFjZW1lbnRzID0gbmV3IFNldCgpOyAqL1xuXG4gIC8vIENoZWNrIGlmIHkgYXhpcyBpcyBvdXQgb2YgYm91bmRcblxuICBjb25zdCBpc091dE9mQm91bmRzID0gKGNvb3JkaW5hdGUsIHNoaXBMZW5ndGgsIGFsaWdubWVudCA9IFwiaG9yaXpvbnRhbFwiKSA9PlxuICAgIGFsaWdubWVudCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgID8gY29vcmRpbmF0ZVsxXSArIHNoaXBMZW5ndGggPiAxMFxuICAgICAgOiBjb29yZGluYXRlWzBdICsgc2hpcExlbmd0aCA+IDEwO1xuXG4gIGNvbnN0IGdlbmVyYXRlUGxhY2VtZW50ID0gKFxuICAgIGNvb3JkaW5hdGUsXG4gICAgc2hpcExlbmd0aCxcbiAgICBhbGlnbm1lbnQgPSBcImhvcml6b250YWxcIlxuICApID0+IHtcbiAgICBjb25zdCBzaGlwUGxhY2VtZW50ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhbGlnbm1lbnQgPT09IFwiaG9yaXpvbnRhbFwiKVxuICAgICAgICBzaGlwUGxhY2VtZW50LnB1c2goW2Nvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0gKyBpXSk7XG4gICAgICBlbHNlIHNoaXBQbGFjZW1lbnQucHVzaChbY29vcmRpbmF0ZVswXSArIGksIGNvb3JkaW5hdGVbMV1dKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoaXBQbGFjZW1lbnQ7XG4gIH07XG4gIC8qIFxuICBjb25zdCBpc0luQW5BcnJheSA9IChhcnJheSwgZWxlbWVudCkgPT5cbiAgICBhcnJheS5zb21lKChlbCkgPT4gaXNFcXVhbChlbCwgZWxlbWVudCkpOyAqL1xuXG4gIGNvbnN0IGlzU2hpcFBsYWNlZCA9IChuYW1lLCBzaGlwTGlzdCkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciAoY29uc3Qgc2hpcE9iamVjdCBvZiBzaGlwTGlzdCkge1xuICAgICAgaWYgKHNoaXBPYmplY3Quc2hpcC5nZXROYW1lKCkgPT09IG5hbWUpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgYW5jaG9yQVNoaXAgPSAoY2hvc2VuQ29vcmRpbmF0ZSwgc2hpcERhdGEpID0+IHtcbiAgICBpZiAoaXNPdXRPZkJvdW5kcyhjaG9zZW5Db29yZGluYXRlLCBzaGlwRGF0YS5sZW5ndGgsIHNoaXBEYXRhLmFsaWdubWVudCkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3Qgc2hpcFBsYWNlbWVudCA9IGdlbmVyYXRlUGxhY2VtZW50KFxuICAgICAgY2hvc2VuQ29vcmRpbmF0ZSxcbiAgICAgIHNoaXBEYXRhLmxlbmd0aCxcbiAgICAgIHNoaXBEYXRhLmFsaWdubWVudFxuICAgICk7XG4gICAgY29uc3QgcGxheWVyQm9hcmQgPSBwbGF5ZXJzLnJlYWxQbGF5ZXIuYm9hcmQ7XG4gICAgaWYgKFxuICAgICAgaXNTaGlwUGxhY2VkKHNoaXBEYXRhLm5hbWUsIHBsYXllckJvYXJkLnNoaXBMaXN0KSB8fFxuICAgICAgcGxheWVyQm9hcmQuaXNJbklsbGVnYWxDb29yZHMoc2hpcFBsYWNlbWVudClcbiAgICApXG4gICAgICByZXR1cm47XG5cbiAgICBwbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcERhdGEubGVuZ3RoLCBzaGlwRGF0YS5uYW1lLCBzaGlwUGxhY2VtZW50KTtcbiAgICByZXR1cm4gc2hpcFBsYWNlbWVudDtcbiAgfTtcblxuICBjb25zdCBjYW5TdGFydEdhbWUgPSAoKSA9PlxuICAgIHBsYXllcnMucmVhbFBsYXllci5ib2FyZC5zaGlwTGlzdC5sZW5ndGggPT09IDU7IC8qICAmJlxuICAgIHBsYXllcnMuQUkuYm9hcmQuc2hpcExpc3QubGVuZ3RoID09PSA1OyAqL1xuXG4gIC8vIEdhbWUgbG9vcFxuICBjb25zdCBBSVBvc3NpYmxlQXR0YWNrcyA9IHBvc3NpYmxlQXR0YWNrcztcblxuICBjb25zdCBnZXRUdXJuID0gKCkgPT4gcGxheWVyVHVybjtcblxuICBjb25zdCBjaGFuZ2VUdXJuID0gKCkgPT4ge1xuICAgIGlmIChwbGF5ZXJUdXJuID09PSBcInJlYWxQbGF5ZXJcIikgcGxheWVyVHVybiA9IFwiYWlcIjtcbiAgICBlbHNlIHBsYXllclR1cm4gPSBcInJlYWxQbGF5ZXJcIjtcbiAgICByZXR1cm4gcGxheWVyVHVybjtcbiAgfTtcblxuICBjb25zdCBjb252ZXJ0VG9Db29yZGluYXRlID0gKHRhcmdldCkgPT4gW1xuICAgIE51bWJlcih0YXJnZXQuZGF0YXNldC54KSxcbiAgICBOdW1iZXIodGFyZ2V0LmRhdGFzZXQueSksXG4gIF07XG5cbiAgY29uc3QgZGlzcGxheVdob3NlVHVybiA9ICh0dXJuKSA9PiB7XG4gICAgY29uc3Qgd2hvc2VUdXJuID0gdHVybjtcbiAgICBpZiAod2hvc2VUdXJuID09PSBcInJlYWxQbGF5ZXJcIikge1xuICAgICAgdHVybkRpc3BsYXkudGV4dENvbnRlbnQgPSBcImNvbXB1dGVyJ3MgdHVyblwiO1xuICAgIH0gZWxzZSB0dXJuRGlzcGxheS50ZXh0Q29udGVudCA9IFwicGxheWVyJ3MgdHVyblwiO1xuICB9O1xuXG4gIGNvbnN0IG1hcmtTdW5rID0gKGNvb3JkcywgdHVybikgPT4ge1xuICAgIGxldCBib2FyZFRvTWFyaztcbiAgICBpZiAodHVybiA9PT0gXCJyZWFsUGxheWVyXCIpIGJvYXJkVG9NYXJrID0gQUlCb2FyZERPTTtcbiAgICBlbHNlIGJvYXJkVG9NYXJrID0gcGxheWVyQm9hcmRET007XG5cbiAgICBjb29yZHMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgIGNvbnN0IGhpdFNxdWFyZSA9IGJvYXJkVG9NYXJrLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBbZGF0YS14PVwiJHtjb29yZFswXX1cIl1bZGF0YS15PVwiJHtjb29yZFsxXX1cIl1gXG4gICAgICApO1xuICAgICAgaGl0U3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzdW5rXCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IG1hcmtTcXVhcmUgPSAoY29vcmRpbmF0ZSwgeyBoaXQsIHN1bmssIGNvb3JkcyB9LCB0dXJuKSA9PiB7XG4gICAgbGV0IHRhcmdldDtcbiAgICBpZiAodHVybiA9PT0gXCJyZWFsUGxheWVyXCIpIHtcbiAgICAgIHRhcmdldCA9IEFJQm9hcmRET00ucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5zcXVhcmVbZGF0YS14PVwiJHtjb29yZGluYXRlWzBdfVwiXVtkYXRhLXk9XCIke2Nvb3JkaW5hdGVbMV19XCJdYFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHR1cm4gPT09IFwiYWlcIikge1xuICAgICAgdGFyZ2V0ID0gcGxheWVyQm9hcmRET00ucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5zcXVhcmVbZGF0YS14PVwiJHtjb29yZGluYXRlWzBdfVwiXVtkYXRhLXk9XCIke2Nvb3JkaW5hdGVbMV19XCJdYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaGl0ID09PSB0cnVlKSB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICBlbHNlIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwibWlzc2VkXCIpO1xuICB9O1xuXG4gIGNvbnN0IHBsYXllck1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICBBSUJvYXJkRE9NLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgY29uc3QgcGxheWVyVGFyZ2V0ID0gY29udmVydFRvQ29vcmRpbmF0ZShldmVudC50YXJnZXQpO1xuICAgIGNvbnN0IHBsYXllckF0dGFjayA9IHBsYXllcnMucmVhbFBsYXllci5hdHRhY2socGxheWVycy5BSSwgcGxheWVyVGFyZ2V0KTtcbiAgICBjb25zdCBjdXJyZW50VHVybiA9IGdldFR1cm4oKTtcbiAgICBkaXNwbGF5V2hvc2VUdXJuKGN1cnJlbnRUdXJuKTtcbiAgICBtYXJrU3F1YXJlKHBsYXllclRhcmdldCwgcGxheWVyQXR0YWNrLCBjdXJyZW50VHVybik7XG4gICAgaWYgKHBsYXllckF0dGFjay5zdW5rID09PSB0cnVlKSBtYXJrU3VuayhwbGF5ZXJBdHRhY2suY29vcmRzLCBjdXJyZW50VHVybik7XG4gICAgY2hhbmdlVHVybigpO1xuICB9O1xuXG4gIGNvbnN0IEFJTW92ZSA9ICgpID0+IHtcbiAgICBpZiAocGxheWVycy5BSS5ib2FyZC5hcmVBbGxTdW5rKCkpIHJldHVybjtcbiAgICBjb25zdCBjdXJyZW50VHVybiA9IGdldFR1cm4oKTtcbiAgICBjb25zdCBBSVRhcmdldCA9IGdldFZhbGlkQXR0YWNrKEFJUG9zc2libGVBdHRhY2tzKTtcbiAgICBjb25zdCBBSUF0dGFjayA9IHBsYXllcnMuQUkuYXR0YWNrKHBsYXllcnMucmVhbFBsYXllciwgQUlUYXJnZXQpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYXJrU3F1YXJlKEFJVGFyZ2V0LCBBSUF0dGFjaywgY3VycmVudFR1cm4pO1xuICAgICAgaWYgKEFJQXR0YWNrLnN1bmsgPT09IHRydWUpIG1hcmtTdW5rKEFJQXR0YWNrLmNvb3JkcywgY3VycmVudFR1cm4pO1xuICAgIH0sIDUwMCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRpc3BsYXlXaG9zZVR1cm4oY3VycmVudFR1cm4pO1xuICAgIH0sIDcwMCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNoYW5nZVR1cm4oKTtcbiAgICAgIEFJQm9hcmRET00uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9LCA4MDApO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0QXR0YWNrID0gKGUpID0+IHtcbiAgICBpZiAoXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtaXNzZWRcIikgfHxcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImhpdFwiKSB8fFxuICAgICAgZ2V0VHVybigpID09PSBcImFpXCIgfHxcbiAgICAgIHBsYXllcnMuQUkuYm9hcmQuYXJlQWxsU3VuaygpIHx8XG4gICAgICBwbGF5ZXJzLnJlYWxQbGF5ZXIuYm9hcmQuYXJlQWxsU3VuaygpXG4gICAgKVxuICAgICAgcmV0dXJuO1xuICAgIHBsYXllck1vdmUoZSk7XG4gICAgQUlNb3ZlKCk7XG4gIH07XG5cbiAgY29uc3QgaXNHYW1lT3ZlciA9ICgpID0+XG4gICAgcGxheWVycy5BSS5ib2FyZC5hcmVBbGxTdW5rKCkgfHwgcGxheWVycy5yZWFsUGxheWVyLmJvYXJkLmFyZUFsbFN1bmsoKTtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0QXR0YWNrLFxuICAgIHBsYXllcnMsXG4gICAgYW5jaG9yQVNoaXAsXG4gICAgY2FuU3RhcnRHYW1lLFxuICAgIGlzT3V0T2ZCb3VuZHMsXG4gICAgaXNHYW1lT3ZlcixcbiAgICBnZXRUdXJuLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZUhhbmRsZXI7XG4iLCJpbXBvcnQgZ2FtZUhhbmRsZXIgZnJvbSBcIi4uL21vZHVsZXMvZ2FtZUhhbmRsZXJcIjtcblxuY29uc3QgQUlCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWktYm9hcmRcIik7XG5jb25zdCBwbGF5ZXJCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyLWJvYXJkXCIpO1xuY29uc3QgYm9hcmRGb3JQbGFjZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYWNlLXNoaXAtYm9hcmRcIik7XG5jb25zdCBzaGlwc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hpcHMtY29udGFpbmVyXCIpO1xuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xuY29uc3QgYm9hcmRSZXNldEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm9hcmQtcmVzZXRcIik7XG5jb25zdCBnYW1lUmVzZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWUtcmVzZXRcIik7XG5jb25zdCBhbGlnbm1lbnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FsaWdubWVudC1idG5cIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5XCIpO1xuXG5jb25zdCBib2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib2FyZC1jcmVhdG9yXCIpO1xuY29uc3QgZ2FtZW92ZXJEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lb3Zlci1kaXNwbGF5XCIpO1xuY29uc3QgZ2FtZW92ZXJSZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWVvdmVyLXJlc3VsdFwiKTtcblxubGV0IG15R2FtZUhhbmRsZXIgPSBnYW1lSGFuZGxlcihcInRlc3RcIik7XG5cbmNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJTaGlwcyA9IG15R2FtZUhhbmRsZXIucGxheWVycy5yZWFsUGxheWVyLmJvYXJkLnNoaXBMaXN0O1xuICBwbGF5ZXJTaGlwcy5mb3JFYWNoKChzaGlwT2JqKSA9PiB7XG4gICAgc2hpcE9iai5jb29yZGluYXRlcy5mb3JFYWNoKChjb29yZCkgPT4ge1xuICAgICAgY29uc3QgY29vcmRPblBsYXllckJvYXJkID0gcGxheWVyQm9hcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFtkYXRhLXg9XCIke2Nvb3JkWzBdfVwiXVtkYXRhLXk9XCIke2Nvb3JkWzFdfVwiXWBcbiAgICAgICk7XG4gICAgICBjb29yZE9uUGxheWVyQm9hcmQuY2xhc3NMaXN0LmFkZChcImFuY2hvcmVkXCIpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmFsaWdubWVudEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBsZXQgYWxpZ25tZW50U3RhdGUgPSBzaGlwc0NvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5kYXRhc2V0LmFsaWdubWVudDtcbiAgY29uc3QgZXZlcnlTaGlwID0gQXJyYXkuZnJvbShzaGlwc0NvbnRhaW5lci5jaGlsZHJlbik7XG4gIGlmIChhbGlnbm1lbnRTdGF0ZSA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICBhbGlnbm1lbnRTdGF0ZSA9IFwidmVydGljYWxcIjtcbiAgICBldmVyeVNoaXAuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5kYXRhc2V0LmFsaWdubWVudCA9IGFsaWdubWVudFN0YXRlO1xuICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZXZlcnlTaGlwLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGFsaWdubWVudFN0YXRlID0gXCJob3Jpem9udGFsXCI7XG4gICAgICBzaGlwLmRhdGFzZXQuYWxpZ25tZW50ID0gYWxpZ25tZW50U3RhdGU7XG4gICAgICBzaGlwLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbmNvbnN0IGNhbkVuZEdhbWUgPSAoKSA9PiB7XG4gIC8vIEltcGxlbWVudCBtb2RhbCB0byBwb3AgdXAgaW5zdGVhZCBvZiBhbHRlclxuICBpZiAobXlHYW1lSGFuZGxlci5pc0dhbWVPdmVyKCkpIHtcbiAgICBpZiAobXlHYW1lSGFuZGxlci5wbGF5ZXJzLkFJLmJvYXJkLmFyZUFsbFN1bmsoKSlcbiAgICAgIGdhbWVvdmVyUmVzdWx0LnRleHRDb250ZW50ID0gXCJZb3Ugd29uXCI7XG4gICAgZWxzZSBnYW1lb3ZlclJlc3VsdC50ZXh0Q29udGVudCA9IFwiQUkgd29uXCI7XG5cbiAgICBnYW1lb3ZlckRpc3BsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH1cbn07XG5cbmNvbnN0IGF0dGFja2luZ1BoYXNlID0gKCkgPT4ge1xuICBib2FyZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgQUlCb2FyZC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICByZW5kZXJQbGF5ZXJTaGlwcygpO1xuICBteUdhbWVIYW5kbGVyLnBsYXllcnMuQUkuYm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKCk7XG4gIEFJQm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChcbiAgICAgIG15R2FtZUhhbmRsZXIuaXNHYW1lT3ZlcigpIHx8XG4gICAgICBteUdhbWVIYW5kbGVyLmdldFR1cm4oKSA9PT0gXCJhaVwiIHx8XG4gICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic3F1YXJlXCIpXG4gICAgKVxuICAgICAgcmV0dXJuO1xuICAgIG15R2FtZUhhbmRsZXIuc3RhcnRBdHRhY2soZSk7XG4gICAgY2FuRW5kR2FtZSgpO1xuICB9KTtcbn07XG5cbnN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gIC8vIElmIGNsaWNrZWQgYmVmb3JlIHBsYXlhYmxlLCBwcmV2ZW50cyBmcm9tIGZ1cnRociBwbGF5aW5nXG4gIFwiY2xpY2tcIixcbiAgKCkgPT4ge1xuICAgIGlmIChteUdhbWVIYW5kbGVyLmNhblN0YXJ0R2FtZSgpKSB7XG4gICAgICBhdHRhY2tpbmdQaGFzZSgpO1xuICAgIH1cbiAgfVxuKTtcblxuc2hpcHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZSkgPT4ge1xuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hpcFwiKSkge1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJzaGlwLWxlbmd0aFwiLCBlLnRhcmdldC5kYXRhc2V0Lmxlbmd0aCk7XG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInNoaXAtbmFtZVwiLCBlLnRhcmdldC5pZCk7XG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInNoaXAtYWxpZ25tZW50XCIsIGUudGFyZ2V0LmRhdGFzZXQuYWxpZ25tZW50KTtcbiAgfVxufSk7XG5cbmJvYXJkRm9yUGxhY2VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xuICBpZiAoXG4gICAgZS50YXJnZXQuaWQgPT09IFwicGxhY2Utc2hpcC1ib2FyZFwiIHx8XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYW5jaG9yZWRcIilcbiAgKVxuICAgIHJldHVybjtcbiAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcImRyYWdvdmVyXCIpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuYm9hcmRGb3JQbGFjZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCAoZSkgPT4ge1xuICBpZiAoZS50YXJnZXQuaWQgPT09IFwicGxhY2Utc2hpcC1ib2FyZFwiKSByZXR1cm47XG4gIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmNvbnN0IGFkZEFuY2hvcmVkQ2xhc3MgPSAoc2hpcFBsYWNlbWVudCkgPT4ge1xuICBzaGlwUGxhY2VtZW50LmZvckVhY2goKHBsYWNlbWVudCkgPT4ge1xuICAgIGNvbnN0IHBsYWNlbWVudEluRE9NID0gYm9hcmRGb3JQbGFjZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS14PVwiJHtwbGFjZW1lbnRbMF19XCJdW2RhdGEteT1cIiR7cGxhY2VtZW50WzFdfVwiXWBcbiAgICApO1xuICAgIHBsYWNlbWVudEluRE9NLmNsYXNzTGlzdC5hZGQoXCJhbmNob3JlZFwiKTtcbiAgfSk7XG59O1xuXG5ib2FyZEZvclBsYWNlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZSkgPT4ge1xuICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ292ZXJcIik7XG4gIGNvbnN0IG9iamVjdERhdGEgPSB7XG4gICAgbGVuZ3RoOiBOdW1iZXIoZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInNoaXAtbGVuZ3RoXCIpKSxcbiAgICBuYW1lOiBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwic2hpcC1uYW1lXCIpLFxuICAgIGFsaWdubWVudDogZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInNoaXAtYWxpZ25tZW50XCIpLFxuICB9O1xuICBjb25zdCBjaG9zZW5Db29yZGluYXRlID0gW1xuICAgIE51bWJlcihlLnRhcmdldC5kYXRhc2V0LngpLFxuICAgIE51bWJlcihlLnRhcmdldC5kYXRhc2V0LnkpLFxuICBdO1xuXG4gIGNvbnN0IHNoaXBMb2NhdGlvbiA9IG15R2FtZUhhbmRsZXIuYW5jaG9yQVNoaXAoY2hvc2VuQ29vcmRpbmF0ZSwgb2JqZWN0RGF0YSk7XG4gIGlmIChzaGlwTG9jYXRpb24pIHtcbiAgICBhZGRBbmNob3JlZENsYXNzKHNoaXBMb2NhdGlvbik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7b2JqZWN0RGF0YS5uYW1lfWApLmNsYXNzTGlzdC5hZGQoXCJyZW1vdmVkXCIpO1xuICB9XG59KTtcblxuY29uc3QgY2xhc3NSZW1vdmFsID0gKGNsYXNzTmFtZSwgY29udGFpbmVyID0gZG9jdW1lbnQpID0+IHtcbiAgY29uc3QgZWxlbWVudHNUb0NsZWFyID0gQXJyYXkuZnJvbShcbiAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgLiR7Y2xhc3NOYW1lfWApXG4gICk7XG4gIGVsZW1lbnRzVG9DbGVhci5mb3JFYWNoKChlbGVtZW50KSA9PiBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSk7XG59O1xuXG4vKiA8ISEhISEhISEhISBHYW1lIFJlc2V0ICEhISEhISEhISEhPiAqL1xuY29uc3QgcmVzZXRCb2FyZCA9ICgpID0+IHtcbiAgbXlHYW1lSGFuZGxlciA9IGdhbWVIYW5kbGVyKFwidGVzdFwiKTtcbiAgY2xhc3NSZW1vdmFsKFwiYW5jaG9yZWRcIik7XG4gIGNsYXNzUmVtb3ZhbChcInJlbW92ZWRcIiwgc2hpcHNDb250YWluZXIpO1xufTtcblxuYm9hcmRSZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICByZXNldEJvYXJkKCk7XG59KTtcblxuZ2FtZVJlc2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHJlc2V0Qm9hcmQoKTtcbiAgY2xhc3NSZW1vdmFsKFwiaGl0XCIpO1xuICBjbGFzc1JlbW92YWwoXCJtaXNzZWRcIik7XG4gIGNsYXNzUmVtb3ZhbChcInN1bmtcIik7XG4gIGdhbWVvdmVyRGlzcGxheS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICBib2FyZE1vZGFsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG59KTtcbiJdLCJuYW1lcyI6WyJzaGlwcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJzaGlwIiwic2hpcExlbmd0aCIsIk51bWJlciIsImRhdGFzZXQiLCJsZW5ndGgiLCJzZXRBdHRyaWJ1dGUiLCJhbGlnbm1lbnQiLCJpIiwic2hpcEJsb2NrIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiSEFTSF9VTkRFRklORUQiLCJNQVhfU0FGRV9JTlRFR0VSIiwiYXJnc1RhZyIsImFycmF5VGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsImZ1bmNUYWciLCJtYXBUYWciLCJudW1iZXJUYWciLCJvYmplY3RUYWciLCJwcm9taXNlVGFnIiwicmVnZXhwVGFnIiwic2V0VGFnIiwic3RyaW5nVGFnIiwic3ltYm9sVGFnIiwid2Vha01hcFRhZyIsImFycmF5QnVmZmVyVGFnIiwiZGF0YVZpZXdUYWciLCJyZUlzSG9zdEN0b3IiLCJyZUlzVWludCIsInR5cGVkQXJyYXlUYWdzIiwiZnJlZUdsb2JhbCIsImciLCJPYmplY3QiLCJmcmVlU2VsZiIsInNlbGYiLCJyb290IiwiRnVuY3Rpb24iLCJmcmVlRXhwb3J0cyIsImV4cG9ydHMiLCJub2RlVHlwZSIsImZyZWVNb2R1bGUiLCJtb2R1bGUiLCJtb2R1bGVFeHBvcnRzIiwiZnJlZVByb2Nlc3MiLCJwcm9jZXNzIiwibm9kZVV0aWwiLCJiaW5kaW5nIiwiZSIsIm5vZGVJc1R5cGVkQXJyYXkiLCJpc1R5cGVkQXJyYXkiLCJhcnJheVNvbWUiLCJhcnJheSIsInByZWRpY2F0ZSIsImluZGV4IiwibWFwVG9BcnJheSIsIm1hcCIsInJlc3VsdCIsInNpemUiLCJ2YWx1ZSIsImtleSIsInNldFRvQXJyYXkiLCJzZXQiLCJ1aWQiLCJmdW5jIiwidHJhbnNmb3JtIiwiYXJyYXlQcm90byIsInByb3RvdHlwZSIsImZ1bmNQcm90byIsIm9iamVjdFByb3RvIiwiY29yZUpzRGF0YSIsImZ1bmNUb1N0cmluZyIsInRvU3RyaW5nIiwiaGFzT3duUHJvcGVydHkiLCJtYXNrU3JjS2V5IiwiZXhlYyIsImtleXMiLCJJRV9QUk9UTyIsIm5hdGl2ZU9iamVjdFRvU3RyaW5nIiwicmVJc05hdGl2ZSIsIlJlZ0V4cCIsImNhbGwiLCJyZXBsYWNlIiwiQnVmZmVyIiwidW5kZWZpbmVkIiwiU3ltYm9sIiwiVWludDhBcnJheSIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwic3BsaWNlIiwic3ltVG9TdHJpbmdUYWciLCJ0b1N0cmluZ1RhZyIsIm5hdGl2ZUdldFN5bWJvbHMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJuYXRpdmVJc0J1ZmZlciIsImlzQnVmZmVyIiwibmF0aXZlS2V5cyIsImFyZyIsIkRhdGFWaWV3IiwiZ2V0TmF0aXZlIiwiTWFwIiwiUHJvbWlzZSIsIlNldCIsIldlYWtNYXAiLCJuYXRpdmVDcmVhdGUiLCJkYXRhVmlld0N0b3JTdHJpbmciLCJ0b1NvdXJjZSIsIm1hcEN0b3JTdHJpbmciLCJwcm9taXNlQ3RvclN0cmluZyIsInNldEN0b3JTdHJpbmciLCJ3ZWFrTWFwQ3RvclN0cmluZyIsInN5bWJvbFByb3RvIiwic3ltYm9sVmFsdWVPZiIsInZhbHVlT2YiLCJIYXNoIiwiZW50cmllcyIsInRoaXMiLCJjbGVhciIsImVudHJ5IiwiTGlzdENhY2hlIiwiTWFwQ2FjaGUiLCJTZXRDYWNoZSIsInZhbHVlcyIsIl9fZGF0YV9fIiwiU3RhY2siLCJkYXRhIiwiYXJyYXlMaWtlS2V5cyIsImluaGVyaXRlZCIsImlzQXJyIiwiaXNBcnJheSIsImlzQXJnIiwiaXNBcmd1bWVudHMiLCJpc0J1ZmYiLCJpc1R5cGUiLCJza2lwSW5kZXhlcyIsIm4iLCJpdGVyYXRlZSIsImJhc2VUaW1lcyIsIlN0cmluZyIsImlzSW5kZXgiLCJwdXNoIiwiYXNzb2NJbmRleE9mIiwiZXEiLCJiYXNlR2V0VGFnIiwiaXNPd24iLCJ0YWciLCJ1bm1hc2tlZCIsImdldFJhd1RhZyIsIm9iamVjdFRvU3RyaW5nIiwiYmFzZUlzQXJndW1lbnRzIiwiaXNPYmplY3RMaWtlIiwiYmFzZUlzRXF1YWwiLCJvdGhlciIsImJpdG1hc2siLCJjdXN0b21pemVyIiwic3RhY2siLCJvYmplY3QiLCJlcXVhbEZ1bmMiLCJvYmpJc0FyciIsIm90aElzQXJyIiwib2JqVGFnIiwiZ2V0VGFnIiwib3RoVGFnIiwib2JqSXNPYmoiLCJvdGhJc09iaiIsImlzU2FtZVRhZyIsImVxdWFsQXJyYXlzIiwiYnl0ZUxlbmd0aCIsImJ5dGVPZmZzZXQiLCJidWZmZXIiLCJuYW1lIiwibWVzc2FnZSIsImNvbnZlcnQiLCJpc1BhcnRpYWwiLCJzdGFja2VkIiwiZ2V0IiwiZXF1YWxCeVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsIm9ialVud3JhcHBlZCIsIm90aFVud3JhcHBlZCIsIm9ialByb3BzIiwiZ2V0QWxsS2V5cyIsIm9iakxlbmd0aCIsIm90aExlbmd0aCIsInNraXBDdG9yIiwib2JqVmFsdWUiLCJvdGhWYWx1ZSIsImNvbXBhcmVkIiwib2JqQ3RvciIsImNvbnN0cnVjdG9yIiwib3RoQ3RvciIsImVxdWFsT2JqZWN0cyIsImJhc2VJc0VxdWFsRGVlcCIsImJhc2VJc05hdGl2ZSIsImlzT2JqZWN0IiwiaXNNYXNrZWQiLCJpc0Z1bmN0aW9uIiwidGVzdCIsImJhc2VLZXlzIiwiQ3RvciIsInByb3RvIiwiYXJyTGVuZ3RoIiwic2VlbiIsImFyclZhbHVlIiwib3RoSW5kZXgiLCJoYXMiLCJrZXlzRnVuYyIsInN5bWJvbHNGdW5jIiwib2Zmc2V0IiwiYXJyYXlQdXNoIiwiYmFzZUdldEFsbEtleXMiLCJnZXRTeW1ib2xzIiwiZ2V0TWFwRGF0YSIsInR5cGUiLCJnZXRWYWx1ZSIsInBvcCIsInBhaXJzIiwiTEFSR0VfQVJSQVlfU0laRSIsInJlc0luZGV4IiwiYXJyYXlGaWx0ZXIiLCJzeW1ib2wiLCJBcnJheUJ1ZmZlciIsInJlc29sdmUiLCJjdG9yU3RyaW5nIiwiYXJndW1lbnRzIiwiaXNMZW5ndGgiLCJiYXNlVW5hcnkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJpZCIsImxvYWRlZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdsb2JhbFRoaXMiLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwibm1kIiwicGF0aHMiLCJjaGlsZHJlbiIsInBvc3NpYmxlQXR0YWNrcyIsImF0dGFja3MiLCJ4Q29vcmRpbmF0ZSIsImoiLCJ5Q29vcmRpbmF0ZSIsImNyZWF0ZUFycmF5T2ZBdHRhY2tzIiwicGxheWVyQm9hcmQiLCJnZXRFbGVtZW50QnlJZCIsIkFJQm9hcmQiLCJib2FyZEZvclBsYWNlbWVudCIsImNvb3JkaW5hdGUiLCJzcXVhcmUiLCJ4IiwieSIsInNxdWFyZUNsb25lMSIsImNsb25lTm9kZSIsInNxdWFyZUNsb25lMiIsImhpdHNUYWtlbiIsImdldExlbmd0aCIsImdldE5hbWUiLCJoaXQiLCJnZXRIaXRzVGFrZW4iLCJpc1N1bmsiLCJpbGxlZ2FsVmFyaWFudHMiLCJzaGlwQXJyYXkiLCJib2FyZCIsInNoaXBMaXN0IiwibWlzc2VkU2hvdHMiLCJ1bmF2YWlsYWJsZUNvb3JkcyIsImlzSW5BbkFycmF5IiwiZWxlbWVudCIsInNvbWUiLCJlbCIsImlzRXF1YWwiLCJnZW5lcmF0ZUlsbGVnYWxNb3ZlcyIsImNvb3JkaW5hdGVzIiwiaWxsZWdhbFBvc3NpYmlsaXRlcyIsImlsbGVnYWxTZXQiLCJjb29yZCIsImlsbGVnYWxWYXJpYW50IiwiaWxsZWdhbE1vdmUiLCJpc0luSWxsZWdhbENvb3JkcyIsInNoaXBQbGFjZW1lbnQiLCJpbGxlZ2FsTW92ZXMiLCJwbGFjZW1lbnQiLCJwbGFjZVNoaXAiLCJzaGlwT2JqZWN0IiwiU2hpcCIsImNoZWNrSGl0IiwiZ2V0UmFuZG9tSW5kZXgiLCJpbmRleEFycmF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2V0UmFuZG9tQWxpZ25tZW50IiwiYWxpZ25tZW50cyIsImdldEluaXRpYWxCb2FyZFNxdWFyZSIsImluaXRpYWxCb2FyZFNxdWFyZSIsImhvcml6b250YWxDb29yZCIsImdldFJhbmRvbVBsYWNlbWVudCIsImluaXRpYWxDb29yZCIsInJlY2VpdmVBdHRhY2siLCJpbmRleE9mU2hpcCIsInNoaXBJbkxpc3QiLCJzdW5rIiwiY29vcmRzIiwiYXJlQWxsU3VuayIsImV2ZXJ5IiwicmFuZG9tbHlQbGFjZVNoaXBzIiwicmFuZG9tSW5kZXgiLCJzaGlwSGVscGVyIiwiR2FtZWJvYXJkIiwiYXR0YWNrIiwiZW5lbXkiLCJwbGF5ZXJCb2FyZERPTSIsIkFJQm9hcmRET00iLCJ0dXJuRGlzcGxheSIsInBsYXllck5hbWUiLCJwbGF5ZXJUdXJuIiwicGxheWVycyIsInJlYWxQbGF5ZXIiLCJQbGF5ZXIiLCJBSSIsImlzT3V0T2ZCb3VuZHMiLCJBSVBvc3NpYmxlQXR0YWNrcyIsImdldFR1cm4iLCJjaGFuZ2VUdXJuIiwiZGlzcGxheVdob3NlVHVybiIsInR1cm4iLCJ3aG9zZVR1cm4iLCJ0ZXh0Q29udGVudCIsIm1hcmtTdW5rIiwiYm9hcmRUb01hcmsiLCJxdWVyeVNlbGVjdG9yIiwibWFya1NxdWFyZSIsInRhcmdldCIsInBsYXllck1vdmUiLCJldmVudCIsInJlbW92ZSIsInBsYXllclRhcmdldCIsInBsYXllckF0dGFjayIsImN1cnJlbnRUdXJuIiwiQUlNb3ZlIiwiYXR0YWNrc0FycmF5IiwiQUlUYXJnZXQiLCJmbGF0IiwiQUlBdHRhY2siLCJzZXRUaW1lb3V0Iiwic3RhcnRBdHRhY2siLCJjb250YWlucyIsImFuY2hvckFTaGlwIiwiY2hvc2VuQ29vcmRpbmF0ZSIsInNoaXBEYXRhIiwiZ2VuZXJhdGVQbGFjZW1lbnQiLCJpc1NoaXBQbGFjZWQiLCJjYW5TdGFydEdhbWUiLCJpc0dhbWVPdmVyIiwic2hpcHNDb250YWluZXIiLCJzdGFydEJ0biIsImJvYXJkUmVzZXRCdG4iLCJnYW1lUmVzZXRCdG4iLCJhbGlnbm1lbnRCdG4iLCJvdmVybGF5IiwiYm9hcmRNb2RhbCIsImdhbWVvdmVyRGlzcGxheSIsImdhbWVvdmVyUmVzdWx0IiwibXlHYW1lSGFuZGxlciIsImdhbWVIYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFsaWdubWVudFN0YXRlIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJldmVyeVNoaXAiLCJhdHRhY2tpbmdQaGFzZSIsInNoaXBPYmoiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwicHJldmVudERlZmF1bHQiLCJvYmplY3REYXRhIiwiZ2V0RGF0YSIsInNoaXBMb2NhdGlvbiIsImNsYXNzUmVtb3ZhbCIsImNsYXNzTmFtZSIsImNvbnRhaW5lciIsImVsZW1lbnRzVG9DbGVhciIsInJlc2V0Qm9hcmQiXSwic291cmNlUm9vdCI6IiJ9