(()=>{var t={183:()=>{var t=document.querySelectorAll(".ship");Array.from(t).forEach((function(t){var e=Number(t.dataset.length);t.setAttribute("draggable","true"),t.dataset.alignment="horizontal";for(var r=0;r<e;r+=1){var n=document.createElement("div");n.classList.add("block"),t.appendChild(n)}}))},307:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",i="[object Array]",c="[object Boolean]",u="[object Date]",s="[object Error]",l="[object Function]",f="[object Map]",d="[object Number]",h="[object Object]",v="[object Promise]",y="[object RegExp]",p="[object Set]",g="[object String]",m="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",A="[object DataView]",S=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[o]=w[i]=w[_]=w[c]=w[A]=w[u]=w[s]=w[l]=w[f]=w[d]=w[h]=w[y]=w[p]=w[g]=w[b]=!1;var L="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,E="object"==typeof self&&self&&self.Object===Object&&self,k=L||E||Function("return this")(),I=e&&!e.nodeType&&e,z=I&&t&&!t.nodeType&&t,O=z&&z.exports===I,P=O&&L.process,x=function(){try{return P&&P.binding&&P.binding("util")}catch(t){}}(),T=x&&x.isTypedArray;function q(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function M(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function B(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var C,N,D,$=Array.prototype,F=Function.prototype,U=Object.prototype,G=k["__core-js_shared__"],R=F.toString,V=U.hasOwnProperty,W=(C=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",H=U.toString,Y=RegExp("^"+R.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=O?k.Buffer:void 0,K=k.Symbol,Q=k.Uint8Array,X=U.propertyIsEnumerable,Z=$.splice,tt=K?K.toStringTag:void 0,et=Object.getOwnPropertySymbols,rt=J?J.isBuffer:void 0,nt=(N=Object.keys,D=Object,function(t){return N(D(t))}),at=xt(k,"DataView"),ot=xt(k,"Map"),it=xt(k,"Promise"),ct=xt(k,"Set"),ut=xt(k,"WeakMap"),st=xt(Object,"create"),lt=Bt(at),ft=Bt(ot),dt=Bt(it),ht=Bt(ct),vt=Bt(ut),yt=K?K.prototype:void 0,pt=yt?yt.valueOf:void 0;function gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function _t(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new bt;++e<r;)this.add(t[e])}function At(t){var e=this.__data__=new mt(t);this.size=e.size}function St(t,e){var r=Dt(t),n=!r&&Nt(t),a=!r&&!n&&$t(t),o=!r&&!n&&!a&&Vt(t),i=r||n||a||o,c=i?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!V.call(t,s)||i&&("length"==s||a&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Mt(s,u))||c.push(s);return c}function jt(t,e){for(var r=t.length;r--;)if(Ct(t[r][0],e))return r;return-1}function wt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":tt&&tt in Object(t)?function(t){var e=V.call(t,tt),r=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var a=H.call(t);n&&(e?t[tt]=r:delete t[tt]);return a}(t):function(t){return H.call(t)}(t)}function Lt(t){return Rt(t)&&wt(t)==o}function Et(t,e,r,n,a){return t===e||(null==t||null==e||!Rt(t)&&!Rt(e)?t!=t&&e!=e:function(t,e,r,n,a,l){var v=Dt(t),b=Dt(e),S=v?i:qt(t),j=b?i:qt(e),w=(S=S==o?h:S)==h,L=(j=j==o?h:j)==h,E=S==j;if(E&&$t(t)){if(!$t(e))return!1;v=!0,w=!1}if(E&&!w)return l||(l=new At),v||Vt(t)?zt(t,e,r,n,a,l):function(t,e,r,n,a,o,i){switch(r){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!o(new Q(t),new Q(e)));case c:case u:case d:return Ct(+t,+e);case s:return t.name==e.name&&t.message==e.message;case y:case g:return t==e+"";case f:var l=M;case p:var h=1&n;if(l||(l=B),t.size!=e.size&&!h)return!1;var v=i.get(t);if(v)return v==e;n|=2,i.set(t,e);var b=zt(l(t),l(e),n,a,o,i);return i.delete(t),b;case m:if(pt)return pt.call(t)==pt.call(e)}return!1}(t,e,S,r,n,a,l);if(!(1&r)){var k=w&&V.call(t,"__wrapped__"),I=L&&V.call(e,"__wrapped__");if(k||I){var z=k?t.value():t,O=I?e.value():e;return l||(l=new At),a(z,O,r,n,l)}}if(!E)return!1;return l||(l=new At),function(t,e,r,n,a,o){var i=1&r,c=Ot(t),u=c.length,s=Ot(e).length;if(u!=s&&!i)return!1;var l=u;for(;l--;){var f=c[l];if(!(i?f in e:V.call(e,f)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var h=!0;o.set(t,e),o.set(e,t);var v=i;for(;++l<u;){var y=t[f=c[l]],p=e[f];if(n)var g=i?n(p,y,f,e,t,o):n(y,p,f,t,e,o);if(!(void 0===g?y===p||a(y,p,r,n,o):g)){h=!1;break}v||(v="constructor"==f)}if(h&&!v){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(t),o.delete(e),h}(t,e,r,n,a,l)}(t,e,r,n,Et,a))}function kt(t){return!(!Gt(t)||function(t){return!!W&&W in t}(t))&&(Ft(t)?Y:S).test(Bt(t))}function It(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||U,e!==n)return nt(t);var e,r,n,a=[];for(var o in Object(t))V.call(t,o)&&"constructor"!=o&&a.push(o);return a}function zt(t,e,r,n,a,o){var i=1&r,c=t.length,u=e.length;if(c!=u&&!(i&&u>c))return!1;var s=o.get(t);if(s&&o.get(e))return s==e;var l=-1,f=!0,d=2&r?new _t:void 0;for(o.set(t,e),o.set(e,t);++l<c;){var h=t[l],v=e[l];if(n)var y=i?n(v,h,l,e,t,o):n(h,v,l,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(d){if(!q(e,(function(t,e){if(i=e,!d.has(i)&&(h===t||a(h,t,r,n,o)))return d.push(e);var i}))){f=!1;break}}else if(h!==v&&!a(h,v,r,n,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Ot(t){return function(t,e,r){var n=e(t);return Dt(t)?n:function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}(n,r(t))}(t,Wt,Tt)}function Pt(t,e){var r,n,a=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof e?"string":"hash"]:a.map}function xt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return kt(r)?r:void 0}gt.prototype.clear=function(){this.__data__=st?st(null):{},this.size=0},gt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gt.prototype.get=function(t){var e=this.__data__;if(st){var r=e[t];return r===n?void 0:r}return V.call(e,t)?e[t]:void 0},gt.prototype.has=function(t){var e=this.__data__;return st?void 0!==e[t]:V.call(e,t)},gt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=st&&void 0===e?n:e,this},mt.prototype.clear=function(){this.__data__=[],this.size=0},mt.prototype.delete=function(t){var e=this.__data__,r=jt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Z.call(e,r,1),--this.size,!0)},mt.prototype.get=function(t){var e=this.__data__,r=jt(e,t);return r<0?void 0:e[r][1]},mt.prototype.has=function(t){return jt(this.__data__,t)>-1},mt.prototype.set=function(t,e){var r=this.__data__,n=jt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new gt,map:new(ot||mt),string:new gt}},bt.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return Pt(this,t).get(t)},bt.prototype.has=function(t){return Pt(this,t).has(t)},bt.prototype.set=function(t,e){var r=Pt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,n),this},_t.prototype.has=function(t){return this.__data__.has(t)},At.prototype.clear=function(){this.__data__=new mt,this.size=0},At.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof mt){var n=r.__data__;if(!ot||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new bt(n)}return r.set(t,e),this.size=r.size,this};var Tt=et?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,a=0,o=[];++r<n;){var i=t[r];e(i,r,t)&&(o[a++]=i)}return o}(et(t),(function(e){return X.call(t,e)})))}:function(){return[]},qt=wt;function Mt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Bt(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ct(t,e){return t===e||t!=t&&e!=e}(at&&qt(new at(new ArrayBuffer(1)))!=A||ot&&qt(new ot)!=f||it&&qt(it.resolve())!=v||ct&&qt(new ct)!=p||ut&&qt(new ut)!=b)&&(qt=function(t){var e=wt(t),r=e==h?t.constructor:void 0,n=r?Bt(r):"";if(n)switch(n){case lt:return A;case ft:return f;case dt:return v;case ht:return p;case vt:return b}return e});var Nt=Lt(function(){return arguments}())?Lt:function(t){return Rt(t)&&V.call(t,"callee")&&!X.call(t,"callee")},Dt=Array.isArray;var $t=rt||function(){return!1};function Ft(t){if(!Gt(t))return!1;var e=wt(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Gt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}var Vt=T?function(t){return function(e){return t(e)}}(T):function(t){return Rt(t)&&Ut(t.length)&&!!w[wt(t)]};function Wt(t){return null!=(e=t)&&Ut(e.length)&&!Ft(e)?St(t):It(t);var e}t.exports=function(t,e){return Et(t,e)}}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n](o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";r(183);var t=function(){for(var t=[],e=0;e<10;e++)for(var r=e,n=0;n<10;n++){var a=n;t.push([r,a])}return t}();const e=t;var n=document.getElementById("player-board"),a=document.getElementById("ai-board"),o=document.getElementById("place-ship-board");e.forEach((function(t){var e=document.createElement("div");e.classList.add("square"),e.dataset.x=t[0],e.dataset.y=t[1],n.appendChild(e);var r=e.cloneNode();a.appendChild(r);var i=e.cloneNode();o.appendChild(i)}));var i=r(307),c=r.n(i);const u=function(t,e){var r=0;return{getLength:function(){return t},getName:function(){return e},hit:function(){r+=1},getHitsTaken:function(){return r},isSunk:function(){return r>=t}}};var s=[[0,-1],[-1,-1],[1,-1],[-1,0],[1,0],[0,1],[-1,1],[1,1]],l=[{name:"destroyer",length:2},{name:"submarine",length:3},{name:"cruiser",length:3},{name:"battleship",length:4},{name:"carrier",length:5}];function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const y=function(){var t=d(e),r=[],n=new Set,a=new Set,o=function(t,e){return t.some((function(t){return c()(t,e)}))},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;t.forEach((function(n){for(var a=0;a<e.length;a++){var i=e[a],c=[n[0]+i[0],n[1]+i[1]];c[0]>=0&&c[0]<=9&&c[1]>=0&&c[1]<=9&&!1===o(t,c)&&r.add(String(c))}r.add(String(n))}))},h=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=f(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(r.has(String(o)))return!0}}catch(t){n.e(t)}finally{n.f()}return!1},v=function(t,e,n){var o={ship:u(t,e),coordinates:n};r.push(o),i(n,s,a)},y=function(t){var e,n=0,a=f(r);try{for(a.s();!(e=a.n()).done;){if(e.value.coordinates.some((function(e){return c()(t,e)})))return n;n+=1}}catch(t){a.e(t)}finally{a.f()}},p=function(t){return t.splice(Math.floor(Math.random()*t.length),1)},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["horizontal","vertical"];return t[Math.floor(2*Math.random())]},m=function(e,r){for(var n;void 0===n||a.has(String(n));)if("horizontal"===r){var o=t[Math.floor(Math.random()*(t.length-e))];o[1]+e<=10&&(n=o)}else{var i=t[Math.floor(Math.random()*(10*(e+1)))];i[0]+e<=10&&(n=i)}return n},b=function(t){for(var e=[];e.length<=1;){var r=g(),n=m(t,r);e.push(n);for(var a=1;a<t;a++)"horizontal"===r?e.push([n[0],n[1]+a]):e.push([n[0]+a,n[1]]);h(e)&&e.splice(0)}return i(e),e};return{shipList:r,placeShip:v,receiveAttack:function(t){var e=y(t);if(void 0!==e){var a=r[e];return a.ship.hit(),a.ship.isSunk()?{hit:!0,sunk:!0,coords:a.coordinates}:{hit:!0,sunk:!1,coords:null}}return n.add(String(t)),{hit:!1,sunk:!1,coords:null}},missedShots:n,areAllSunk:function(){return r.every((function(t){return t.ship.isSunk()}))},unavailableCoords:a,isInIllegalCoords:h,randomlyPlaceShips:function(){for(var t=[0,1,2,3,4];t.length;){var e=p(t),r=l[e],n=b(r.length);v(r.length,r.name,n)}}}};const p=function(t){return{getName:function(){return t},board:y(),attack:function(t,e){return t.board.receiveAttack(e)}}};function g(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=document.getElementById("player-board"),_=document.getElementById("ai-board"),A=document.getElementById("turn-display");const S=function(t){var r="realPlayer",n={realPlayer:p(t),AI:p("AI")},a=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal";return"horizontal"===r?t[1]+e>10:t[0]+e>10},o=e,i=function(){return r},c=function(){return r="realPlayer"===r?"ai":"realPlayer"},u=function(t){var e=t;A.textContent="realPlayer"===e?"computer's turn":"player's turn"},s=function(t,e){var r;r="realPlayer"===e?_:b,t.forEach((function(t){r.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("sunk")}))},l=function(t,e,r){var n,a=e.hit;e.sunk,e.coords;"realPlayer"===r?n=_.querySelector('.square[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')):"ai"===r&&(n=b.querySelector('.square[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]'))),!0===a?n.classList.add("hit"):n.classList.add("missed")},f=function(t){_.classList.remove("active");var e,r=(e=t.target,[Number(e.dataset.x),Number(e.dataset.y)]),a=n.realPlayer.attack(n.AI,r),o=i();u(o),l(r,a,o),!0===a.sunk&&s(a.coords,o),c()},d=function(){if(!n.AI.board.areAllSunk()){var t,e=i(),r=(t=o).splice(Math.floor(Math.random()*t.length),1).flat(),a=n.AI.attack(n.realPlayer,r);setTimeout((function(){l(r,a,e),!0===a.sunk&&s(a.coords,e)}),500),setTimeout((function(){u(e)}),700),setTimeout((function(){c(),_.classList.add("active")}),800)}};return{startAttack:function(t){t.target.classList.contains("missed")||t.target.classList.contains("hit")||"ai"===i()||n.AI.board.areAllSunk()||n.realPlayer.board.areAllSunk()||(f(t),d())},players:n,anchorAShip:function(t,e){if(!a(t,e.length,e.alignment)){var r=function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",n=[],a=0;a<e;a++)"horizontal"===r?n.push([t[0],t[1]+a]):n.push([t[0]+a,t[1]]);return n}(t,e.length,e.alignment),o=n.realPlayer.board;if(!function(t,e){var r,n=g(e);try{for(n.s();!(r=n.n()).done;)if(r.value.ship.getName()===t)return!0}catch(t){n.e(t)}finally{n.f()}return!1}(e.name,o.shipList)&&!o.isInIllegalCoords(r))return o.placeShip(e.length,e.name,r),r}},canStartGame:function(){return 5===n.realPlayer.board.shipList.length},isOutOfBounds:a,isGameOver:function(){return n.AI.board.areAllSunk()||n.realPlayer.board.areAllSunk()},getTurn:i}};var j=document.getElementById("ai-board"),w=document.getElementById("player-board"),L=document.getElementById("place-ship-board"),E=document.getElementById("ships-container"),k=document.querySelector("#start"),I=document.querySelector("#board-reset"),z=document.querySelector("#game-reset"),O=document.querySelector("#alignment-btn"),P=document.querySelector("#overlay"),x=document.querySelector("#board-creator"),T=document.querySelector("#gameover-display"),q=document.querySelector("#gameover-result"),M=S("test");O.addEventListener("click",(function(){var t=E.firstElementChild.dataset.alignment,e=Array.from(E.children);"horizontal"===t?(t="vertical",e.forEach((function(e){e.dataset.alignment=t,e.classList.add("vertical")}))):e.forEach((function(e){t="horizontal",e.dataset.alignment=t,e.classList.remove("vertical")}))}));var B=function(){x.classList.remove("active"),P.classList.remove("active"),j.classList.add("active"),M.players.realPlayer.board.shipList.forEach((function(t){t.coordinates.forEach((function(t){w.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("anchored")}))})),M.players.AI.board.randomlyPlaceShips(),j.addEventListener("mousedown",(function(t){!M.isGameOver()&&"ai"!==M.getTurn()&&t.target.classList.contains("square")&&(M.startAttack(t),M.isGameOver()&&(M.players.AI.board.areAllSunk()?q.textContent="You won":q.textContent="AI won",T.classList.add("active"),P.classList.add("active")))}))};k.addEventListener("click",(function(){M.canStartGame()&&B()})),E.addEventListener("dragstart",(function(t){t.target.classList.contains("ship")&&(t.dataTransfer.setData("ship-length",t.target.dataset.length),t.dataTransfer.setData("ship-name",t.target.id),t.dataTransfer.setData("ship-alignment",t.target.dataset.alignment))})),L.addEventListener("dragover",(function(t){"place-ship-board"===t.target.id||t.target.classList.contains("anchored")||(t.target.classList.add("dragover"),t.preventDefault())})),L.addEventListener("dragleave",(function(t){"place-ship-board"!==t.target.id&&(t.target.classList.remove("dragover"),t.preventDefault())}));L.addEventListener("drop",(function(t){t.target.classList.remove("dragover");var e={length:Number(t.dataTransfer.getData("ship-length")),name:t.dataTransfer.getData("ship-name"),alignment:t.dataTransfer.getData("ship-alignment")},r=[Number(t.target.dataset.x),Number(t.target.dataset.y)],n=M.anchorAShip(r,e);n&&(n.forEach((function(t){L.querySelector('[data-x="'.concat(t[0],'"][data-y="').concat(t[1],'"]')).classList.add("anchored")})),document.querySelector("#".concat(e.name)).classList.add("removed"))}));var C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=Array.from(e.querySelectorAll(".".concat(t)));r.forEach((function(e){return e.classList.remove(t)}))},N=function(){M=S("test"),C("anchored"),C("removed",E)};I.addEventListener("click",(function(){N()})),z.addEventListener("click",(function(){N(),C("hit"),C("missed"),C("sunk"),T.classList.remove("active"),x.classList.add("active")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akJsQixFQUFnQkMsRUFBWSxRQUM1QmEsRUFBYSxZQUNiQSxFQUFhLFVBQVd2QixFQUMxQixFQUVBRSxFQUFjUyxpQkFBaUIsU0FBUyxXQUN0Q2dCLEdBQ0YsSUFFQXhCLEVBQWFRLGlCQUFpQixTQUFTLFdBQ3JDZ0IsSUFDQUosRUFBYSxPQUNiQSxFQUFhLFVBQ2JBLEVBQWEsUUFDYmhCLEVBQWdCL1csVUFBVXFWLE9BQU8sVUFDakN5QixFQUFXOVcsVUFBVUMsSUFBSSxTQUMzQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvRE9NL2RyYWdEcm9wU2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9ub2RlX21vZHVsZXMvbG9kYXNoLmlzZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvbm9kZSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2dhbWVIZWxwZXJzL0FJLXBvc3NpYmxlLWF0dGFja3MuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvRE9NL2NyZWF0ZUJvYXJkRE9NLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL21vZHVsZXMvYmF0dGxlc2hpcC1mYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2dhbWVIZWxwZXJzL3BsYWNlbWVudC1oZWxwZXJzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL21vZHVsZXMvcGxheWVyLWZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kdWxlcy9nYW1lSGFuZGxlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9ET00vRE9NRXZlbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNoaXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwXCIpO1xuXG5jb25zdCBnZW5lcmF0ZVNoaXBCbG9ja3MgPSAoKSA9PiB7XG4gIEFycmF5LmZyb20oc2hpcHMpLmZvckVhY2goKHNoaXApID0+IHtcbiAgICBjb25zdCBzaGlwTGVuZ3RoID0gTnVtYmVyKHNoaXAuZGF0YXNldC5sZW5ndGgpO1xuICAgIHNoaXAuc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKTsgXG4gICAgc2hpcC5kYXRhc2V0LmFsaWdubWVudCA9IFwiaG9yaXpvbnRhbFwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBzaGlwQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgc2hpcEJsb2NrLmNsYXNzTGlzdC5hZGQoXCJibG9ja1wiKTtcbiAgICAgIHNoaXAuYXBwZW5kQ2hpbGQoc2hpcEJsb2NrKTtcbiAgICB9XG4gIH0pO1xufTtcbmdlbmVyYXRlU2hpcEJsb2NrcygpO1xuIiwiLyoqXG4gKiBMb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanMuZm91bmRhdGlvbi8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIHNpemUgdG8gZW5hYmxlIGxhcmdlIGFycmF5IG9wdGltaXphdGlvbnMuICovXG52YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblxuLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xudmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB2YWx1ZSBjb21wYXJpc29ucy4gKi9cbnZhciBDT01QQVJFX1BBUlRJQUxfRkxBRyA9IDEsXG4gICAgQ09NUEFSRV9VTk9SREVSRURfRkxBRyA9IDI7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBhc3luY1RhZyA9ICdbb2JqZWN0IEFzeW5jRnVuY3Rpb25dJyxcbiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgbnVsbFRhZyA9ICdbb2JqZWN0IE51bGxdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuICAgIHByb3h5VGFnID0gJ1tvYmplY3QgUHJveHldJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJyxcbiAgICB1bmRlZmluZWRUYWcgPSAnW29iamVjdCBVbmRlZmluZWRdJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXBhdHRlcm5zKS5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cbi8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cbnZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xudHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG50eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG50eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG50eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG50eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9XG50eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG50eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9XG50eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovXG52YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi9cbnZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cbi8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AuICovXG52YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZVByb2Nlc3MgPSBtb2R1bGVFeHBvcnRzICYmIGZyZWVHbG9iYWwucHJvY2VzcztcblxuLyoqIFVzZWQgdG8gYWNjZXNzIGZhc3RlciBOb2RlLmpzIGhlbHBlcnMuICovXG52YXIgbm9kZVV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZyZWVQcm9jZXNzICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcgJiYgZnJlZVByb2Nlc3MuYmluZGluZygndXRpbCcpO1xuICB9IGNhdGNoIChlKSB7fVxufSgpKTtcblxuLyogTm9kZS5qcyBoZWxwZXIgcmVmZXJlbmNlcy4gKi9cbnZhciBub2RlSXNUeXBlZEFycmF5ID0gbm9kZVV0aWwgJiYgbm9kZVV0aWwuaXNUeXBlZEFycmF5O1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5maWx0ZXJgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvclxuICogaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gYXJyYXlGaWx0ZXIoYXJyYXksIHByZWRpY2F0ZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoLFxuICAgICAgcmVzSW5kZXggPSAwLFxuICAgICAgcmVzdWx0ID0gW107XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQXBwZW5kcyB0aGUgZWxlbWVudHMgb2YgYHZhbHVlc2AgdG8gYGFycmF5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgdmFsdWVzIHRvIGFwcGVuZC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICovXG5mdW5jdGlvbiBhcnJheVB1c2goYXJyYXksIHZhbHVlcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICBvZmZzZXQgPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBhcnJheVtvZmZzZXQgKyBpbmRleF0gPSB2YWx1ZXNbaW5kZXhdO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlXG4gKiBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG4gKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmFyeWAgd2l0aG91dCBzdXBwb3J0IGZvciBzdG9yaW5nIG1ldGFkYXRhLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjYXAgYXJndW1lbnRzIGZvci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNhcHBlZCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVVuYXJ5KGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmModmFsdWUpO1xuICB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGBjYWNoZWAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IGNhY2hlIFRoZSBjYWNoZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBjYWNoZUhhcyhjYWNoZSwga2V5KSB7XG4gIHJldHVybiBjYWNoZS5oYXMoa2V5KTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG59XG5cbi8qKlxuICogQ29udmVydHMgYG1hcGAgdG8gaXRzIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGtleS12YWx1ZSBwYWlycy5cbiAqL1xuZnVuY3Rpb24gbWFwVG9BcnJheShtYXApIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cbiAgbWFwLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkoc2V0LnNpemUpO1xuXG4gIHNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSxcbiAgICBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG52YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gZnVuY1Byb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xudmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciB1aWQgPSAvW14uXSskLy5leGVjKGNvcmVKc0RhdGEgJiYgY29yZUpzRGF0YS5rZXlzICYmIGNvcmVKc0RhdGEua2V5cy5JRV9QUk9UTyB8fCAnJyk7XG4gIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcbn0oKSk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xudmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBCdWZmZXIgPSBtb2R1bGVFeHBvcnRzID8gcm9vdC5CdWZmZXIgOiB1bmRlZmluZWQsXG4gICAgU3ltYm9sID0gcm9vdC5TeW1ib2wsXG4gICAgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheSxcbiAgICBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlLFxuICAgIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlLFxuICAgIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlR2V0U3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsXG4gICAgbmF0aXZlSXNCdWZmZXIgPSBCdWZmZXIgPyBCdWZmZXIuaXNCdWZmZXIgOiB1bmRlZmluZWQsXG4gICAgbmF0aXZlS2V5cyA9IG92ZXJBcmcoT2JqZWN0LmtleXMsIE9iamVjdCk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBEYXRhVmlldyA9IGdldE5hdGl2ZShyb290LCAnRGF0YVZpZXcnKSxcbiAgICBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpLFxuICAgIFByb21pc2UgPSBnZXROYXRpdmUocm9vdCwgJ1Byb21pc2UnKSxcbiAgICBTZXQgPSBnZXROYXRpdmUocm9vdCwgJ1NldCcpLFxuICAgIFdlYWtNYXAgPSBnZXROYXRpdmUocm9vdCwgJ1dlYWtNYXAnKSxcbiAgICBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovXG52YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gdG9Tb3VyY2UoRGF0YVZpZXcpLFxuICAgIG1hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShNYXApLFxuICAgIHByb21pc2VDdG9yU3RyaW5nID0gdG9Tb3VyY2UoUHJvbWlzZSksXG4gICAgc2V0Q3RvclN0cmluZyA9IHRvU291cmNlKFNldCksXG4gICAgd2Vha01hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShXZWFrTWFwKTtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhhc2ggb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBIYXNoKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIEhhc2hcbiAqL1xuZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuICB2YXIgcmVzdWx0ID0gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xuICB0aGlzLnNpemUgLT0gcmVzdWx0ID8gMSA6IDA7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGlmIChuYXRpdmVDcmVhdGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEID8gdW5kZWZpbmVkIDogcmVzdWx0O1xuICB9XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaEhhcyhrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gKGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkKSA6IGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgaGFzaCBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gaGFzaFNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgdGhpcy5zaXplICs9IHRoaXMuaGFzKGtleSkgPyAwIDogMTtcbiAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgSGFzaGAuXG5IYXNoLnByb3RvdHlwZS5jbGVhciA9IGhhc2hDbGVhcjtcbkhhc2gucHJvdG90eXBlWydkZWxldGUnXSA9IGhhc2hEZWxldGU7XG5IYXNoLnByb3RvdHlwZS5nZXQgPSBoYXNoR2V0O1xuSGFzaC5wcm90b3R5cGUuaGFzID0gaGFzaEhhcztcbkhhc2gucHJvdG90eXBlLnNldCA9IGhhc2hTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBsaXN0IGNhY2hlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gTGlzdENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IFtdO1xuICB0aGlzLnNpemUgPSAwO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxO1xuICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7XG4gICAgZGF0YS5wb3AoKTtcbiAgfSBlbHNlIHtcbiAgICBzcGxpY2UuY2FsbChkYXRhLCBpbmRleCwgMSk7XG4gIH1cbiAgLS10aGlzLnNpemU7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gYXNzb2NJbmRleE9mKHRoaXMuX19kYXRhX18sIGtleSkgPiAtMTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBsaXN0IGNhY2hlIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICArK3RoaXMuc2l6ZTtcbiAgICBkYXRhLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTGlzdENhY2hlYC5cbkxpc3RDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBsaXN0Q2FjaGVDbGVhcjtcbkxpc3RDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbGlzdENhY2hlRGVsZXRlO1xuTGlzdENhY2hlLnByb3RvdHlwZS5nZXQgPSBsaXN0Q2FjaGVHZXQ7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmhhcyA9IGxpc3RDYWNoZUhhcztcbkxpc3RDYWNoZS5wcm90b3R5cGUuc2V0ID0gbGlzdENhY2hlU2V0O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBtYXAgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gTWFwQ2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUNsZWFyKCkge1xuICB0aGlzLnNpemUgPSAwO1xuICB0aGlzLl9fZGF0YV9fID0ge1xuICAgICdoYXNoJzogbmV3IEhhc2gsXG4gICAgJ21hcCc6IG5ldyAoTWFwIHx8IExpc3RDYWNoZSksXG4gICAgJ3N0cmluZyc6IG5ldyBIYXNoXG4gIH07XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIHJlc3VsdCA9IGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcbiAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVHZXQoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuaGFzKGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbWFwIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IGdldE1hcERhdGEodGhpcywga2V5KSxcbiAgICAgIHNpemUgPSBkYXRhLnNpemU7XG5cbiAgZGF0YS5zZXQoa2V5LCB2YWx1ZSk7XG4gIHRoaXMuc2l6ZSArPSBkYXRhLnNpemUgPT0gc2l6ZSA/IDAgOiAxO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYE1hcENhY2hlYC5cbk1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7XG5NYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7XG5NYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwQ2FjaGVHZXQ7XG5NYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7XG5NYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7XG5cbi8qKlxuICpcbiAqIENyZWF0ZXMgYW4gYXJyYXkgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU2V0Q2FjaGUodmFsdWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gdmFsdWVzID09IG51bGwgPyAwIDogdmFsdWVzLmxlbmd0aDtcblxuICB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHRoaXMuYWRkKHZhbHVlc1tpbmRleF0pO1xuICB9XG59XG5cbi8qKlxuICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgYWRkXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBhbGlhcyBwdXNoXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuICB0aGlzLl9fZGF0YV9fLnNldCh2YWx1ZSwgSEFTSF9VTkRFRklORUQpO1xuICByZXR1cm4gdGhpcztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBpbiB0aGUgYXJyYXkgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFNldENhY2hlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModmFsdWUpO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgU2V0Q2FjaGVgLlxuU2V0Q2FjaGUucHJvdG90eXBlLmFkZCA9IFNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gc2V0Q2FjaGVBZGQ7XG5TZXRDYWNoZS5wcm90b3R5cGUuaGFzID0gc2V0Q2FjaGVIYXM7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0YWNrIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFN0YWNrKGVudHJpZXMpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZShlbnRyaWVzKTtcbiAgdGhpcy5zaXplID0gZGF0YS5zaXplO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIFN0YWNrXG4gKi9cbmZ1bmN0aW9uIHN0YWNrQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuICB0aGlzLnNpemUgPSAwO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgcmVzdWx0ID0gZGF0YVsnZGVsZXRlJ10oa2V5KTtcblxuICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgc3RhY2sgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrR2V0KGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQoa2V5KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzdGFjayB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXMoa2V5KTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBzdGFjayBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGlmIChkYXRhIGluc3RhbmNlb2YgTGlzdENhY2hlKSB7XG4gICAgdmFyIHBhaXJzID0gZGF0YS5fX2RhdGFfXztcbiAgICBpZiAoIU1hcCB8fCAocGFpcnMubGVuZ3RoIDwgTEFSR0VfQVJSQVlfU0laRSAtIDEpKSB7XG4gICAgICBwYWlycy5wdXNoKFtrZXksIHZhbHVlXSk7XG4gICAgICB0aGlzLnNpemUgPSArK2RhdGEuc2l6ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkYXRhID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZShwYWlycyk7XG4gIH1cbiAgZGF0YS5zZXQoa2V5LCB2YWx1ZSk7XG4gIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTdGFja2AuXG5TdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuU3RhY2sucHJvdG90eXBlWydkZWxldGUnXSA9IHN0YWNrRGVsZXRlO1xuU3RhY2sucHJvdG90eXBlLmdldCA9IHN0YWNrR2V0O1xuU3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuU3RhY2sucHJvdG90eXBlLnNldCA9IHN0YWNrU2V0O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgdGhlIGFycmF5LWxpa2UgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluaGVyaXRlZCBTcGVjaWZ5IHJldHVybmluZyBpbmhlcml0ZWQgcHJvcGVydHkgbmFtZXMuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBhcnJheUxpa2VLZXlzKHZhbHVlLCBpbmhlcml0ZWQpIHtcbiAgdmFyIGlzQXJyID0gaXNBcnJheSh2YWx1ZSksXG4gICAgICBpc0FyZyA9ICFpc0FyciAmJiBpc0FyZ3VtZW50cyh2YWx1ZSksXG4gICAgICBpc0J1ZmYgPSAhaXNBcnIgJiYgIWlzQXJnICYmIGlzQnVmZmVyKHZhbHVlKSxcbiAgICAgIGlzVHlwZSA9ICFpc0FyciAmJiAhaXNBcmcgJiYgIWlzQnVmZiAmJiBpc1R5cGVkQXJyYXkodmFsdWUpLFxuICAgICAgc2tpcEluZGV4ZXMgPSBpc0FyciB8fCBpc0FyZyB8fCBpc0J1ZmYgfHwgaXNUeXBlLFxuICAgICAgcmVzdWx0ID0gc2tpcEluZGV4ZXMgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpIDogW10sXG4gICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXG4gIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgIGlmICgoaW5oZXJpdGVkIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGtleSkpICYmXG4gICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKFxuICAgICAgICAgICAvLyBTYWZhcmkgOSBoYXMgZW51bWVyYWJsZSBgYXJndW1lbnRzLmxlbmd0aGAgaW4gc3RyaWN0IG1vZGUuXG4gICAgICAgICAgIGtleSA9PSAnbGVuZ3RoJyB8fFxuICAgICAgICAgICAvLyBOb2RlLmpzIDAuMTAgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gYnVmZmVycy5cbiAgICAgICAgICAgKGlzQnVmZiAmJiAoa2V5ID09ICdvZmZzZXQnIHx8IGtleSA9PSAncGFyZW50JykpIHx8XG4gICAgICAgICAgIC8vIFBoYW50b21KUyAyIGhhcyBlbnVtZXJhYmxlIG5vbi1pbmRleCBwcm9wZXJ0aWVzIG9uIHR5cGVkIGFycmF5cy5cbiAgICAgICAgICAgKGlzVHlwZSAmJiAoa2V5ID09ICdidWZmZXInIHx8IGtleSA9PSAnYnl0ZUxlbmd0aCcgfHwga2V5ID09ICdieXRlT2Zmc2V0JykpIHx8XG4gICAgICAgICAgIC8vIFNraXAgaW5kZXggcHJvcGVydGllcy5cbiAgICAgICAgICAgaXNJbmRleChrZXksIGxlbmd0aClcbiAgICAgICAgKSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG4gICAgICByZXR1cm4gbGVuZ3RoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldEFsbEtleXNgIGFuZCBgZ2V0QWxsS2V5c0luYCB3aGljaCB1c2VzXG4gKiBga2V5c0Z1bmNgIGFuZCBgc3ltYm9sc0Z1bmNgIHRvIGdldCB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBhbmRcbiAqIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzeW1ib2xzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBhbmQgc3ltYm9scy5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldEFsbEtleXMob2JqZWN0LCBrZXlzRnVuYywgc3ltYm9sc0Z1bmMpIHtcbiAgdmFyIHJlc3VsdCA9IGtleXNGdW5jKG9iamVjdCk7XG4gIHJldHVybiBpc0FycmF5KG9iamVjdCkgPyByZXN1bHQgOiBhcnJheVB1c2gocmVzdWx0LCBzeW1ib2xzRnVuYyhvYmplY3QpKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0VGFnYCB3aXRob3V0IGZhbGxiYWNrcyBmb3IgYnVnZ3kgZW52aXJvbm1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZFRhZyA6IG51bGxUYWc7XG4gIH1cbiAgcmV0dXJuIChzeW1Ub1N0cmluZ1RhZyAmJiBzeW1Ub1N0cmluZ1RhZyBpbiBPYmplY3QodmFsdWUpKVxuICAgID8gZ2V0UmF3VGFnKHZhbHVlKVxuICAgIDogb2JqZWN0VG9TdHJpbmcodmFsdWUpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzQXJndW1lbnRzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0FyZ3VtZW50cyh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBhcmdzVGFnO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdoaWNoIHN1cHBvcnRzIHBhcnRpYWwgY29tcGFyaXNvbnNcbiAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtib29sZWFufSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLlxuICogIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvblxuICogIDIgLSBQYXJ0aWFsIGNvbXBhcmlzb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3RMaWtlKHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcbiAgfVxuICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgYmFzZUlzRXF1YWwsIHN0YWNrKTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zXG4gKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG4gKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gb2JqSXNBcnIgPyBhcnJheVRhZyA6IGdldFRhZyhvYmplY3QpLFxuICAgICAgb3RoVGFnID0gb3RoSXNBcnIgPyBhcnJheVRhZyA6IGdldFRhZyhvdGhlcik7XG5cbiAgb2JqVGFnID0gb2JqVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvYmpUYWc7XG4gIG90aFRhZyA9IG90aFRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb3RoVGFnO1xuXG4gIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcsXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcsXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgaXNCdWZmZXIob2JqZWN0KSkge1xuICAgIGlmICghaXNCdWZmZXIob3RoZXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG9iaklzQXJyID0gdHJ1ZTtcbiAgICBvYmpJc09iaiA9IGZhbHNlO1xuICB9XG4gIGlmIChpc1NhbWVUYWcgJiYgIW9iaklzT2JqKSB7XG4gICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuICAgICAgPyBlcXVhbEFycmF5cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKVxuICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7XG4gIH1cbiAgaWYgKCEoYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHKSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcbiAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cbiAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjayk7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcGF0dGVybiA9IGlzRnVuY3Rpb24odmFsdWUpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzVHlwZWRBcnJheWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG4gICAgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW2Jhc2VHZXRUYWcodmFsdWUpXTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuICBpZiAoIWlzUHJvdG90eXBlKG9iamVjdCkpIHtcbiAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIE9iamVjdChvYmplY3QpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUcsXG4gICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KGFycmF5KTtcbiAgaWYgKHN0YWNrZWQgJiYgc3RhY2suZ2V0KG90aGVyKSkge1xuICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICB9XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gdHJ1ZSxcbiAgICAgIHNlZW4gPSAoYml0bWFzayAmIENPTVBBUkVfVU5PUkRFUkVEX0ZMQUcpID8gbmV3IFNldENhY2hlIDogdW5kZWZpbmVkO1xuXG4gIHN0YWNrLnNldChhcnJheSwgb3RoZXIpO1xuICBzdGFjay5zZXQob3RoZXIsIGFycmF5KTtcblxuICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XTtcblxuICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcbiAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihhcnJWYWx1ZSwgb3RoVmFsdWUsIGluZGV4LCBhcnJheSwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChjb21wYXJlZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKHNlZW4pIHtcbiAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghY2FjaGVIYXMoc2Vlbiwgb3RoSW5kZXgpICYmXG4gICAgICAgICAgICAgICAgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWVuLnB1c2gob3RoSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoXG4gICAgICAgICAgYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8XG4gICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaylcbiAgICAgICAgKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTtcbiAgc3RhY2tbJ2RlbGV0ZSddKG90aGVyKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG4gKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgc3dpdGNoICh0YWcpIHtcbiAgICBjYXNlIGRhdGFWaWV3VGFnOlxuICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuICAgICAgICAgIChvYmplY3QuYnl0ZU9mZnNldCAhPSBvdGhlci5ieXRlT2Zmc2V0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvYmplY3QgPSBvYmplY3QuYnVmZmVyO1xuICAgICAgb3RoZXIgPSBvdGhlci5idWZmZXI7XG5cbiAgICBjYXNlIGFycmF5QnVmZmVyVGFnOlxuICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuICAgICAgICAgICFlcXVhbEZ1bmMobmV3IFVpbnQ4QXJyYXkob2JqZWN0KSwgbmV3IFVpbnQ4QXJyYXkob3RoZXIpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIGNhc2UgYm9vbFRhZzpcbiAgICBjYXNlIGRhdGVUYWc6XG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAvLyBDb2VyY2UgYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCBhbmQgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzLlxuICAgICAgLy8gSW52YWxpZCBkYXRlcyBhcmUgY29lcmNlZCB0byBgTmFOYC5cbiAgICAgIHJldHVybiBlcSgrb2JqZWN0LCArb3RoZXIpO1xuXG4gICAgY2FzZSBlcnJvclRhZzpcbiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsXG4gICAgICAvLyBhcyBlcXVhbC4gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1yZWdleHAucHJvdG90eXBlLnRvc3RyaW5nXG4gICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cbiAgICBjYXNlIG1hcFRhZzpcbiAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblxuICAgIGNhc2Ugc2V0VGFnOlxuICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRztcbiAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblxuICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gICAgICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuICAgICAgaWYgKHN0YWNrZWQpIHtcbiAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gICAgICB9XG4gICAgICBiaXRtYXNrIHw9IENPTVBBUkVfVU5PUkRFUkVEX0ZMQUc7XG5cbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuICAgICAgdmFyIHJlc3VsdCA9IGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spO1xuICAgICAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSBzeW1ib2xUYWc6XG4gICAgICBpZiAoc3ltYm9sVmFsdWVPZikge1xuICAgICAgICByZXR1cm4gc3ltYm9sVmFsdWVPZi5jYWxsKG9iamVjdCkgPT0gc3ltYm9sVmFsdWVPZi5jYWxsKG90aGVyKTtcbiAgICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUcsXG4gICAgICBvYmpQcm9wcyA9IGdldEFsbEtleXMob2JqZWN0KSxcbiAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgIG90aFByb3BzID0gZ2V0QWxsS2V5cyhvdGhlciksXG4gICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzUGFydGlhbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc1BhcnRpYWwgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gIGlmIChzdGFja2VkICYmIHN0YWNrLmdldChvdGhlcikpIHtcbiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgfVxuICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuICBzdGFjay5zZXQob3RoZXIsIG9iamVjdCk7XG5cbiAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIG9ialZhbHVlLCBrZXksIG90aGVyLCBvYmplY3QsIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykpXG4gICAgICAgICAgOiBjb21wYXJlZFxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgc3RhY2tbJ2RlbGV0ZSddKG90aGVyKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLlxuICovXG5mdW5jdGlvbiBnZXRBbGxLZXlzKG9iamVjdCkge1xuICByZXR1cm4gYmFzZUdldEFsbEtleXMob2JqZWN0LCBrZXlzLCBnZXRTeW1ib2xzKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkge1xuICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcbiAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG4gICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ11cbiAgICA6IGRhdGEubWFwO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuICByZXR1cm4gYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUdldFRhZ2Agd2hpY2ggaWdub3JlcyBgU3ltYm9sLnRvU3RyaW5nVGFnYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcmF3IGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGdldFJhd1RhZyh2YWx1ZSkge1xuICB2YXIgaXNPd24gPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBzeW1Ub1N0cmluZ1RhZyksXG4gICAgICB0YWcgPSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG5cbiAgdHJ5IHtcbiAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB1bmRlZmluZWQ7XG4gICAgdmFyIHVubWFza2VkID0gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge31cblxuICB2YXIgcmVzdWx0ID0gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIGlmICh1bm1hc2tlZCkge1xuICAgIGlmIChpc093bikge1xuICAgICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2Ygc3ltYm9scy5cbiAqL1xudmFyIGdldFN5bWJvbHMgPSAhbmF0aXZlR2V0U3ltYm9scyA/IHN0dWJBcnJheSA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gIHJldHVybiBhcnJheUZpbHRlcihuYXRpdmVHZXRTeW1ib2xzKG9iamVjdCksIGZ1bmN0aW9uKHN5bWJvbCkge1xuICAgIHJldHVybiBwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iamVjdCwgc3ltYm9sKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG52YXIgZ2V0VGFnID0gYmFzZUdldFRhZztcblxuLy8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEgYW5kIHByb21pc2VzIGluIE5vZGUuanMgPCA2LlxuaWYgKChEYXRhVmlldyAmJiBnZXRUYWcobmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSkpICE9IGRhdGFWaWV3VGFnKSB8fFxuICAgIChNYXAgJiYgZ2V0VGFnKG5ldyBNYXApICE9IG1hcFRhZykgfHxcbiAgICAoUHJvbWlzZSAmJiBnZXRUYWcoUHJvbWlzZS5yZXNvbHZlKCkpICE9IHByb21pc2VUYWcpIHx8XG4gICAgKFNldCAmJiBnZXRUYWcobmV3IFNldCkgIT0gc2V0VGFnKSB8fFxuICAgIChXZWFrTWFwICYmIGdldFRhZyhuZXcgV2Vha01hcCkgIT0gd2Vha01hcFRhZykpIHtcbiAgZ2V0VGFnID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUdldFRhZyh2YWx1ZSksXG4gICAgICAgIEN0b3IgPSByZXN1bHQgPT0gb2JqZWN0VGFnID8gdmFsdWUuY29uc3RydWN0b3IgOiB1bmRlZmluZWQsXG4gICAgICAgIGN0b3JTdHJpbmcgPSBDdG9yID8gdG9Tb3VyY2UoQ3RvcikgOiAnJztcblxuICAgIGlmIChjdG9yU3RyaW5nKSB7XG4gICAgICBzd2l0Y2ggKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcbiAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOiByZXR1cm4gcHJvbWlzZVRhZztcbiAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcbiAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpXG4gICAgOiAodmFsdWUgPT09IG51bGwpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgZnVuY2AgaGFzIGl0cyBzb3VyY2UgbWFza2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTWFza2VkKGZ1bmMpIHtcbiAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzb3VyY2UgY29kZS5cbiAqL1xuZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuICBpZiAoZnVuYyAhPSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogUGVyZm9ybXMgYVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9O1xuICogdmFyIG90aGVyID0geyAnYSc6IDEgfTtcbiAqXG4gKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKCdhJywgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKE5hTiwgTmFOKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcmd1bWVudHMgPSBiYXNlSXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPyBiYXNlSXNBcmd1bWVudHMgOiBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcbiAgICAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgYnVmZmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4zLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgYnVmZmVyLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNCdWZmZXIobmV3IEJ1ZmZlcigyKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0J1ZmZlcihuZXcgVWludDhBcnJheSgyKSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNCdWZmZXIgPSBuYXRpdmVJc0J1ZmZlciB8fCBzdHViRmFsc2U7XG5cbi8qKlxuICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZVxuICogZXF1aXZhbGVudC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYXJyYXkgYnVmZmVycywgYm9vbGVhbnMsXG4gKiBkYXRlIG9iamVjdHMsIGVycm9yIG9iamVjdHMsIG1hcHMsIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsXG4gKiBzZXRzLCBzdHJpbmdzLCBzeW1ib2xzLCBhbmQgdHlwZWQgYXJyYXlzLiBgT2JqZWN0YCBvYmplY3RzIGFyZSBjb21wYXJlZFxuICogYnkgdGhlaXIgb3duLCBub3QgaW5oZXJpdGVkLCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuIEZ1bmN0aW9ucyBhbmQgRE9NXG4gKiBub2RlcyBhcmUgY29tcGFyZWQgYnkgc3RyaWN0IGVxdWFsaXR5LCBpLmUuIGA9PT1gLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9O1xuICogdmFyIG90aGVyID0geyAnYSc6IDEgfTtcbiAqXG4gKiBfLmlzRXF1YWwob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogb2JqZWN0ID09PSBvdGhlcjtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRXF1YWwodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gU2FmYXJpIDkgd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXlzIGFuZCBvdGhlciBjb25zdHJ1Y3RvcnMuXG4gIHZhciB0YWcgPSBiYXNlR2V0VGFnKHZhbHVlKTtcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWcgfHwgdGFnID09IGFzeW5jVGFnIHx8IHRhZyA9PSBwcm94eVRhZztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNMZW5ndGgoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkoW10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzVHlwZWRBcnJheSA9IG5vZGVJc1R5cGVkQXJyYXkgPyBiYXNlVW5hcnkobm9kZUlzVHlwZWRBcnJheSkgOiBiYXNlSXNUeXBlZEFycmF5O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5cyhuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqXG4gKiBfLmtleXMoJ2hpJyk7XG4gKiAvLyA9PiBbJzAnLCAnMSddXG4gKi9cbmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG4gIHJldHVybiBpc0FycmF5TGlrZShvYmplY3QpID8gYXJyYXlMaWtlS2V5cyhvYmplY3QpIDogYmFzZUtleXMob2JqZWN0KTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGVtcHR5IGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4xMy4wXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZW1wdHkgYXJyYXkuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBhcnJheXMgPSBfLnRpbWVzKDIsIF8uc3R1YkFycmF5KTtcbiAqXG4gKiBjb25zb2xlLmxvZyhhcnJheXMpO1xuICogLy8gPT4gW1tdLCBbXV1cbiAqXG4gKiBjb25zb2xlLmxvZyhhcnJheXNbMF0gPT09IGFycmF5c1sxXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBzdHViQXJyYXkoKSB7XG4gIHJldHVybiBbXTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGBmYWxzZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEzLjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRpbWVzKDIsIF8uc3R1YkZhbHNlKTtcbiAqIC8vID0+IFtmYWxzZSwgZmFsc2VdXG4gKi9cbmZ1bmN0aW9uIHN0dWJGYWxzZSgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRXF1YWw7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUucGF0aHMgPSBbXTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJjb25zdCBjcmVhdGVBcnJheU9mQXR0YWNrcyA9ICgpID0+IHtcbiAgY29uc3QgYXR0YWNrcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgIGNvbnN0IHhDb29yZGluYXRlID0gaTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgIGNvbnN0IHlDb29yZGluYXRlID0gajtcbiAgICAgIGF0dGFja3MucHVzaChbeENvb3JkaW5hdGUsIHlDb29yZGluYXRlXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBhdHRhY2tzO1xufTtcblxuY29uc3QgcG9zc2libGVBdHRhY2tzID0gY3JlYXRlQXJyYXlPZkF0dGFja3MoKTtcblxuY29uc3QgZ2V0VmFsaWRBdHRhY2sgPSAoYXR0YWNrc0FycmF5KSA9PlxuICBhdHRhY2tzQXJyYXlcbiAgICAuc3BsaWNlKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGF0dGFja3NBcnJheS5sZW5ndGgpLCAxKVxuICAgIC5mbGF0KCk7XG5cbmV4cG9ydCBkZWZhdWx0IHBvc3NpYmxlQXR0YWNrcztcbmV4cG9ydCB7IGdldFZhbGlkQXR0YWNrIH07XG4iLCJpbXBvcnQgcG9zc2libGVBdHRhY2tzIGZyb20gXCIuLi9nYW1lSGVscGVycy9BSS1wb3NzaWJsZS1hdHRhY2tzXCI7XG5cbmNvbnN0IHBsYXllckJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXItYm9hcmRcIik7XG5jb25zdCBBSUJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaS1ib2FyZFwiKTtcbmNvbnN0IGJvYXJkRm9yUGxhY2VtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGFjZS1zaGlwLWJvYXJkXCIpO1xuXG5jb25zdCBjcmVhdGVCb2FyZHMgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgY29vcmRpbmF0ZXMuZm9yRWFjaCgoY29vcmRpbmF0ZSkgPT4ge1xuICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmVcIik7XG4gICAgc3F1YXJlLmRhdGFzZXQueCA9IGNvb3JkaW5hdGVbMF07XG4gICAgc3F1YXJlLmRhdGFzZXQueSA9IGNvb3JkaW5hdGVbMV07XG4gICAgcGxheWVyQm9hcmQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICBjb25zdCBzcXVhcmVDbG9uZTEgPSBzcXVhcmUuY2xvbmVOb2RlKCk7XG4gICAgQUlCb2FyZC5hcHBlbmRDaGlsZChzcXVhcmVDbG9uZTEpO1xuICAgIGNvbnN0IHNxdWFyZUNsb25lMiA9IHNxdWFyZS5jbG9uZU5vZGUoKTtcbiAgICBib2FyZEZvclBsYWNlbWVudC5hcHBlbmRDaGlsZChzcXVhcmVDbG9uZTIpO1xuICB9KTtcbn07XG5cbmNyZWF0ZUJvYXJkcyhwb3NzaWJsZUF0dGFja3MpO1xuXG4iLCJjb25zdCBTaGlwID0gKGxlbmd0aCwgbmFtZSkgPT4ge1xuICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG4gIGNvbnN0IGdldE5hbWUgPSAoKSA9PiBuYW1lO1xuICBsZXQgaGl0c1Rha2VuID0gMDtcbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIGhpdHNUYWtlbiArPSAxO1xuICB9O1xuICBjb25zdCBnZXRIaXRzVGFrZW4gPSAoKSA9PiBoaXRzVGFrZW47XG5cbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gaGl0c1Rha2VuID49IGxlbmd0aDtcblxuICByZXR1cm4geyBnZXRMZW5ndGgsIGdldE5hbWUsIGhpdCwgZ2V0SGl0c1Rha2VuLCBpc1N1bmsgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNoaXA7XG4iLCJcbiAgY29uc3QgaWxsZWdhbFZhcmlhbnRzID0gW1xuICAgIFswLCAtMV0sXG4gICAgWy0xLCAtMV0sXG4gICAgWzEsIC0xXSxcbiAgICBbLTEsIDBdLFxuICAgIFsxLCAwXSxcbiAgICBbMCwgMV0sXG4gICAgWy0xLCArMV0sXG4gICAgWzEsIDFdLFxuICBdO1xuXG5jb25zdCBzaGlwQXJyYXkgPSBbXG4gIHtcbiAgICBuYW1lOiBcImRlc3Ryb3llclwiLFxuICAgIGxlbmd0aDogMixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwic3VibWFyaW5lXCIsXG4gICAgbGVuZ3RoOiAzLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJjcnVpc2VyXCIsXG4gICAgbGVuZ3RoOiAzLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJiYXR0bGVzaGlwXCIsXG4gICAgbGVuZ3RoOiA0LFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJjYXJyaWVyXCIsXG4gICAgbGVuZ3RoOiA1LFxuICB9LFxuXTtcblxuZXhwb3J0IHtpbGxlZ2FsVmFyaWFudHMsIHNoaXBBcnJheX0iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLXN5bnRheCAqL1xuaW1wb3J0IGlzRXF1YWwgZnJvbSBcImxvZGFzaC5pc2VxdWFsXCI7XG5pbXBvcnQgcG9zc2libGVBdHRhY2tzIGZyb20gXCIuLi9nYW1lSGVscGVycy9BSS1wb3NzaWJsZS1hdHRhY2tzXCI7XG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9iYXR0bGVzaGlwLWZhY3RvcnlcIjtcbmltcG9ydCB7IGlsbGVnYWxWYXJpYW50cywgc2hpcEFycmF5IH0gZnJvbSBcIi4uL2dhbWVIZWxwZXJzL3BsYWNlbWVudC1oZWxwZXJzXCI7XG5cbmNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgY29uc3QgYm9hcmQgPSBbLi4ucG9zc2libGVBdHRhY2tzXTtcbiAgY29uc3Qgc2hpcExpc3QgPSBbXTtcbiAgY29uc3QgbWlzc2VkU2hvdHMgPSBuZXcgU2V0KCk7XG4gIGNvbnN0IHVuYXZhaWxhYmxlQ29vcmRzID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0IGlzSW5BbkFycmF5ID0gKGFycmF5LCBlbGVtZW50KSA9PlxuICAgIGFycmF5LnNvbWUoKGVsKSA9PiBpc0VxdWFsKGVsLCBlbGVtZW50KSk7XG5cbiAgY29uc3QgZ2VuZXJhdGVJbGxlZ2FsTW92ZXMgPSAoXG4gICAgY29vcmRpbmF0ZXMsXG4gICAgaWxsZWdhbFBvc3NpYmlsaXRlcyA9IGlsbGVnYWxWYXJpYW50cyxcbiAgICBpbGxlZ2FsU2V0ID0gdW5hdmFpbGFibGVDb29yZHNcbiAgKSA9PiB7XG4gICAgY29vcmRpbmF0ZXMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWxsZWdhbFBvc3NpYmlsaXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBpbGxlZ2FsVmFyaWFudCA9IGlsbGVnYWxQb3NzaWJpbGl0ZXNbaV07XG4gICAgICAgIGNvbnN0IGlsbGVnYWxNb3ZlID0gW1xuICAgICAgICAgIGNvb3JkWzBdICsgaWxsZWdhbFZhcmlhbnRbMF0sXG4gICAgICAgICAgY29vcmRbMV0gKyBpbGxlZ2FsVmFyaWFudFsxXSxcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlsbGVnYWxNb3ZlWzBdID49IDAgJiZcbiAgICAgICAgICBpbGxlZ2FsTW92ZVswXSA8PSA5ICYmXG4gICAgICAgICAgaWxsZWdhbE1vdmVbMV0gPj0gMCAmJlxuICAgICAgICAgIGlsbGVnYWxNb3ZlWzFdIDw9IDkgJiZcbiAgICAgICAgICBpc0luQW5BcnJheShjb29yZGluYXRlcywgaWxsZWdhbE1vdmUpID09PSBmYWxzZVxuICAgICAgICApXG4gICAgICAgICAgaWxsZWdhbFNldC5hZGQoU3RyaW5nKGlsbGVnYWxNb3ZlKSk7XG4gICAgICB9XG4gICAgICBpbGxlZ2FsU2V0LmFkZChTdHJpbmcoY29vcmQpKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBpc0luSWxsZWdhbENvb3JkcyA9IChcbiAgICBzaGlwUGxhY2VtZW50LFxuICAgIGlsbGVnYWxNb3ZlcyA9IHVuYXZhaWxhYmxlQ29vcmRzXG4gICkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciAoY29uc3QgcGxhY2VtZW50IG9mIHNoaXBQbGFjZW1lbnQpIHtcbiAgICAgIGlmIChpbGxlZ2FsTW92ZXMuaGFzKFN0cmluZyhwbGFjZW1lbnQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjb25zdCBwbGFjZVNoaXAgPSAobGVuZ3RoLCBuYW1lLCBjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IHNoaXBPYmplY3QgPSB7XG4gICAgICBzaGlwOiBTaGlwKGxlbmd0aCwgbmFtZSksXG4gICAgICBjb29yZGluYXRlcyxcbiAgICB9O1xuICAgIHNoaXBMaXN0LnB1c2goc2hpcE9iamVjdCk7XG4gICAgZ2VuZXJhdGVJbGxlZ2FsTW92ZXMoY29vcmRpbmF0ZXMsIGlsbGVnYWxWYXJpYW50cywgdW5hdmFpbGFibGVDb29yZHMpO1xuICB9O1xuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZSkgPT4ge1xuICAgIGNvbnN0IGluZGV4T2ZTaGlwID0gY2hlY2tIaXQoY29vcmRpbmF0ZSk7XG4gICAgaWYgKGluZGV4T2ZTaGlwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHNoaXBJbkxpc3QgPSBzaGlwTGlzdFtpbmRleE9mU2hpcF07XG4gICAgICBzaGlwSW5MaXN0LnNoaXAuaGl0KCk7XG4gICAgICBpZiAoc2hpcEluTGlzdC5zaGlwLmlzU3VuaygpKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhpdDogdHJ1ZSxcbiAgICAgICAgICBzdW5rOiB0cnVlLFxuICAgICAgICAgIGNvb3Jkczogc2hpcEluTGlzdC5jb29yZGluYXRlcyxcbiAgICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhpdDogdHJ1ZSxcbiAgICAgICAgc3VuazogZmFsc2UsXG4gICAgICAgIGNvb3JkczogbnVsbCxcbiAgICAgIH07XG4gICAgfVxuICAgIG1pc3NlZFNob3RzLmFkZChTdHJpbmcoY29vcmRpbmF0ZSkpO1xuICAgIHJldHVybiB7XG4gICAgICBoaXQ6IGZhbHNlLFxuICAgICAgc3VuazogZmFsc2UsXG4gICAgICBjb29yZHM6IG51bGwsXG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBjaGVja0hpdCA9IChjb29yZGluYXRlKSA9PiB7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IgKGNvbnN0IG9iamVjdCBvZiBzaGlwTGlzdCkge1xuICAgICAgaWYgKG9iamVjdC5jb29yZGluYXRlcy5zb21lKCh4KSA9PiBpc0VxdWFsKGNvb3JkaW5hdGUsIHgpKSkgcmV0dXJuIGluZGV4O1xuICAgICAgaW5kZXggKz0gMTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYXJlQWxsU3VuayA9ICgpID0+IHNoaXBMaXN0LmV2ZXJ5KChlbCkgPT4gZWwuc2hpcC5pc1N1bmsoKSk7XG5cbiAgLy8gQUkgcmFuZG9tIHNoaXAgcGxhY2VtZW50XG4gIGNvbnN0IGdldFJhbmRvbUluZGV4ID0gKGluZGV4QXJyYXkpID0+XG4gICAgaW5kZXhBcnJheS5zcGxpY2UoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaW5kZXhBcnJheS5sZW5ndGgpLCAxKTtcblxuICBjb25zdCBnZXRSYW5kb21BbGlnbm1lbnQgPSAoYWxpZ25tZW50cyA9IFtcImhvcml6b250YWxcIiwgXCJ2ZXJ0aWNhbFwiXSkgPT5cbiAgICBhbGlnbm1lbnRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXTtcblxuICBjb25zdCBnZXRJbml0aWFsQm9hcmRTcXVhcmUgPSAoc2hpcExlbmd0aCwgYWxpZ25tZW50KSA9PiB7XG4gICAgbGV0IGluaXRpYWxCb2FyZFNxdWFyZTtcbiAgICB3aGlsZSAoXG4gICAgICBpbml0aWFsQm9hcmRTcXVhcmUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgdW5hdmFpbGFibGVDb29yZHMuaGFzKFN0cmluZyhpbml0aWFsQm9hcmRTcXVhcmUpKVxuICAgICkge1xuICAgICAgaWYgKGFsaWdubWVudCA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbENvb3JkID1cbiAgICAgICAgICBib2FyZFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoYm9hcmQubGVuZ3RoIC0gc2hpcExlbmd0aCkpXTtcblxuICAgICAgICAvLyBQcmV2ZW50IGZyb20gZ29pbmcgb3V0IG9mIGJvdW5kcyBvbiB5IGF4aXNcbiAgICAgICAgaWYgKGhvcml6b250YWxDb29yZFsxXSArIHNoaXBMZW5ndGggPD0gMTApXG4gICAgICAgICAgaW5pdGlhbEJvYXJkU3F1YXJlID0gaG9yaXpvbnRhbENvb3JkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbENvb3JkID1cbiAgICAgICAgICBib2FyZFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoKHNoaXBMZW5ndGggKyAxKSAqIDEwKSldO1xuXG4gICAgICAgIC8vIFByZXZlbnQgZnJvbSBnb2luZyBvdXQgb2YgYm91bmRzIG9uIHggYXhpc1xuICAgICAgICBpZiAoaG9yaXpvbnRhbENvb3JkWzBdICsgc2hpcExlbmd0aCA8PSAxMClcbiAgICAgICAgICBpbml0aWFsQm9hcmRTcXVhcmUgPSBob3Jpem9udGFsQ29vcmQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbml0aWFsQm9hcmRTcXVhcmU7XG4gIH07XG5cbiAgY29uc3QgZ2V0UmFuZG9tUGxhY2VtZW50ID0gKHNoaXBMZW5ndGgpID0+IHtcbiAgICBjb25zdCBwbGFjZW1lbnQgPSBbXTtcbiAgICB3aGlsZSAocGxhY2VtZW50Lmxlbmd0aCA8PSAxKSB7XG4gICAgICBjb25zdCBhbGlnbm1lbnQgPSBnZXRSYW5kb21BbGlnbm1lbnQoKTtcbiAgICAgIGNvbnN0IGluaXRpYWxDb29yZCA9IGdldEluaXRpYWxCb2FyZFNxdWFyZShzaGlwTGVuZ3RoLCBhbGlnbm1lbnQpO1xuICAgICAgcGxhY2VtZW50LnB1c2goaW5pdGlhbENvb3JkKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gY29uc3QgbGFzdEl0ZW0gPSBwbGFjZW1lbnRbcGxhY2VtZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoYWxpZ25tZW50ID09PSBcImhvcml6b250YWxcIilcbiAgICAgICAgICBwbGFjZW1lbnQucHVzaChbaW5pdGlhbENvb3JkWzBdLCBpbml0aWFsQ29vcmRbMV0gKyBpXSk7XG4gICAgICAgIGVsc2UgcGxhY2VtZW50LnB1c2goW2luaXRpYWxDb29yZFswXSArIGksIGluaXRpYWxDb29yZFsxXV0pO1xuICAgICAgfVxuICAgICAgaWYgKGlzSW5JbGxlZ2FsQ29vcmRzKHBsYWNlbWVudCkpIHBsYWNlbWVudC5zcGxpY2UoMCk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVJbGxlZ2FsTW92ZXMocGxhY2VtZW50KTtcbiAgICByZXR1cm4gcGxhY2VtZW50O1xuICB9O1xuICBjb25zdCByYW5kb21seVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgY29uc3QgaW5kZXhBcnJheSA9IFswLCAxLCAyLCAzLCA0XTtcbiAgICB3aGlsZSAoaW5kZXhBcnJheS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gZ2V0UmFuZG9tSW5kZXgoaW5kZXhBcnJheSk7XG4gICAgICBjb25zdCBzaGlwSGVscGVyID0gc2hpcEFycmF5W3JhbmRvbUluZGV4XTtcbiAgICAgIGNvbnN0IHNoaXBQbGFjZW1lbnQgPSBnZXRSYW5kb21QbGFjZW1lbnQoc2hpcEhlbHBlci5sZW5ndGgpO1xuICAgICAgcGxhY2VTaGlwKHNoaXBIZWxwZXIubGVuZ3RoLCBzaGlwSGVscGVyLm5hbWUsIHNoaXBQbGFjZW1lbnQpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBzaGlwTGlzdCxcbiAgICBwbGFjZVNoaXAsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBtaXNzZWRTaG90cyxcbiAgICBhcmVBbGxTdW5rLFxuICAgIHVuYXZhaWxhYmxlQ29vcmRzLFxuICAgIGlzSW5JbGxlZ2FsQ29vcmRzLFxuICAgIHJhbmRvbWx5UGxhY2VTaGlwcyxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDtcbiIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmNvbnN0IFBsYXllciA9IChuYW1lKSA9PiB7XG4gIGNvbnN0IGdldE5hbWUgPSAoKSA9PiBuYW1lO1xuICBjb25zdCBib2FyZCA9IEdhbWVib2FyZCgpO1xuXG4gIGNvbnN0IGF0dGFjayA9IChlbmVteSwgY29vcmRpbmF0ZSkgPT4gZW5lbXkuYm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlKTtcblxuICByZXR1cm4geyBnZXROYW1lLCBib2FyZCwgYXR0YWNrIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7XG4iLCJpbXBvcnQgUGxheWVyIGZyb20gXCIuL3BsYXllci1mYWN0b3J5XCI7XG5pbXBvcnQgcG9zc2libGVBdHRhY2tzLCB7XG4gIGdldFZhbGlkQXR0YWNrLFxufSBmcm9tIFwiLi4vZ2FtZUhlbHBlcnMvQUktcG9zc2libGUtYXR0YWNrc1wiO1xuXG5jb25zdCBwbGF5ZXJCb2FyZERPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyLWJvYXJkXCIpO1xuY29uc3QgQUlCb2FyZERPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWktYm9hcmRcIik7XG5jb25zdCB0dXJuRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHVybi1kaXNwbGF5XCIpO1xuY29uc3QgZ2FtZUhhbmRsZXIgPSAocGxheWVyTmFtZSkgPT4ge1xuICBsZXQgcGxheWVyVHVybiA9IFwicmVhbFBsYXllclwiO1xuICBjb25zdCBwbGF5ZXJzID0ge1xuICAgIHJlYWxQbGF5ZXI6IFBsYXllcihwbGF5ZXJOYW1lKSxcbiAgICBBSTogUGxheWVyKFwiQUlcIiksXG4gIH07XG5cbiAgLy8gU2hpcCBwbGFjZW1lbnRcbiAgLyogbGV0IGlsbGVnYWxTaGlwUGxhY2VtZW50cyA9IG5ldyBTZXQoKTsgKi9cblxuICAvLyBDaGVjayBpZiB5IGF4aXMgaXMgb3V0IG9mIGJvdW5kXG5cbiAgY29uc3QgaXNPdXRPZkJvdW5kcyA9IChjb29yZGluYXRlLCBzaGlwTGVuZ3RoLCBhbGlnbm1lbnQgPSBcImhvcml6b250YWxcIikgPT5cbiAgICBhbGlnbm1lbnQgPT09IFwiaG9yaXpvbnRhbFwiXG4gICAgICA/IGNvb3JkaW5hdGVbMV0gKyBzaGlwTGVuZ3RoID4gMTBcbiAgICAgIDogY29vcmRpbmF0ZVswXSArIHNoaXBMZW5ndGggPiAxMDtcblxuICBjb25zdCBnZW5lcmF0ZVBsYWNlbWVudCA9IChcbiAgICBjb29yZGluYXRlLFxuICAgIHNoaXBMZW5ndGgsXG4gICAgYWxpZ25tZW50ID0gXCJob3Jpem9udGFsXCJcbiAgKSA9PiB7XG4gICAgY29uc3Qgc2hpcFBsYWNlbWVudCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYWxpZ25tZW50ID09PSBcImhvcml6b250YWxcIilcbiAgICAgICAgc2hpcFBsYWNlbWVudC5wdXNoKFtjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdICsgaV0pO1xuICAgICAgZWxzZSBzaGlwUGxhY2VtZW50LnB1c2goW2Nvb3JkaW5hdGVbMF0gKyBpLCBjb29yZGluYXRlWzFdXSk7XG4gICAgfVxuICAgIHJldHVybiBzaGlwUGxhY2VtZW50O1xuICB9O1xuICAvKiBcbiAgY29uc3QgaXNJbkFuQXJyYXkgPSAoYXJyYXksIGVsZW1lbnQpID0+XG4gICAgYXJyYXkuc29tZSgoZWwpID0+IGlzRXF1YWwoZWwsIGVsZW1lbnQpKTsgKi9cblxuICBjb25zdCBpc1NoaXBQbGFjZWQgPSAobmFtZSwgc2hpcExpc3QpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICBmb3IgKGNvbnN0IHNoaXBPYmplY3Qgb2Ygc2hpcExpc3QpIHtcbiAgICAgIGlmIChzaGlwT2JqZWN0LnNoaXAuZ2V0TmFtZSgpID09PSBuYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGFuY2hvckFTaGlwID0gKGNob3NlbkNvb3JkaW5hdGUsIHNoaXBEYXRhKSA9PiB7XG4gICAgaWYgKGlzT3V0T2ZCb3VuZHMoY2hvc2VuQ29vcmRpbmF0ZSwgc2hpcERhdGEubGVuZ3RoLCBzaGlwRGF0YS5hbGlnbm1lbnQpKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHNoaXBQbGFjZW1lbnQgPSBnZW5lcmF0ZVBsYWNlbWVudChcbiAgICAgIGNob3NlbkNvb3JkaW5hdGUsXG4gICAgICBzaGlwRGF0YS5sZW5ndGgsXG4gICAgICBzaGlwRGF0YS5hbGlnbm1lbnRcbiAgICApO1xuICAgIGNvbnN0IHBsYXllckJvYXJkID0gcGxheWVycy5yZWFsUGxheWVyLmJvYXJkO1xuICAgIGlmIChcbiAgICAgIGlzU2hpcFBsYWNlZChzaGlwRGF0YS5uYW1lLCBwbGF5ZXJCb2FyZC5zaGlwTGlzdCkgfHxcbiAgICAgIHBsYXllckJvYXJkLmlzSW5JbGxlZ2FsQ29vcmRzKHNoaXBQbGFjZW1lbnQpXG4gICAgKVxuICAgICAgcmV0dXJuO1xuXG4gICAgcGxheWVyQm9hcmQucGxhY2VTaGlwKHNoaXBEYXRhLmxlbmd0aCwgc2hpcERhdGEubmFtZSwgc2hpcFBsYWNlbWVudCk7XG4gICAgcmV0dXJuIHNoaXBQbGFjZW1lbnQ7XG4gIH07XG5cbiAgY29uc3QgY2FuU3RhcnRHYW1lID0gKCkgPT5cbiAgICBwbGF5ZXJzLnJlYWxQbGF5ZXIuYm9hcmQuc2hpcExpc3QubGVuZ3RoID09PSA1OyAvKiAgJiZcbiAgICBwbGF5ZXJzLkFJLmJvYXJkLnNoaXBMaXN0Lmxlbmd0aCA9PT0gNTsgKi9cblxuICAvLyBHYW1lIGxvb3BcbiAgY29uc3QgQUlQb3NzaWJsZUF0dGFja3MgPSBwb3NzaWJsZUF0dGFja3M7XG5cbiAgY29uc3QgZ2V0VHVybiA9ICgpID0+IHBsYXllclR1cm47XG5cbiAgY29uc3QgY2hhbmdlVHVybiA9ICgpID0+IHtcbiAgICBpZiAocGxheWVyVHVybiA9PT0gXCJyZWFsUGxheWVyXCIpIHBsYXllclR1cm4gPSBcImFpXCI7XG4gICAgZWxzZSBwbGF5ZXJUdXJuID0gXCJyZWFsUGxheWVyXCI7XG4gICAgcmV0dXJuIHBsYXllclR1cm47XG4gIH07XG5cbiAgY29uc3QgY29udmVydFRvQ29vcmRpbmF0ZSA9ICh0YXJnZXQpID0+IFtcbiAgICBOdW1iZXIodGFyZ2V0LmRhdGFzZXQueCksXG4gICAgTnVtYmVyKHRhcmdldC5kYXRhc2V0LnkpLFxuICBdO1xuXG4gIGNvbnN0IGRpc3BsYXlXaG9zZVR1cm4gPSAodHVybikgPT4ge1xuICAgIGNvbnN0IHdob3NlVHVybiA9IHR1cm47XG4gICAgaWYgKHdob3NlVHVybiA9PT0gXCJyZWFsUGxheWVyXCIpIHtcbiAgICAgIHR1cm5EaXNwbGF5LnRleHRDb250ZW50ID0gXCJjb21wdXRlcidzIHR1cm5cIjtcbiAgICB9IGVsc2UgdHVybkRpc3BsYXkudGV4dENvbnRlbnQgPSBcInBsYXllcidzIHR1cm5cIjtcbiAgfTtcblxuICBjb25zdCBtYXJrU3VuayA9IChjb29yZHMsIHR1cm4pID0+IHtcbiAgICBsZXQgYm9hcmRUb01hcms7XG4gICAgaWYgKHR1cm4gPT09IFwicmVhbFBsYXllclwiKSBib2FyZFRvTWFyayA9IEFJQm9hcmRET007XG4gICAgZWxzZSBib2FyZFRvTWFyayA9IHBsYXllckJvYXJkRE9NO1xuXG4gICAgY29vcmRzLmZvckVhY2goKGNvb3JkKSA9PiB7XG4gICAgICBjb25zdCBoaXRTcXVhcmUgPSBib2FyZFRvTWFyay5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgW2RhdGEteD1cIiR7Y29vcmRbMF19XCJdW2RhdGEteT1cIiR7Y29vcmRbMV19XCJdYFxuICAgICAgKTtcbiAgICAgIGhpdFNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3Vua1wiKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBtYXJrU3F1YXJlID0gKGNvb3JkaW5hdGUsIHsgaGl0LCBzdW5rLCBjb29yZHMgfSwgdHVybikgPT4ge1xuICAgIGxldCB0YXJnZXQ7XG4gICAgaWYgKHR1cm4gPT09IFwicmVhbFBsYXllclwiKSB7XG4gICAgICB0YXJnZXQgPSBBSUJvYXJkRE9NLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAuc3F1YXJlW2RhdGEteD1cIiR7Y29vcmRpbmF0ZVswXX1cIl1bZGF0YS15PVwiJHtjb29yZGluYXRlWzFdfVwiXWBcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0dXJuID09PSBcImFpXCIpIHtcbiAgICAgIHRhcmdldCA9IHBsYXllckJvYXJkRE9NLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAuc3F1YXJlW2RhdGEteD1cIiR7Y29vcmRpbmF0ZVswXX1cIl1bZGF0YS15PVwiJHtjb29yZGluYXRlWzFdfVwiXWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGhpdCA9PT0gdHJ1ZSkgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgZWxzZSB0YXJnZXQuY2xhc3NMaXN0LmFkZChcIm1pc3NlZFwiKTtcbiAgfTtcblxuICBjb25zdCBwbGF5ZXJNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgQUlCb2FyZERPTS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIGNvbnN0IHBsYXllclRhcmdldCA9IGNvbnZlcnRUb0Nvb3JkaW5hdGUoZXZlbnQudGFyZ2V0KTtcbiAgICBjb25zdCBwbGF5ZXJBdHRhY2sgPSBwbGF5ZXJzLnJlYWxQbGF5ZXIuYXR0YWNrKHBsYXllcnMuQUksIHBsYXllclRhcmdldCk7XG4gICAgY29uc3QgY3VycmVudFR1cm4gPSBnZXRUdXJuKCk7XG4gICAgZGlzcGxheVdob3NlVHVybihjdXJyZW50VHVybik7XG4gICAgbWFya1NxdWFyZShwbGF5ZXJUYXJnZXQsIHBsYXllckF0dGFjaywgY3VycmVudFR1cm4pO1xuICAgIGlmIChwbGF5ZXJBdHRhY2suc3VuayA9PT0gdHJ1ZSkgbWFya1N1bmsocGxheWVyQXR0YWNrLmNvb3JkcywgY3VycmVudFR1cm4pO1xuICAgIGNoYW5nZVR1cm4oKTtcbiAgfTtcblxuICBjb25zdCBBSU1vdmUgPSAoKSA9PiB7XG4gICAgaWYgKHBsYXllcnMuQUkuYm9hcmQuYXJlQWxsU3VuaygpKSByZXR1cm47XG4gICAgY29uc3QgY3VycmVudFR1cm4gPSBnZXRUdXJuKCk7XG4gICAgY29uc3QgQUlUYXJnZXQgPSBnZXRWYWxpZEF0dGFjayhBSVBvc3NpYmxlQXR0YWNrcyk7XG4gICAgY29uc3QgQUlBdHRhY2sgPSBwbGF5ZXJzLkFJLmF0dGFjayhwbGF5ZXJzLnJlYWxQbGF5ZXIsIEFJVGFyZ2V0KTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFya1NxdWFyZShBSVRhcmdldCwgQUlBdHRhY2ssIGN1cnJlbnRUdXJuKTtcbiAgICAgIGlmIChBSUF0dGFjay5zdW5rID09PSB0cnVlKSBtYXJrU3VuayhBSUF0dGFjay5jb29yZHMsIGN1cnJlbnRUdXJuKTtcbiAgICB9LCA1MDApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkaXNwbGF5V2hvc2VUdXJuKGN1cnJlbnRUdXJuKTtcbiAgICB9LCA3MDApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjaGFuZ2VUdXJuKCk7XG4gICAgICBBSUJvYXJkRE9NLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfSwgODAwKTtcbiAgfTtcblxuICBjb25zdCBzdGFydEF0dGFjayA9IChlKSA9PiB7XG4gICAgaWYgKFxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibWlzc2VkXCIpIHx8XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJoaXRcIikgfHxcbiAgICAgIGdldFR1cm4oKSA9PT0gXCJhaVwiIHx8XG4gICAgICBwbGF5ZXJzLkFJLmJvYXJkLmFyZUFsbFN1bmsoKSB8fFxuICAgICAgcGxheWVycy5yZWFsUGxheWVyLmJvYXJkLmFyZUFsbFN1bmsoKVxuICAgIClcbiAgICAgIHJldHVybjtcbiAgICBwbGF5ZXJNb3ZlKGUpO1xuICAgIEFJTW92ZSgpO1xuICB9O1xuXG4gIGNvbnN0IGlzR2FtZU92ZXIgPSAoKSA9PlxuICAgIHBsYXllcnMuQUkuYm9hcmQuYXJlQWxsU3VuaygpIHx8IHBsYXllcnMucmVhbFBsYXllci5ib2FyZC5hcmVBbGxTdW5rKCk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydEF0dGFjayxcbiAgICBwbGF5ZXJzLFxuICAgIGFuY2hvckFTaGlwLFxuICAgIGNhblN0YXJ0R2FtZSxcbiAgICBpc091dE9mQm91bmRzLFxuICAgIGlzR2FtZU92ZXIsXG4gICAgZ2V0VHVybixcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVIYW5kbGVyO1xuIiwiaW1wb3J0IGdhbWVIYW5kbGVyIGZyb20gXCIuLi9tb2R1bGVzL2dhbWVIYW5kbGVyXCI7XG5cbmNvbnN0IEFJQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpLWJvYXJkXCIpO1xuY29uc3QgcGxheWVyQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllci1ib2FyZFwiKTtcbmNvbnN0IGJvYXJkRm9yUGxhY2VtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGFjZS1zaGlwLWJvYXJkXCIpO1xuY29uc3Qgc2hpcHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoaXBzLWNvbnRhaW5lclwiKTtcbmNvbnN0IHN0YXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdGFydFwiKTtcbmNvbnN0IGJvYXJkUmVzZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvYXJkLXJlc2V0XCIpO1xuY29uc3QgZ2FtZVJlc2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lLXJlc2V0XCIpO1xuY29uc3QgYWxpZ25tZW50QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbGlnbm1lbnQtYnRuXCIpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheVwiKTtcblxuY29uc3QgYm9hcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm9hcmQtY3JlYXRvclwiKTtcbmNvbnN0IGdhbWVvdmVyRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ2FtZW92ZXItZGlzcGxheVwiKTtcbmNvbnN0IGdhbWVvdmVyUmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lb3Zlci1yZXN1bHRcIik7XG5cbmxldCBteUdhbWVIYW5kbGVyID0gZ2FtZUhhbmRsZXIoXCJ0ZXN0XCIpO1xuXG5jb25zdCByZW5kZXJQbGF5ZXJTaGlwcyA9ICgpID0+IHtcbiAgY29uc3QgcGxheWVyU2hpcHMgPSBteUdhbWVIYW5kbGVyLnBsYXllcnMucmVhbFBsYXllci5ib2FyZC5zaGlwTGlzdDtcbiAgcGxheWVyU2hpcHMuZm9yRWFjaCgoc2hpcE9iaikgPT4ge1xuICAgIHNoaXBPYmouY29vcmRpbmF0ZXMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgIGNvbnN0IGNvb3JkT25QbGF5ZXJCb2FyZCA9IHBsYXllckJvYXJkLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBbZGF0YS14PVwiJHtjb29yZFswXX1cIl1bZGF0YS15PVwiJHtjb29yZFsxXX1cIl1gXG4gICAgICApO1xuICAgICAgY29vcmRPblBsYXllckJvYXJkLmNsYXNzTGlzdC5hZGQoXCJhbmNob3JlZFwiKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5hbGlnbm1lbnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbGV0IGFsaWdubWVudFN0YXRlID0gc2hpcHNDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQuZGF0YXNldC5hbGlnbm1lbnQ7XG4gIGNvbnN0IGV2ZXJ5U2hpcCA9IEFycmF5LmZyb20oc2hpcHNDb250YWluZXIuY2hpbGRyZW4pO1xuICBpZiAoYWxpZ25tZW50U3RhdGUgPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgYWxpZ25tZW50U3RhdGUgPSBcInZlcnRpY2FsXCI7XG4gICAgZXZlcnlTaGlwLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuZGF0YXNldC5hbGlnbm1lbnQgPSBhbGlnbm1lbnRTdGF0ZTtcbiAgICAgIHNoaXAuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGV2ZXJ5U2hpcC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBhbGlnbm1lbnRTdGF0ZSA9IFwiaG9yaXpvbnRhbFwiO1xuICAgICAgc2hpcC5kYXRhc2V0LmFsaWdubWVudCA9IGFsaWdubWVudFN0YXRlO1xuICAgICAgc2hpcC5jbGFzc0xpc3QucmVtb3ZlKFwidmVydGljYWxcIik7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5jb25zdCBjYW5FbmRHYW1lID0gKCkgPT4ge1xuICAvLyBJbXBsZW1lbnQgbW9kYWwgdG8gcG9wIHVwIGluc3RlYWQgb2YgYWx0ZXJcbiAgaWYgKG15R2FtZUhhbmRsZXIuaXNHYW1lT3ZlcigpKSB7XG4gICAgaWYgKG15R2FtZUhhbmRsZXIucGxheWVycy5BSS5ib2FyZC5hcmVBbGxTdW5rKCkpXG4gICAgICBnYW1lb3ZlclJlc3VsdC50ZXh0Q29udGVudCA9IFwiWW91IHdvblwiO1xuICAgIGVsc2UgZ2FtZW92ZXJSZXN1bHQudGV4dENvbnRlbnQgPSBcIkFJIHdvblwiO1xuXG4gICAgZ2FtZW92ZXJEaXNwbGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICB9XG59O1xuXG5jb25zdCBhdHRhY2tpbmdQaGFzZSA9ICgpID0+IHtcbiAgYm9hcmRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gIEFJQm9hcmQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgcmVuZGVyUGxheWVyU2hpcHMoKTtcbiAgbXlHYW1lSGFuZGxlci5wbGF5ZXJzLkFJLmJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcygpO1xuICBBSUJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoXG4gICAgICBteUdhbWVIYW5kbGVyLmlzR2FtZU92ZXIoKSB8fFxuICAgICAgbXlHYW1lSGFuZGxlci5nZXRUdXJuKCkgPT09IFwiYWlcIiB8fFxuICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNxdWFyZVwiKVxuICAgIClcbiAgICAgIHJldHVybjtcbiAgICBteUdhbWVIYW5kbGVyLnN0YXJ0QXR0YWNrKGUpO1xuICAgIGNhbkVuZEdhbWUoKTtcbiAgfSk7XG59O1xuXG5zdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAvLyBJZiBjbGlja2VkIGJlZm9yZSBwbGF5YWJsZSwgcHJldmVudHMgZnJvbSBmdXJ0aHIgcGxheWluZ1xuICBcImNsaWNrXCIsXG4gICgpID0+IHtcbiAgICBpZiAobXlHYW1lSGFuZGxlci5jYW5TdGFydEdhbWUoKSkge1xuICAgICAgYXR0YWNraW5nUGhhc2UoKTtcbiAgICB9XG4gIH1cbik7XG5cbnNoaXBzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNoaXBcIikpIHtcbiAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwic2hpcC1sZW5ndGhcIiwgZS50YXJnZXQuZGF0YXNldC5sZW5ndGgpO1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJzaGlwLW5hbWVcIiwgZS50YXJnZXQuaWQpO1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJzaGlwLWFsaWdubWVudFwiLCBlLnRhcmdldC5kYXRhc2V0LmFsaWdubWVudCk7XG4gIH1cbn0pO1xuXG5ib2FyZEZvclBsYWNlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGUpID0+IHtcbiAgaWYgKFxuICAgIGUudGFyZ2V0LmlkID09PSBcInBsYWNlLXNoaXAtYm9hcmRcIiB8fFxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFuY2hvcmVkXCIpXG4gIClcbiAgICByZXR1cm47XG4gIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJkcmFnb3ZlclwiKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmJvYXJkRm9yUGxhY2VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKGUpID0+IHtcbiAgaWYgKGUudGFyZ2V0LmlkID09PSBcInBsYWNlLXNoaXAtYm9hcmRcIikgcmV0dXJuO1xuICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ292ZXJcIik7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG5jb25zdCBhZGRBbmNob3JlZENsYXNzID0gKHNoaXBQbGFjZW1lbnQpID0+IHtcbiAgc2hpcFBsYWNlbWVudC5mb3JFYWNoKChwbGFjZW1lbnQpID0+IHtcbiAgICBjb25zdCBwbGFjZW1lbnRJbkRPTSA9IGJvYXJkRm9yUGxhY2VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEteD1cIiR7cGxhY2VtZW50WzBdfVwiXVtkYXRhLXk9XCIke3BsYWNlbWVudFsxXX1cIl1gXG4gICAgKTtcbiAgICBwbGFjZW1lbnRJbkRPTS5jbGFzc0xpc3QuYWRkKFwiYW5jaG9yZWRcIik7XG4gIH0pO1xufTtcblxuYm9hcmRGb3JQbGFjZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGUpID0+IHtcbiAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImRyYWdvdmVyXCIpO1xuICBjb25zdCBvYmplY3REYXRhID0ge1xuICAgIGxlbmd0aDogTnVtYmVyKGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJzaGlwLWxlbmd0aFwiKSksXG4gICAgbmFtZTogZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInNoaXAtbmFtZVwiKSxcbiAgICBhbGlnbm1lbnQ6IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJzaGlwLWFsaWdubWVudFwiKSxcbiAgfTtcbiAgY29uc3QgY2hvc2VuQ29vcmRpbmF0ZSA9IFtcbiAgICBOdW1iZXIoZS50YXJnZXQuZGF0YXNldC54KSxcbiAgICBOdW1iZXIoZS50YXJnZXQuZGF0YXNldC55KSxcbiAgXTtcblxuICBjb25zdCBzaGlwTG9jYXRpb24gPSBteUdhbWVIYW5kbGVyLmFuY2hvckFTaGlwKGNob3NlbkNvb3JkaW5hdGUsIG9iamVjdERhdGEpO1xuICBpZiAoc2hpcExvY2F0aW9uKSB7XG4gICAgYWRkQW5jaG9yZWRDbGFzcyhzaGlwTG9jYXRpb24pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke29iamVjdERhdGEubmFtZX1gKS5jbGFzc0xpc3QuYWRkKFwicmVtb3ZlZFwiKTtcbiAgfVxufSk7XG5cbmNvbnN0IGNsYXNzUmVtb3ZhbCA9IChjbGFzc05hbWUsIGNvbnRhaW5lciA9IGRvY3VtZW50KSA9PiB7XG4gIGNvbnN0IGVsZW1lbnRzVG9DbGVhciA9IEFycmF5LmZyb20oXG4gICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2NsYXNzTmFtZX1gKVxuICApO1xuICBlbGVtZW50c1RvQ2xlYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkpO1xufTtcblxuLyogPCEhISEhISEhISEgR2FtZSBSZXNldCAhISEhISEhISEhIT4gKi9cbmNvbnN0IHJlc2V0Qm9hcmQgPSAoKSA9PiB7XG4gIG15R2FtZUhhbmRsZXIgPSBnYW1lSGFuZGxlcihcInRlc3RcIik7XG4gIGNsYXNzUmVtb3ZhbChcImFuY2hvcmVkXCIpO1xuICBjbGFzc1JlbW92YWwoXCJyZW1vdmVkXCIsIHNoaXBzQ29udGFpbmVyKTtcbn07XG5cbmJvYXJkUmVzZXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcmVzZXRCb2FyZCgpO1xufSk7XG5cbmdhbWVSZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICByZXNldEJvYXJkKCk7XG4gIGNsYXNzUmVtb3ZhbChcImhpdFwiKTtcbiAgY2xhc3NSZW1vdmFsKFwibWlzc2VkXCIpO1xuICBjbGFzc1JlbW92YWwoXCJzdW5rXCIpO1xuICBnYW1lb3ZlckRpc3BsYXkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgYm9hcmRNb2RhbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xufSk7XG4iXSwibmFtZXMiOlsic2hpcHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwic2hpcCIsInNoaXBMZW5ndGgiLCJOdW1iZXIiLCJkYXRhc2V0IiwibGVuZ3RoIiwic2V0QXR0cmlidXRlIiwiYWxpZ25tZW50IiwiaSIsInNoaXBCbG9jayIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsIkhBU0hfVU5ERUZJTkVEIiwiTUFYX1NBRkVfSU5URUdFUiIsImFyZ3NUYWciLCJhcnJheVRhZyIsImJvb2xUYWciLCJkYXRlVGFnIiwiZXJyb3JUYWciLCJmdW5jVGFnIiwibWFwVGFnIiwibnVtYmVyVGFnIiwib2JqZWN0VGFnIiwicHJvbWlzZVRhZyIsInJlZ2V4cFRhZyIsInNldFRhZyIsInN0cmluZ1RhZyIsInN5bWJvbFRhZyIsIndlYWtNYXBUYWciLCJhcnJheUJ1ZmZlclRhZyIsImRhdGFWaWV3VGFnIiwicmVJc0hvc3RDdG9yIiwicmVJc1VpbnQiLCJ0eXBlZEFycmF5VGFncyIsImZyZWVHbG9iYWwiLCJnIiwiT2JqZWN0IiwiZnJlZVNlbGYiLCJzZWxmIiwicm9vdCIsIkZ1bmN0aW9uIiwiZnJlZUV4cG9ydHMiLCJleHBvcnRzIiwibm9kZVR5cGUiLCJmcmVlTW9kdWxlIiwibW9kdWxlIiwibW9kdWxlRXhwb3J0cyIsImZyZWVQcm9jZXNzIiwicHJvY2VzcyIsIm5vZGVVdGlsIiwiYmluZGluZyIsImUiLCJub2RlSXNUeXBlZEFycmF5IiwiaXNUeXBlZEFycmF5IiwiYXJyYXlTb21lIiwiYXJyYXkiLCJwcmVkaWNhdGUiLCJpbmRleCIsIm1hcFRvQXJyYXkiLCJtYXAiLCJyZXN1bHQiLCJzaXplIiwidmFsdWUiLCJrZXkiLCJzZXRUb0FycmF5Iiwic2V0IiwidWlkIiwiZnVuYyIsInRyYW5zZm9ybSIsImFycmF5UHJvdG8iLCJwcm90b3R5cGUiLCJmdW5jUHJvdG8iLCJvYmplY3RQcm90byIsImNvcmVKc0RhdGEiLCJmdW5jVG9TdHJpbmciLCJ0b1N0cmluZyIsImhhc093blByb3BlcnR5IiwibWFza1NyY0tleSIsImV4ZWMiLCJrZXlzIiwiSUVfUFJPVE8iLCJuYXRpdmVPYmplY3RUb1N0cmluZyIsInJlSXNOYXRpdmUiLCJSZWdFeHAiLCJjYWxsIiwicmVwbGFjZSIsIkJ1ZmZlciIsInVuZGVmaW5lZCIsIlN5bWJvbCIsIlVpbnQ4QXJyYXkiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInNwbGljZSIsInN5bVRvU3RyaW5nVGFnIiwidG9TdHJpbmdUYWciLCJuYXRpdmVHZXRTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibmF0aXZlSXNCdWZmZXIiLCJpc0J1ZmZlciIsIm5hdGl2ZUtleXMiLCJhcmciLCJEYXRhVmlldyIsImdldE5hdGl2ZSIsIk1hcCIsIlByb21pc2UiLCJTZXQiLCJXZWFrTWFwIiwibmF0aXZlQ3JlYXRlIiwiZGF0YVZpZXdDdG9yU3RyaW5nIiwidG9Tb3VyY2UiLCJtYXBDdG9yU3RyaW5nIiwicHJvbWlzZUN0b3JTdHJpbmciLCJzZXRDdG9yU3RyaW5nIiwid2Vha01hcEN0b3JTdHJpbmciLCJzeW1ib2xQcm90byIsInN5bWJvbFZhbHVlT2YiLCJ2YWx1ZU9mIiwiSGFzaCIsImVudHJpZXMiLCJ0aGlzIiwiY2xlYXIiLCJlbnRyeSIsIkxpc3RDYWNoZSIsIk1hcENhY2hlIiwiU2V0Q2FjaGUiLCJ2YWx1ZXMiLCJfX2RhdGFfXyIsIlN0YWNrIiwiZGF0YSIsImFycmF5TGlrZUtleXMiLCJpbmhlcml0ZWQiLCJpc0FyciIsImlzQXJyYXkiLCJpc0FyZyIsImlzQXJndW1lbnRzIiwiaXNCdWZmIiwiaXNUeXBlIiwic2tpcEluZGV4ZXMiLCJuIiwiaXRlcmF0ZWUiLCJiYXNlVGltZXMiLCJTdHJpbmciLCJpc0luZGV4IiwicHVzaCIsImFzc29jSW5kZXhPZiIsImVxIiwiYmFzZUdldFRhZyIsImlzT3duIiwidGFnIiwidW5tYXNrZWQiLCJnZXRSYXdUYWciLCJvYmplY3RUb1N0cmluZyIsImJhc2VJc0FyZ3VtZW50cyIsImlzT2JqZWN0TGlrZSIsImJhc2VJc0VxdWFsIiwib3RoZXIiLCJiaXRtYXNrIiwiY3VzdG9taXplciIsInN0YWNrIiwib2JqZWN0IiwiZXF1YWxGdW5jIiwib2JqSXNBcnIiLCJvdGhJc0FyciIsIm9ialRhZyIsImdldFRhZyIsIm90aFRhZyIsIm9iaklzT2JqIiwib3RoSXNPYmoiLCJpc1NhbWVUYWciLCJlcXVhbEFycmF5cyIsImJ5dGVMZW5ndGgiLCJieXRlT2Zmc2V0IiwiYnVmZmVyIiwibmFtZSIsIm1lc3NhZ2UiLCJjb252ZXJ0IiwiaXNQYXJ0aWFsIiwic3RhY2tlZCIsImdldCIsImVxdWFsQnlUYWciLCJvYmpJc1dyYXBwZWQiLCJvdGhJc1dyYXBwZWQiLCJvYmpVbndyYXBwZWQiLCJvdGhVbndyYXBwZWQiLCJvYmpQcm9wcyIsImdldEFsbEtleXMiLCJvYmpMZW5ndGgiLCJvdGhMZW5ndGgiLCJza2lwQ3RvciIsIm9ialZhbHVlIiwib3RoVmFsdWUiLCJjb21wYXJlZCIsIm9iakN0b3IiLCJjb25zdHJ1Y3RvciIsIm90aEN0b3IiLCJlcXVhbE9iamVjdHMiLCJiYXNlSXNFcXVhbERlZXAiLCJiYXNlSXNOYXRpdmUiLCJpc09iamVjdCIsImlzTWFza2VkIiwiaXNGdW5jdGlvbiIsInRlc3QiLCJiYXNlS2V5cyIsIkN0b3IiLCJwcm90byIsImFyckxlbmd0aCIsInNlZW4iLCJhcnJWYWx1ZSIsIm90aEluZGV4IiwiaGFzIiwia2V5c0Z1bmMiLCJzeW1ib2xzRnVuYyIsIm9mZnNldCIsImFycmF5UHVzaCIsImJhc2VHZXRBbGxLZXlzIiwiZ2V0U3ltYm9scyIsImdldE1hcERhdGEiLCJ0eXBlIiwiZ2V0VmFsdWUiLCJwb3AiLCJwYWlycyIsIkxBUkdFX0FSUkFZX1NJWkUiLCJyZXNJbmRleCIsImFycmF5RmlsdGVyIiwic3ltYm9sIiwiQXJyYXlCdWZmZXIiLCJyZXNvbHZlIiwiY3RvclN0cmluZyIsImFyZ3VtZW50cyIsImlzTGVuZ3RoIiwiYmFzZVVuYXJ5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnbG9iYWxUaGlzIiwid2luZG93Iiwib2JqIiwicHJvcCIsIm5tZCIsInBhdGhzIiwiY2hpbGRyZW4iLCJwb3NzaWJsZUF0dGFja3MiLCJhdHRhY2tzIiwieENvb3JkaW5hdGUiLCJqIiwieUNvb3JkaW5hdGUiLCJjcmVhdGVBcnJheU9mQXR0YWNrcyIsInBsYXllckJvYXJkIiwiZ2V0RWxlbWVudEJ5SWQiLCJBSUJvYXJkIiwiYm9hcmRGb3JQbGFjZW1lbnQiLCJjb29yZGluYXRlIiwic3F1YXJlIiwieCIsInkiLCJzcXVhcmVDbG9uZTEiLCJjbG9uZU5vZGUiLCJzcXVhcmVDbG9uZTIiLCJoaXRzVGFrZW4iLCJnZXRMZW5ndGgiLCJnZXROYW1lIiwiaGl0IiwiZ2V0SGl0c1Rha2VuIiwiaXNTdW5rIiwiaWxsZWdhbFZhcmlhbnRzIiwic2hpcEFycmF5IiwiYm9hcmQiLCJzaGlwTGlzdCIsIm1pc3NlZFNob3RzIiwidW5hdmFpbGFibGVDb29yZHMiLCJpc0luQW5BcnJheSIsImVsZW1lbnQiLCJzb21lIiwiZWwiLCJpc0VxdWFsIiwiZ2VuZXJhdGVJbGxlZ2FsTW92ZXMiLCJjb29yZGluYXRlcyIsImlsbGVnYWxQb3NzaWJpbGl0ZXMiLCJpbGxlZ2FsU2V0IiwiY29vcmQiLCJpbGxlZ2FsVmFyaWFudCIsImlsbGVnYWxNb3ZlIiwiaXNJbklsbGVnYWxDb29yZHMiLCJzaGlwUGxhY2VtZW50IiwiaWxsZWdhbE1vdmVzIiwicGxhY2VtZW50IiwicGxhY2VTaGlwIiwic2hpcE9iamVjdCIsIlNoaXAiLCJjaGVja0hpdCIsImdldFJhbmRvbUluZGV4IiwiaW5kZXhBcnJheSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldFJhbmRvbUFsaWdubWVudCIsImFsaWdubWVudHMiLCJnZXRJbml0aWFsQm9hcmRTcXVhcmUiLCJpbml0aWFsQm9hcmRTcXVhcmUiLCJob3Jpem9udGFsQ29vcmQiLCJnZXRSYW5kb21QbGFjZW1lbnQiLCJpbml0aWFsQ29vcmQiLCJyZWNlaXZlQXR0YWNrIiwiaW5kZXhPZlNoaXAiLCJzaGlwSW5MaXN0Iiwic3VuayIsImNvb3JkcyIsImFyZUFsbFN1bmsiLCJldmVyeSIsInJhbmRvbWx5UGxhY2VTaGlwcyIsInJhbmRvbUluZGV4Iiwic2hpcEhlbHBlciIsIkdhbWVib2FyZCIsImF0dGFjayIsImVuZW15IiwicGxheWVyQm9hcmRET00iLCJBSUJvYXJkRE9NIiwidHVybkRpc3BsYXkiLCJwbGF5ZXJOYW1lIiwicGxheWVyVHVybiIsInBsYXllcnMiLCJyZWFsUGxheWVyIiwiUGxheWVyIiwiQUkiLCJpc091dE9mQm91bmRzIiwiQUlQb3NzaWJsZUF0dGFja3MiLCJnZXRUdXJuIiwiY2hhbmdlVHVybiIsImRpc3BsYXlXaG9zZVR1cm4iLCJ0dXJuIiwid2hvc2VUdXJuIiwidGV4dENvbnRlbnQiLCJtYXJrU3VuayIsImJvYXJkVG9NYXJrIiwicXVlcnlTZWxlY3RvciIsIm1hcmtTcXVhcmUiLCJ0YXJnZXQiLCJwbGF5ZXJNb3ZlIiwiZXZlbnQiLCJyZW1vdmUiLCJwbGF5ZXJUYXJnZXQiLCJwbGF5ZXJBdHRhY2siLCJjdXJyZW50VHVybiIsIkFJTW92ZSIsImF0dGFja3NBcnJheSIsIkFJVGFyZ2V0IiwiZmxhdCIsIkFJQXR0YWNrIiwic2V0VGltZW91dCIsInN0YXJ0QXR0YWNrIiwiY29udGFpbnMiLCJhbmNob3JBU2hpcCIsImNob3NlbkNvb3JkaW5hdGUiLCJzaGlwRGF0YSIsImdlbmVyYXRlUGxhY2VtZW50IiwiaXNTaGlwUGxhY2VkIiwiY2FuU3RhcnRHYW1lIiwiaXNHYW1lT3ZlciIsInNoaXBzQ29udGFpbmVyIiwic3RhcnRCdG4iLCJib2FyZFJlc2V0QnRuIiwiZ2FtZVJlc2V0QnRuIiwiYWxpZ25tZW50QnRuIiwib3ZlcmxheSIsImJvYXJkTW9kYWwiLCJnYW1lb3ZlckRpc3BsYXkiLCJnYW1lb3ZlclJlc3VsdCIsIm15R2FtZUhhbmRsZXIiLCJnYW1lSGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhbGlnbm1lbnRTdGF0ZSIsImZpcnN0RWxlbWVudENoaWxkIiwiZXZlcnlTaGlwIiwiYXR0YWNraW5nUGhhc2UiLCJzaGlwT2JqIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsInByZXZlbnREZWZhdWx0Iiwib2JqZWN0RGF0YSIsImdldERhdGEiLCJzaGlwTG9jYXRpb24iLCJjbGFzc1JlbW92YWwiLCJjbGFzc05hbWUiLCJjb250YWluZXIiLCJlbGVtZW50c1RvQ2xlYXIiLCJyZXNldEJvYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==